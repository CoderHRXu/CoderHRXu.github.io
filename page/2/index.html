<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="æ¬¢è¿æ¥åˆ°æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta property="og:type" content="website">
<meta property="og:title" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta property="og:url" content="https://www.jianshu.com/u/6aea1100cc05/page/2/index.html">
<meta property="og:site_name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta property="og:description" content="æ¬¢è¿æ¥åˆ°æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta name="twitter:description" content="æ¬¢è¿æ¥åˆ°æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.jianshu.com/u/6aea1100cc05/page/2/"/>





  <title>æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ä¸ä¼šæ•²ä»£ç çš„è€å¸æœºä¸æ˜¯å¥½å¨å­</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/17/MacOSShareWifi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/MacOSShareWifi/" itemprop="url">å…³äºMacå…±äº«WiFiç½‘ç»œï¼Œçœ‹è¿™é‡Œå°±å¤Ÿäº†(2.4Gï¼Œ5G ï¼Œ ipv6)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-17T13:03:10+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h3><p>WiFiè¿™ä¸ªè¯å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œå‰å‡ å¹´ç§»åŠ¨äº’è”ç½‘çš„é£é€Ÿå‘å±•ï¼Œå¦‚ä»Šå®¶å®¶æˆ·æˆ·éƒ½æœ‰æ— çº¿è·¯ç”±å™¨ï¼Œéƒ½æœ‰è‡ªå®¶çš„WiFiã€‚ä½†æ˜¯æ€»æœ‰ä¸€äº›åœºæ™¯ï¼Œæˆ‘ä»¬éœ€è¦WiFiç½‘ç»œæ¥ç»™æˆ‘ä»¬çš„ç§»åŠ¨è®¾å¤‡ä½¿ç”¨ï¼Œä½†æ˜¯ç°åœºæœ‰æ²¡æœ‰ç›¸å…³çš„ç¡¬ä»¶è®¾å¤‡ï¼Œè¿™å°±å‚¬ç”Ÿäº†ä¸€äº›WiFiä½¿ç”¨çš„éœ€æ±‚ã€‚åœ¨windowsç³»ç»Ÿä¸Šï¼Œå·²ç»æœ‰ä¸å°‘æˆç†Ÿçš„äº§å“ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»ºä¸“å±çš„WiFiç½‘ç»œã€‚ä¾‹å¦‚å°ç±³éšèº«WiFiï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ— çº¿ç½‘å¡ï¼Œä½œä¸ºAPåˆ†äº«ã€‚ç¬”è®°æœ¬ç”µè„‘ä¸€èˆ¬éƒ½è‡ªå¸¦æ— çº¿ç½‘å¡ï¼Œä¸€äº›è½¯ä»¶ä¹Ÿèƒ½åˆ©ç”¨ç¬”è®°æœ¬çš„æ— çº¿ç½‘å¡åšçƒ­ç‚¹åˆ†äº«ã€‚é‚£ä¹ˆï¼Œåœ¨Macå¹³å°ä¸Šæˆ‘ä»¬å¦‚ä½•åˆ›å»ºè‡ªå·±çš„ä¸“å±WiFiå‘¢ï¼Ÿ</p>
<h3 id="So-Easy"><a href="#So-Easy" class="headerlink" title="So Easy"></a>So Easy</h3><p>è‹¹æœç”µè„‘åœ¨å·²ç»è¿æ¥äº†æœ‰çº¿ç½‘ç»œçš„æƒ…å†µä¸‹ï¼ˆå‰ææ¡ä»¶ï¼‰ï¼Œæ— éœ€ä¸‹è½½å®‰è£…å…¶ä»–WiFiå…±äº«è½¯ä»¶å³å¯å®ç°WiFiå…±äº«ï¼Œä½†å¦‚æœè¿æ¥çš„æ˜¯æ— çº¿ç½‘ç»œæ—¶åˆ™ä¸èƒ½å…±äº«WiFiï¼Œå³è¿ç€WiFiæ—¶ä¸èƒ½å…±äº«WiFiã€‚<br>1.ç‚¹å‡»å·¦ä¸Šè§’çš„é»‘è‹¹æœğŸï¼Œé€‰æ‹©ã€ç³»ç»Ÿåå¥½è®¾ç½®ã€‘</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-cb62ad9287cef03f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="step1.png"><br>2.å•å‡»ã€å…±äº«ã€‘</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-4cc0258b11d3e344.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="step2.png"></p>
<p>3.æ£€æµ‹ä¸€ä¸‹ä½ ç”µè„‘çš„æ— çº¿ç½‘å¡æœ‰æ²¡æœ‰å¼€å¯ï¼Œå¦‚æœæ²¡å¼€å¯ï¼Œç‚¹å‡»ç³»ç»Ÿå³ä¸Šè§’çš„æ— çº¿ç½‘iconï¼Œæ‰“å¼€</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-5eeb6cd66e296020.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="step3.png"></p>
<p>4.ä¸Šé¢çš„æ¡†æ¡†ï¼Œæ„æ€æ˜¯ä½ è¦æŠŠå“ªä¸ªç½‘ç»œå…±äº«ï¼Œæˆ‘çš„ç”µè„‘æ˜¯è‡ªå¸¦RJ45ç½‘å£çš„ï¼Œç½‘ç»œç¯å¢ƒç›´æ¥æ’ç½‘çº¿å°±å¯ä»¥ä¸Šç½‘ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ã€ä»¥å¤ªç½‘ã€‘ï¼Œå¦‚æœæ˜¯æ–°æ¬¾çš„MacBookä¸å¸¦ç½‘å£çš„ï¼Œè€Œæ˜¯æ¥äº†USBç½‘å¡ï¼Œè¿™é‡Œçš„æ¥æºå°±è¦é€‰æ‹©ã€USBç½‘å¡è®¾å¤‡ã€‘ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œä¸ç®¡ä½ ç”µè„‘å¸¦ä¸å¸¦ç½‘å¡ï¼Œåªè¦æ˜¯ä½ è¦åœ¨ç”µè„‘è¿›è¡ŒPPPoEä¸Šç½‘çš„ï¼ˆä¿—ç§°æ‹¨å·ä¸Šç½‘ï¼Œå®¶åº­ç½‘ç»œè¿™æ ·çš„è®¤è¯æ–¹å¼æœ€å¤šï¼‰ï¼Œè¿™é‡Œçš„æ¥æºå°±è¦é€‰æ‹©ã€PPPoEç½‘ç»œã€‘ï¼Œè¿™é‡Œè¯·æ ¹æ®å®é™…æƒ…å†µã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-b0d8159d71ebb35a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ä¸‹é¢çš„æ¡†æ¡†ï¼Œæ„æ€å°±æ˜¯æŠŠç½‘ç»œé€šè¿‡ä»€ä¹ˆç«¯å£å…±äº«å‡ºå»ï¼Œå¾ˆæ˜æ˜¾è¿™é‡Œé€‰æ‹©WiFiï¼Œå°±æ˜¯é€šè¿‡æ— çº¿çš„æ–¹å¼åˆ†äº«å‡ºå»ã€‚</p>
<p>5.ç„¶åç‚¹å‡»ã€WiFié€‰é¡¹ã€‘ï¼Œå¼¹å‡ºä¸€ä¸ªé¡µé¢ï¼Œå¡«å†™ä½ è¦åˆ›å»ºçš„WiFiåç§°ï¼Œä»¥åŠå®‰å…¨æ€§ï¼Œè‡ªå·±åˆ›å»ºçš„WiFiå½“ç„¶æƒ³è‡ªå·±ç”¨å•¦ï¼Œé€‰æ‹©ã€WPA2ä¸ªäººçº§ã€‘çš„å°±å¥½ï¼Œå¡«å†™WiFiå¯†ç  ç‚¹å‡»å¥½å°±OKäº†ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-d6dfa21f09370eb2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>6.ä¹Ÿè®¸ç¬¬5æ­¥ä½ ä»¬å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå…³äºé¢‘æ®µï¼Œæˆ‘æ²¡æœ‰å…·ä½“è¯´æ˜ã€‚ç‚¹å¼€é¢‘æ®µä¹‹åï¼Œå¼¹å‡ºäº†ä¸€ä¸ªé€‰æ‹©ç•Œé¢ï¼Œæœ‰å¾ˆå¤šé¢‘æ®µï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿè€Œä¸”11å’Œ36ä¹‹é—´ï¼Œæ€ä¹ˆä¼šå¤šäº†ä¸€æ ¹åˆ†å‰²çº¿ï¼Ÿ</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-12a2f1fc97ace1ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>è¿™é‡Œå°±è¦è¡¥å……ä¸€äº›å…³äºWiFiçš„ä¸€äº›åŸºæœ¬çŸ¥è¯†äº†ã€‚Wi-Fiæ˜¯ä¸€ç§å…è®¸ç”µå­è®¾å¤‡è¿æ¥åˆ°ä¸€ä¸ªæ— çº¿å±€åŸŸç½‘ï¼ˆWLANï¼‰çš„æŠ€æœ¯,é€šå¸¸ä½¿ç”¨2.4G UHFæˆ–5G SHF ISM å°„é¢‘é¢‘æ®µã€‚ é¢‘æ®µæ˜¯å›ºå®šï¼Œé‚£ä¹ˆæ‰€ä»¥çš„è®¾å¤‡éƒ½åœ¨è¿™ä¸ªé¢‘æ®µä½¿ç”¨ï¼Œå°±ä¼šå®¹æ˜“é€ æˆå¹²æ‰°ï¼Œå°±å¥½æ¯”é©¬è·¯å®½åº¦æ˜¯ä¸€å®šçš„ï¼Œå¤§å®¶éƒ½åœ¨ä¸€æ¡é“ä¸Šæ¥å›èµ°ï¼Œå°±ä¼šç¢°æ’ã€‚æ‰€ä»¥åˆåˆ’åˆ†å‡ºäº†ä¿¡é“ï¼Œå°±å¥½æ¯”æŠŠé©¬è·¯åˆ’åˆ†äº†å¾ˆå¤šè½¦é“ï¼Œä¸åŒé€Ÿåº¦ç­‰çº§çš„å„è¡Œå…¶é“äº’ä¸å¹²æ‰°ã€‚ä¸åŒå›½å®¶åˆ’åˆ†æ ‡å‡†ä¸ä¸€è‡´ï¼Œä»¥ä¸­å›½ä¸ºä¾‹ï¼Œè¿è¡Œåœ¨2.4Gçš„WiFiç½‘ç»œï¼Œä¿¡é“åˆ’åˆ†å¦‚ä¸‹å›¾ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-3d70320d3a2d08a8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<pre><code>1.IEEE 802.11b/gæ ‡å‡†å·¥ä½œåœ¨2.4Gé¢‘æ®µï¼Œé¢‘ç‡èŒƒå›´ä¸º2.400â€”2.4835GHzï¼Œå…±83.5Må¸¦å®½
2.åˆ’åˆ†ä¸º14ä¸ªå­ä¿¡é“
3.æ¯ä¸ªå­ä¿¡é“å®½åº¦ä¸º22MHz
4.ç›¸é‚»ä¿¡é“çš„ä¸­å¿ƒé¢‘ç‚¹é—´éš”5MHz 
5.ç›¸é‚»çš„å¤šä¸ªä¿¡é“å­˜åœ¨é¢‘ç‡é‡å (å¦‚1ä¿¡é“ä¸2ã€3ã€4ã€5ä¿¡é“æœ‰é¢‘ç‡é‡å )
6.æ•´ä¸ªé¢‘æ®µå†…åªæœ‰3ä¸ªï¼ˆ1ã€6ã€11ï¼‰äº’ä¸å¹²æ‰°ä¿¡é“
</code></pre><p>å¦‚æœåˆ›å»º2.4Gçš„WiFiçš„è¯ï¼Œé€‰æ‹©çš„é¢‘é“çš„æ—¶å€™ï¼Œåœ¨1ã€6ã€11é‡Œé¢é€‰æ‹©ä¸€ç§å°±è¡Œäº†ã€‚åˆ°è¿™é‡Œå°±å¯ä»¥ç†è§£é‚£æ ¹åˆ†å‰²çº¿æ˜¯å•¥æ„æ€äº†ï¼Œåˆ†å‰²çº¿ä»¥ä¸Šçš„æ˜¯2.4Gçš„ä¿¡é“ï¼Œåˆ†å‰²çº¿ä¸€ä¸‹å°±æ˜¯5Gçš„ä¿¡é“ï¼Œé‚£ä¹ˆ5Gçš„ä¿¡é“å¦‚ä½•é€‰æ‹©ï¼Ÿ</p>
<p>å¾ˆç®€å•ï¼Œéšä¾¿é€‰ï¼ï¼ˆğŸ˜œå˜¿å˜¿å˜¿ï¼‰å› ä¸ºç°é˜¶æ®µ5Gç”¨çš„è¿˜æ˜¯ä¸å¤šï¼Œä¸ä¼šæœ‰å•¥å¹²æ‰°ã€‚<br>å¦‚æœä½ çš„ç”µè„‘ï¼Œç‚¹å¼€è¿™ä¸ªé€‰é¡¹ï¼Œå‘ç°åªæœ‰1åˆ°11çš„ä¿¡é“é€‰æ‹©ï¼Œè¯´æ˜ä½ çš„ç”µè„‘çš„æ— çº¿ç½‘å¡ï¼Œç¡¬ä»¶ä¸Šä¸æ”¯æŒ5GHzçš„WiFiï¼Œé‚£å°±æœ¨æœ‰åŠæ³•å’¯ã€‚</p>
<p>7.å›åˆ°æˆ‘ä»¬çš„è¯é¢˜æ¥ï¼Œé€‰æ‹©å¥½ä½ è¦çš„é¢‘æ®µï¼Œè®¾ç½®å¥½ä¹‹åï¼Œç‚¹å‡»å‹¾é€‰ã€äº’è”ç½‘å…±äº«ã€‘ï¼Œæ­¤æ—¶ä¼šå¼¹å‡ºä¸€ä¸ªæ¡†æ¡†ï¼Œç‚¹å‡»ã€å¯åŠ¨ã€‘å°±å¥½å•¦ï¼</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-57bd55c1eb869ee3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>æˆåŠŸä¹‹åï¼Œä½ ä¼šå‘ç°ï¼ŒWiFiçš„å°å›¾æ ‡å˜æˆäº†è¿™ä¸ªæ ·å­ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-7cc166273d8a3b16.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>åˆ°è¿™é‡Œå°±å¤§åŠŸå‘Šæˆå•¦ã€‚</p>
<h2 id="Wait-è¯´å¥½çš„IPV6å‘¢ï¼Ÿ"><a href="#Wait-è¯´å¥½çš„IPV6å‘¢ï¼Ÿ" class="headerlink" title="Wait è¯´å¥½çš„IPV6å‘¢ï¼Ÿ"></a>Wait è¯´å¥½çš„IPV6å‘¢ï¼Ÿ</h2><p>å…ˆè¦çŸ¥é“ä¸€ä¸ªæ¦‚å¿µï¼Œç›®å‰æˆ‘ä»¬ç»å¤§å¤šæ•°ä½¿ç”¨çš„ç½‘ç»œï¼Œéƒ½æ˜¯IPV4çš„ï¼ŒIPåœ°å€æœ‰å››æ®µ0~255çš„æ•°å­—ç»„æˆã€‚ ç”±äº<a href="http://baike.baidu.com/item/IPv4" target="_blank" rel="noopener">IPv4</a>æœ€å¤§çš„é—®é¢˜åœ¨äºç½‘ç»œåœ°å€èµ„æºæœ‰é™ï¼Œä¸¥é‡åˆ¶çº¦äº†äº’è”ç½‘çš„åº”ç”¨å’Œå‘å±•ã€‚IPV6åº”è¿è€Œç”Ÿï¼ŒIPv6çš„ä½¿ç”¨ï¼Œä¸ä»…èƒ½è§£å†³ç½‘ç»œåœ°å€èµ„æºæ•°é‡çš„é—®é¢˜ï¼Œè€Œä¸”ä¹Ÿè§£å†³äº†å¤šç§æ¥å…¥è®¾å¤‡è¿å…¥äº’è”ç½‘çš„éšœç¢ã€‚IPv6çš„åœ°å€é•¿åº¦ä¸º128bï¼Œæ˜¯IPv4åœ°å€é•¿åº¦çš„4å€ã€‚äºæ˜¯IPv4ç‚¹åˆ†åè¿›åˆ¶æ ¼å¼ä¸å†é€‚ç”¨ï¼Œé‡‡ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºã€‚ç®€å•è®²ï¼Œipv6èƒ½åˆ†é…çš„åœ°å€éå¸¸å¤šï¼Œç»å¯¹å¤Ÿç”¨ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªipv6çš„ç½‘ç»œå‘¢ï¼Ÿ</p>
<h3 id="è¿˜æ˜¯So-Easy"><a href="#è¿˜æ˜¯So-Easy" class="headerlink" title="è¿˜æ˜¯So Easy"></a>è¿˜æ˜¯So Easy</h3><p>1.ç‚¹å‡»å·¦ä¸Šè§’çš„é»‘è‹¹æœï¼Œé€‰æ‹©ã€ç³»ç»Ÿåå¥½è®¾ç½®ã€‘ï¼Œæ•²é»‘æ¿ï¼ï¼æŒ‰ä½â€™Optionâ€™æŒ‰é”®çš„åŒæ—¶ç‚¹é€‰â€œå…±äº«â€å›¾æ ‡ï¼Œæ³¨æ„ï¼šä¸è¦æ”¾å¼€â€™Optionâ€™æŒ‰é”®ï¼Œä¸€ç›´æŒ‰ä½ä¸æ”¾å“¦ï¼›è¿™æ ·æ“ä½œä¹‹åï¼Œä½ ä¼šå‘ç°ä¸‹é¢å¤šäº†ä¸€ä¸ªé€‰é¡¹ã€åˆ›å»ºNAT64ç½‘ç»œã€‘ï¼Œå‹¾é€‰å®ƒå°±OKå•¦ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-140c0ef7198e6bc7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h3 id="é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒNAT64æ˜¯å•¥ï¼Ÿ"><a href="#é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒNAT64æ˜¯å•¥ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒNAT64æ˜¯å•¥ï¼Ÿ"></a>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒNAT64æ˜¯å•¥ï¼Ÿ</h3><p>è¿™é‡Œæˆ‘æ‰¾äº†ä¸€å¼ å›¾</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-506743972838ede3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p> NAT64æ˜¯ä¸€ç§æœ‰çŠ¶æ€çš„ç½‘ç»œåœ°å€ä¸åè®®è½¬æ¢æŠ€æœ¯ï¼Œä¸€èˆ¬åªæ”¯æŒé€šè¿‡IPv6ç½‘ç»œä¾§ç”¨æˆ·å‘èµ·è¿æ¥è®¿é—®IPv4ä¾§ç½‘ç»œèµ„æºã€‚ä½†NAT64ä¹Ÿæ”¯æŒé€šè¿‡æ‰‹å·¥é…ç½®é™æ€æ˜ å°„å…³ç³»ï¼Œå®ç°IPv4ç½‘ç»œä¸»åŠ¨å‘èµ·è¿æ¥è®¿é—®IPv6ç½‘ç»œã€‚NAT64å¯å®ç°TCPã€UDPã€ICMPåè®®ä¸‹çš„IPv6ä¸IPv4ç½‘ç»œåœ°å€å’Œåè®®è½¬æ¢ã€‚<br> DNS64åˆ™ä¸»è¦æ˜¯é…åˆNAT64å·¥ä½œï¼Œä¸»è¦æ˜¯å°†DNSæŸ¥è¯¢ä¿¡æ¯ä¸­çš„Aè®°å½•ï¼ˆIPv4åœ°å€ï¼‰åˆæˆåˆ°AAAAè®°å½•ï¼ˆIPv6åœ°å€ï¼‰ä¸­ï¼Œè¿”å›åˆæˆçš„AAAAè®°å½•ç”¨æˆ·ç»™IPv6ä¾§ç”¨æˆ·ã€‚<br> NAT64ä¸€èˆ¬ä¸DNS64ååŒå·¥ä½œï¼Œè€Œä¸éœ€è¦åœ¨IPv6å®¢æˆ·ç«¯æˆ–IPv4æœåŠ¡å™¨ç«¯åšä»»ä½•ä¿®æ”¹ã€‚</p>
<p>ä¸€å¥è¯ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä¸­è½¬æœºæ„ã€‚<br>å½“ç„¶äº†ï¼Œipv6ç›®å‰å¯¹å¤§ä¼—ä½¿ç”¨æ²¡å•¥ç”¨æˆ·éœ€æ±‚ï¼Œä½†æ˜¯å¯¹äºè¡Œä¸šç›¸å…³æŠ€æœ¯äººå‘˜ï¼Œæœ‰éœ€è¦ä½¿ç”¨ipv6çš„ç¯å¢ƒåšä¸€äº›ç›¸å…³çš„æµ‹è¯•ã€‚</p>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒMacå…±äº«WiFiç½‘ç»œçš„æ–¹æ³•å…¶å®å¾ˆç®€å•ï¼Œä¸€å­¦å°±ä¼šï¼ŒæŒæ¡è¿™ä¸ªæŠ€å·§ï¼Œå¯ä»¥å¾ˆé«˜æ•ˆçš„è¿ç”¨åˆ°ä½ çš„å·¥ä½œæˆ–è€…ç”Ÿæ´»ä¸­ï¼Œå¿«å»è¯•è¯•å§ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/17/MethodsOfObjective-C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/MethodsOfObjective-C/" itemprop="url">OCå¸¸ç”¨æ–¹æ³•æ€»ç»“--ä¸å®šæœŸæ›´æ–°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-17T13:02:07+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-ç»Ÿä¸€æ”¶èµ·é”®ç›˜"><a href="#1-ç»Ÿä¸€æ”¶èµ·é”®ç›˜" class="headerlink" title="1.ç»Ÿä¸€æ”¶èµ·é”®ç›˜"></a>1.ç»Ÿä¸€æ”¶èµ·é”®ç›˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[[UIApplication sharedApplication] keyWindow] endEditing:YES];</span><br></pre></td></tr></table></figure>
<h3 id="2-æ•°ç»„å»é‡"><a href="#2-æ•°ç»„å»é‡" class="headerlink" title="2.æ•°ç»„å»é‡"></a>2.æ•°ç»„å»é‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSArray *newArr = [oldArr valueForKeyPath:@â€œ@distinctUnionOfObjects.self&quot;];</span><br><span class="line">@distinctUnionOfObjects.self  è¡¨ç¤ºæ¯”è¾ƒå¯¹è±¡</span><br><span class="line">@distinctUnionOfObjects.[key] è¡¨ç¤ºæ¯”è¾ƒå¯¹è±¡çš„ä»»æ„keyboarded</span><br></pre></td></tr></table></figure>
<h3 id="3-ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°"><a href="#3-ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°" class="headerlink" title="3.ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°"></a>3.ä¿®æ”¹textFieldçš„placeholderçš„å­—ä½“é¢œè‰²ã€å¤§å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[textField setValue:[UIColor redColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</span><br><span class="line">[textField setValue:[UIFont boldSystemFontOfSize:16] forKeyPath:@&quot;_placeholderLabel.font&quot;];</span><br></pre></td></tr></table></figure>
<h3 id="4-ç»™ä¸€ä¸ªviewæˆªå›¾"><a href="#4-ç»™ä¸€ä¸ªviewæˆªå›¾" class="headerlink" title="4.ç»™ä¸€ä¸ªviewæˆªå›¾"></a>4.ç»™ä¸€ä¸ªviewæˆªå›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UIGraphicsBeginImageContextWithOptions(view.bounds.size, YES, 0.0);</span><br><span class="line">[view.layer renderInContext:UIGraphicsGetCurrentContext()];</span><br><span class="line">UIImage *img = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">UIGraphicsEndImageContext();</span><br></pre></td></tr></table></figure>
<h3 id="5-UIViewèƒŒæ™¯é¢œè‰²æ¸å˜"><a href="#5-UIViewèƒŒæ™¯é¢œè‰²æ¸å˜" class="headerlink" title="5.UIViewèƒŒæ™¯é¢œè‰²æ¸å˜"></a>5.UIViewèƒŒæ™¯é¢œè‰²æ¸å˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];</span><br><span class="line">[self.view addSubview:view];</span><br><span class="line">CAGradientLayer *gradient = [CAGradientLayer layer];</span><br><span class="line">gradient.frame = view.bounds;</span><br><span class="line">gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil];</span><br><span class="line">[view.layer insertSublayer:gradient atIndex:0];</span><br></pre></td></tr></table></figure>
<h3 id="6-ä¸ºUIViewæŸä¸ªè§’æ·»åŠ åœ†è§’"><a href="#6-ä¸ºUIViewæŸä¸ªè§’æ·»åŠ åœ†è§’" class="headerlink" title="6.ä¸ºUIViewæŸä¸ªè§’æ·»åŠ åœ†è§’"></a>6.ä¸ºUIViewæŸä¸ªè§’æ·»åŠ åœ†è§’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// å·¦ä¸Šè§’å’Œå³ä¸‹è§’æ·»åŠ åœ†è§’</span><br><span class="line">UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:view.bounds byRoundingCorners:(UIRectCornerTopLeft | UIRectCornerBottomRight) cornerRadii:CGSizeMake(20, 20)];</span><br><span class="line">CAShapeLayer *maskLayer = [CAShapeLayer layer];</span><br><span class="line">maskLayer.frame = view.bounds;</span><br><span class="line">maskLayer.path = maskPath.CGPath;</span><br><span class="line">view.layer.mask = maskLayer;</span><br></pre></td></tr></table></figure>
<h3 id="7-æ‹¿åˆ°å½“å‰æ­£åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨"><a href="#7-æ‹¿åˆ°å½“å‰æ­£åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨" class="headerlink" title="7.æ‹¿åˆ°å½“å‰æ­£åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨"></a>7.æ‹¿åˆ°å½“å‰æ­£åœ¨æ˜¾ç¤ºçš„æ§åˆ¶å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (UIViewController *)getVisibleViewControllerFrom:(UIViewController*)vc &#123;</span><br><span class="line">    if ([vc isKindOfClass:[UINavigationController class]]) &#123;</span><br><span class="line">        return [self getVisibleViewControllerFrom:[((UINavigationController*) vc) visibleViewController]];</span><br><span class="line">    &#125;else if ([vc isKindOfClass:[UITabBarController class]])&#123;</span><br><span class="line">        return [self getVisibleViewControllerFrom:[((UITabBarController*) vc) selectedViewController]];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        if (vc.presentedViewController) &#123;</span><br><span class="line">            return [self getVisibleViewControllerFrom:vc.presentedViewController];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return vc;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-tableViewCellåˆ†å‰²çº¿é¡¶åˆ°å¤´"><a href="#8-tableViewCellåˆ†å‰²çº¿é¡¶åˆ°å¤´" class="headerlink" title="8.tableViewCellåˆ†å‰²çº¿é¡¶åˆ°å¤´"></a>8.tableViewCellåˆ†å‰²çº¿é¡¶åˆ°å¤´</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    [cell setSeparatorInset:UIEdgeInsetsZero];</span><br><span class="line">    [cell setLayoutMargins:UIEdgeInsetsZero];</span><br><span class="line">    cell.preservesSuperviewLayoutMargins = NO;</span><br><span class="line">&#125;</span><br><span class="line">- (void)viewDidLayoutSubviews &#123;</span><br><span class="line">    [self.tableView setSeparatorInset:UIEdgeInsetsZero];</span><br><span class="line">    [self.tableView setLayoutMargins:UIEdgeInsetsZero];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-imageæ·»åŠ å€’å½±æ•ˆæœ"><a href="#9-imageæ·»åŠ å€’å½±æ•ˆæœ" class="headerlink" title="9.imageæ·»åŠ å€’å½±æ•ˆæœ"></a>9.imageæ·»åŠ å€’å½±æ•ˆæœ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (void)setImageShadow &#123;</span><br><span class="line">    CGRect frame = self.frame;</span><br><span class="line">    frame.origin.y += (frame.size.height + 1);</span><br><span class="line"></span><br><span class="line">    UIImageView *reflectionImageView = [[UIImageView alloc] initWithFrame:frame];</span><br><span class="line">    self.clipsToBounds = TRUE;</span><br><span class="line">    reflectionImageView.contentMode = self.contentMode;</span><br><span class="line">    [reflectionImageView setImage:self.image];</span><br><span class="line">    reflectionImageView.transform = CGAffineTransformMakeScale(1.0, -1.0);</span><br><span class="line"></span><br><span class="line">    CALayer *reflectionLayer = [reflectionImageView layer];</span><br><span class="line">    CAGradientLayer *gradientLayer = [CAGradientLayer layer];</span><br><span class="line">    gradientLayer.bounds = reflectionLayer.bounds;</span><br><span class="line">    gradientLayer.position = CGPointMake(reflectionLayer.bounds.size.width / 2, reflectionLayer.bounds.size.height * 0.5);</span><br><span class="line">    gradientLayer.colors = [NSArray arrayWithObjects:</span><br><span class="line">                                                        (id)[[UIColor clearColor] CGColor],</span><br><span class="line">                                                        (id)[[UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.3] CGColor], nil];</span><br><span class="line">    gradientLayer.startPoint = CGPointMake(0.5,0.5);</span><br><span class="line">    gradientLayer.endPoint = CGPointMake(0.5,1.0);</span><br><span class="line">    reflectionLayer.mask = gradientLayer;</span><br><span class="line">    [self.superview addSubview:reflectionImageView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-æ·»åŠ å›¾ç‰‡æ°´å°"><a href="#10-æ·»åŠ å›¾ç‰‡æ°´å°" class="headerlink" title="10.æ·»åŠ å›¾ç‰‡æ°´å°"></a>10.æ·»åŠ å›¾ç‰‡æ°´å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// ç”»æ°´å°</span><br><span class="line">- (void) setImage:(UIImage *)image withWaterMark:(UIImage *)mark inRect:(CGRect)rect &#123;</span><br><span class="line">    if ([[[UIDevice currentDevice] systemVersion] floatValue] &gt;= 4.0)&#123;</span><br><span class="line">        UIGraphicsBeginImageContextWithOptions(self.frame.size, NO, 0.0);</span><br><span class="line">    &#125;</span><br><span class="line">    //åŸå›¾</span><br><span class="line">    [image drawInRect:self.bounds];</span><br><span class="line">    //æ°´å°å›¾</span><br><span class="line">    [mark drawInRect:rect];</span><br><span class="line">    UIImage *newPic = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line">    self.image = newPic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•"><a href="#11-åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•" class="headerlink" title="11.åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•"></a>11.åˆ é™¤NSUserDefaultsæ‰€æœ‰è®°å½•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹æ³•ä¸€</span><br><span class="line">NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier];</span><br><span class="line">[[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain];  </span><br><span class="line">//æ–¹æ³•äºŒ  </span><br><span class="line">- (void)resetDefaults &#123;   </span><br><span class="line">  NSUserDefaults * defs = [NSUserDefaults standardUserDefaults];</span><br><span class="line">     NSDictionary * dict = [defs dictionaryRepresentation];</span><br><span class="line">     for (id key in dict) &#123;</span><br><span class="line">          [defs removeObjectForKey:key];</span><br><span class="line">     &#125;</span><br><span class="line">      [defs synchronize];</span><br><span class="line"> &#125;</span><br><span class="line">// æ–¹æ³•ä¸‰</span><br><span class="line">[[NSUserDefaults standardUserDefaults] setPersistentDomain:[NSDictionary dictionary] forName:[[NSBundle mainBundle] bundleIdentifier]];</span><br></pre></td></tr></table></figure>
<h3 id="12-è·³è¿›appæƒé™è®¾ç½®"><a href="#12-è·³è¿›appæƒé™è®¾ç½®" class="headerlink" title="12.è·³è¿›appæƒé™è®¾ç½®"></a>12.è·³è¿›appæƒé™è®¾ç½®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (UIApplicationOpenSettingsURLString != NULL) &#123;</span><br><span class="line">    NSURL *url = [NSURL URLWithString:UIApplicationOpenSettingsURLString];</span><br><span class="line">    [[UIApplication sharedApplication] openURL:url];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-è·å–appç¼“å­˜å¤§å°"><a href="#13-è·å–appç¼“å­˜å¤§å°" class="headerlink" title="13.è·å–appç¼“å­˜å¤§å°"></a>13.è·å–appç¼“å­˜å¤§å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (CGFloat)getCachSize &#123;</span><br><span class="line"></span><br><span class="line">    NSUInteger imageCacheSize = [[SDImageCache sharedImageCache] getSize];</span><br><span class="line">    // è·å–è‡ªå®šä¹‰ç¼“å­˜å¤§å°</span><br><span class="line">    // ç”¨æšä¸¾å™¨éå† ä¸€ä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹</span><br><span class="line">    // 1.è·å– æ–‡ä»¶å¤¹æšä¸¾å™¨</span><br><span class="line">    NSString *myCachePath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;Library/Caches&quot;];</span><br><span class="line">    NSDirectoryEnumerator *enumerator = [[NSFileManager defaultManager] enumeratorAtPath:myCachePath];</span><br><span class="line">    __block NSUInteger count = 0;</span><br><span class="line">    // 2.éå†</span><br><span class="line">    for (NSString *fileName in enumerator) &#123;</span><br><span class="line">        NSString *path = [myCachePath stringByAppendingPathComponent:fileName];</span><br><span class="line">        NSDictionary *fileDict = [[NSFileManager defaultManager] attributesOfItemAtPath:path error:nil];</span><br><span class="line">        //è‡ªå®šä¹‰æ‰€æœ‰ç¼“å­˜å¤§å°</span><br><span class="line">        count += fileDict.fileSize;</span><br><span class="line">    &#125;</span><br><span class="line">    // å¾—åˆ°æ˜¯å­—èŠ‚  è½¬åŒ–ä¸ºM</span><br><span class="line">    CGFloat totalSize = ((CGFloat)imageCacheSize+count)/1024/1024;</span><br><span class="line">    return totalSize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="14-æ¸…ç†appç¼“å­˜"><a href="#14-æ¸…ç†appç¼“å­˜" class="headerlink" title="14.æ¸…ç†appç¼“å­˜"></a>14.æ¸…ç†appç¼“å­˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (void)cleanAppCache &#123;</span><br><span class="line">    // åˆ é™¤ä¸¤éƒ¨åˆ†</span><br><span class="line">    // 1.åˆ é™¤ sd å›¾ç‰‡ç¼“å­˜</span><br><span class="line">    // å…ˆæ¸…é™¤å†…å­˜ä¸­çš„å›¾ç‰‡ç¼“å­˜</span><br><span class="line">    [[SDImageCache sharedImageCache] clearMemory];</span><br><span class="line">    // æ¸…é™¤ç£ç›˜çš„ç¼“å­˜</span><br><span class="line">    [[SDImageCache sharedImageCache] clearDisk];</span><br><span class="line">    // 2.åˆ é™¤è‡ªå·±ç¼“å­˜</span><br><span class="line">    NSString *myCachePath = [NSHomeDirectory() stringByAppendingPathComponent:@&quot;Library/Caches&quot;];</span><br><span class="line">    [[NSFileManager defaultManager] removeItemAtPath:myCachePath error:nil];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="15-å‡ ä¸ªå¸¸ç”¨æƒé™åˆ¤æ–­"><a href="#15-å‡ ä¸ªå¸¸ç”¨æƒé™åˆ¤æ–­" class="headerlink" title="15.å‡ ä¸ªå¸¸ç”¨æƒé™åˆ¤æ–­"></a>15.å‡ ä¸ªå¸¸ç”¨æƒé™åˆ¤æ–­</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (void)checkAppAuthorization&#123;</span><br><span class="line">    if ([CLLocationManager authorizationStatus] ==kCLAuthorizationStatusDenied&#123;</span><br><span class="line">    </span><br><span class="line">        NSLog(@&quot;æ²¡æœ‰å®šä½æƒé™&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    AVAuthorizationStatus statusVideo = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeVideo];</span><br><span class="line">    if (statusVideo == AVAuthorizationStatusDenied) &#123;</span><br><span class="line">        NSLog(@&quot;æ²¡æœ‰æ‘„åƒå¤´æƒé™&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    AVAuthorizationStatus statusAudio = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeAudio];</span><br><span class="line">    if (statusAudio == AVAuthorizationStatusDenied) &#123;</span><br><span class="line">        NSLog(@&quot;æ²¡æœ‰å½•éŸ³æƒé™&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    [PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) &#123;</span><br><span class="line">        if (status == PHAuthorizationStatusDenied) &#123;</span><br><span class="line">            NSLog(@&quot;æ²¡æœ‰ç›¸å†Œæƒé™&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="16-æ–‡å­—ç”ŸæˆäºŒç»´ç "><a href="#16-æ–‡å­—ç”ŸæˆäºŒç»´ç " class="headerlink" title="16.æ–‡å­—ç”ŸæˆäºŒç»´ç "></a>16.æ–‡å­—ç”ŸæˆäºŒç»´ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> ç”ŸæˆäºŒç»´ç </span><br><span class="line"></span><br><span class="line"> @param codeString äºŒç»´ç å®¢ä¸²</span><br><span class="line"> @return äºŒç»´ç å›¾ç‰‡</span><br><span class="line"> */</span><br><span class="line">+ (UIImage *)qrCodeWithString:(NSString *)codeString&#123;</span><br><span class="line">    </span><br><span class="line">    // 1.åˆ›å»ºè¿‡æ»¤å™¨</span><br><span class="line">    CIFilter *filter = [CIFilter filterWithName:@&quot;CIQRCodeGenerator&quot;];</span><br><span class="line">    // 2.æ¢å¤é»˜è®¤</span><br><span class="line">    [filter setDefaults];</span><br><span class="line">    // 3.ç»™è¿‡æ»¤å™¨æ·»åŠ æ•°æ®(æ­£åˆ™è¡¨è¾¾å¼/è´¦å·å’Œå¯†ç )</span><br><span class="line">    NSString *dataString = codeString;</span><br><span class="line">    NSData *data = [dataString dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line">    [filter setValue:data forKeyPath:@&quot;inputMessage&quot;];</span><br><span class="line">    // 4.è·å–è¾“å‡ºçš„äºŒç»´ç </span><br><span class="line">    CIImage *outputImage = [filter outputImage];</span><br><span class="line">    // 5.å°†CIImageè½¬æ¢æˆUIImageï¼Œå¹¶æ”¾å¤§æ˜¾ç¤º</span><br><span class="line">    return [self createNonInterpolatedUIImageFormCIImage:outputImage withSize:400];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> æ ¹æ®CIImageç”ŸæˆæŒ‡å®šå¤§å°çš„UIImage</span><br><span class="line"> </span><br><span class="line"> @param image CIImage</span><br><span class="line"> @param size å›¾ç‰‡å®½åº¦</span><br><span class="line"> */</span><br><span class="line">+ (UIImage *)createNonInterpolatedUIImageFormCIImage:(CIImage *)image withSize:(CGFloat)size &#123;</span><br><span class="line">    </span><br><span class="line">    CGRect extent = CGRectIntegral(image.extent);</span><br><span class="line">    CGFloat scale = MIN(size/CGRectGetWidth(extent), size/CGRectGetHeight(extent));</span><br><span class="line">    // 1.åˆ›å»ºbitmap;</span><br><span class="line">    size_t width = CGRectGetWidth(extent) * scale;</span><br><span class="line">    size_t height = CGRectGetHeight(extent) * scale;</span><br><span class="line">    CGColorSpaceRef cs = CGColorSpaceCreateDeviceGray();</span><br><span class="line">    CGContextRef bitmapRef = CGBitmapContextCreate(nil, width, height, 8, 0, cs, (CGBitmapInfo)kCGImageAlphaNone);</span><br><span class="line">    CIContext *context = [CIContext contextWithOptions:nil];</span><br><span class="line">    CGImageRef bitmapImage = [context createCGImage:image fromRect:extent];</span><br><span class="line">    CGContextSetInterpolationQuality(bitmapRef, kCGInterpolationNone);</span><br><span class="line">    CGContextScaleCTM(bitmapRef, scale, scale);</span><br><span class="line">    CGContextDrawImage(bitmapRef, extent, bitmapImage);</span><br><span class="line">    // 2.ä¿å­˜bitmapåˆ°å›¾ç‰‡</span><br><span class="line">    CGImageRef scaledImage = CGBitmapContextCreateImage(bitmapRef);</span><br><span class="line">    CGContextRelease(bitmapRef);</span><br><span class="line">    CGImageRelease(bitmapImage);</span><br><span class="line">    return [UIImage imageWithCGImage:scaledImage];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="17-æ‰‹æœºå·ç éªŒè¯"><a href="#17-æ‰‹æœºå·ç éªŒè¯" class="headerlink" title="17.æ‰‹æœºå·ç éªŒè¯"></a>17.æ‰‹æœºå·ç éªŒè¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  æ‰‹æœºå·ç éªŒè¯</span><br><span class="line"> *</span><br><span class="line"> *  @param mobileNum æ‰‹æœºå·</span><br><span class="line"> *</span><br><span class="line"> *  @return æ˜¯å¦</span><br><span class="line"> */</span><br><span class="line">+ (BOOL)isMobileNumber:(NSString *)mobileNum &#123;</span><br><span class="line">    </span><br><span class="line">    if (mobileNum.length != 11)&#123;</span><br><span class="line">        return NO;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * æ‰‹æœºå·ç :</span><br><span class="line">     * 13[0-9], 14[5,7], 15[0, 1, 2, 3, 5, 6, 7, 8, 9], 17[0, 1, 6, 7, 8], 18[0-9]</span><br><span class="line">     * ç§»åŠ¨å·æ®µ: 134,135,136,137,138,139,147,150,151,152,157,158,159,170,178,182,183,184,187,188</span><br><span class="line">     * è”é€šå·æ®µ: 130,131,132,145,152,155,156,170,171,176,185,186</span><br><span class="line">     * ç”µä¿¡å·æ®µ: 133,134,153,170,173,177,180,181,189</span><br><span class="line">     */</span><br><span class="line">    NSString *MOBILE = @&quot;^1(3[0-9]|4[57]|5[0-35-9]|7[013678]|8[0-9])\\d&#123;8&#125;$&quot;;</span><br><span class="line">    /**</span><br><span class="line">     * ä¸­å›½ç§»åŠ¨ï¼šChina Mobile</span><br><span class="line">     * 134,135,136,137,138,139,147,150,151,152,157,158,159,170,178,182,183,184,187,188</span><br><span class="line">     */</span><br><span class="line">    NSString *CM = @&quot;^1(3[4-9]|4[7]|5[0-27-9]|7[08]|8[2-478])\\d&#123;8&#125;$&quot;;</span><br><span class="line">    /**</span><br><span class="line">     * ä¸­å›½è”é€šï¼šChina Unicom</span><br><span class="line">     * 130,131,132,145,152,155,156,170,171,176,185,186</span><br><span class="line">     */</span><br><span class="line">    NSString *CU = @&quot;^1(3[0-2]|4[5]|5[256]|7[016]|8[56])\\d&#123;8&#125;$&quot;;</span><br><span class="line">    /**</span><br><span class="line">     * ä¸­å›½ç”µä¿¡ï¼šChina Telecom</span><br><span class="line">     * 133,134,153,170,173,177,180,181,189</span><br><span class="line">     */</span><br><span class="line">    NSString *CT = @&quot;^1(3[34]|53|7[037]|8[019])\\d&#123;8&#125;$&quot;;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    NSPredicate *regextestmobile = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, MOBILE];</span><br><span class="line">    NSPredicate *regextestcm = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CM];</span><br><span class="line">    NSPredicate *regextestcu = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CU];</span><br><span class="line">    NSPredicate *regextestct = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, CT];</span><br><span class="line">    </span><br><span class="line">    if (([regextestmobile evaluateWithObject:mobileNum] == YES)</span><br><span class="line">        || ([regextestcm evaluateWithObject:mobileNum] == YES)</span><br><span class="line">        || ([regextestct evaluateWithObject:mobileNum] == YES)</span><br><span class="line">        || ([regextestcu evaluateWithObject:mobileNum] == YES))&#123;</span><br><span class="line">        </span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        return NO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="18-é‚®ç®±éªŒè¯"><a href="#18-é‚®ç®±éªŒè¯" class="headerlink" title="18.é‚®ç®±éªŒè¯"></a>18.é‚®ç®±éªŒè¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> é‚®ç®±éªŒè¯</span><br><span class="line"></span><br><span class="line"> @param email é‚®ç®±åœ°å€</span><br><span class="line"> @return æ˜¯å¦</span><br><span class="line"> */</span><br><span class="line">+ (BOOL)isValidateEmail:(NSString *)email &#123;</span><br><span class="line">    </span><br><span class="line">    NSString *emailRegex = @&quot;[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]&#123;2,4&#125;&quot;;</span><br><span class="line">    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, emailRegex];</span><br><span class="line">    return [emailTest evaluateWithObject:email];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="19-æ ¹æ®å¹´å’Œæœˆè¿”å›å½“æœˆå¤©æ•°"><a href="#19-æ ¹æ®å¹´å’Œæœˆè¿”å›å½“æœˆå¤©æ•°" class="headerlink" title="19.æ ¹æ®å¹´å’Œæœˆè¿”å›å½“æœˆå¤©æ•°"></a>19.æ ¹æ®å¹´å’Œæœˆè¿”å›å½“æœˆå¤©æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">+ (NSInteger)getDaysWithYear:(NSInteger)year</span><br><span class="line">                       month:(NSInteger)month&#123;</span><br><span class="line">                       </span><br><span class="line">    switch (month) &#123;</span><br><span class="line">        case 1:</span><br><span class="line">            return 31;</span><br><span class="line">            break;</span><br><span class="line">        case 2:</span><br><span class="line">            if (year%400==0 || (year%100!=0 &amp;&amp; year%4 == 0)) &#123;</span><br><span class="line">                return 29;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                return 28;</span><br><span class="line">            &#125;</span><br><span class="line">            break;</span><br><span class="line">        case 3:</span><br><span class="line">            return 31;</span><br><span class="line">            break;</span><br><span class="line">        case 4:</span><br><span class="line">            return 30;</span><br><span class="line">            break;</span><br><span class="line">        case 5:</span><br><span class="line">            return 31;</span><br><span class="line">            break;</span><br><span class="line">        case 6:</span><br><span class="line">            return 30;</span><br><span class="line">            break;</span><br><span class="line">        case 7:</span><br><span class="line">            return 31;</span><br><span class="line">            break;</span><br><span class="line">        case 8:</span><br><span class="line">            return 31;</span><br><span class="line">            break;</span><br><span class="line">        case 9:</span><br><span class="line">            return 30;</span><br><span class="line">            break;</span><br><span class="line">        case 10:</span><br><span class="line">            return 31;</span><br><span class="line">            break;</span><br><span class="line">        case 11:</span><br><span class="line">            return 30;</span><br><span class="line">            break;</span><br><span class="line">        case 12:</span><br><span class="line">            return 31;</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            return 0;</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="20-å‹ç¼©å›¾ç‰‡æˆäºŒè¿›åˆ¶æ•°æ®"><a href="#20-å‹ç¼©å›¾ç‰‡æˆäºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="20.å‹ç¼©å›¾ç‰‡æˆäºŒè¿›åˆ¶æ•°æ®"></a>20.å‹ç¼©å›¾ç‰‡æˆäºŒè¿›åˆ¶æ•°æ®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">+ (NSData *)compressImage:(UIImage *)image &#123;</span><br><span class="line">    </span><br><span class="line">    NSData *imageData = UIImageJPEGRepresentation(image, 1.0f);</span><br><span class="line">    if (imageData.length &lt;= 1000*1000) &#123;</span><br><span class="line">        </span><br><span class="line">        return imageData;</span><br><span class="line">    &#125; else if (imageData.length &gt; 1000*1000 &amp;&amp; imageData.length &lt; 3000 * 1000) &#123;</span><br><span class="line">        </span><br><span class="line">        imageData = UIImageJPEGRepresentation(image, 0.8f);</span><br><span class="line">        return imageData;</span><br><span class="line">    &#125; else if (imageData.length &gt; 3000*1000 &amp;&amp; imageData.length &lt; 5000 * 1000) &#123;</span><br><span class="line">        </span><br><span class="line">        imageData = UIImageJPEGRepresentation(image, 0.6f);</span><br><span class="line">        return imageData;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        </span><br><span class="line">        imageData = UIImageJPEGRepresentation(image, 0.4f);</span><br><span class="line">        return imageData;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="21-æ ¹æ®æ­£åˆ™ï¼Œè¿‡æ»¤ç‰¹æ®Šå­—ç¬¦"><a href="#21-æ ¹æ®æ­£åˆ™ï¼Œè¿‡æ»¤ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="21.æ ¹æ®æ­£åˆ™ï¼Œè¿‡æ»¤ç‰¹æ®Šå­—ç¬¦"></a>21.æ ¹æ®æ­£åˆ™ï¼Œè¿‡æ»¤ç‰¹æ®Šå­—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> æ ¹æ®æ­£åˆ™ï¼Œè¿‡æ»¤ç‰¹æ®Šå­—ç¬¦</span><br><span class="line"></span><br><span class="line"> @param regexString æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line"> @return è¿‡æ»¤åçš„å­—ç¬¦ä¸²</span><br><span class="line"> */</span><br><span class="line">- (NSString *)filterCharactorWithRegex:(NSString *)regexString &#123;</span><br><span class="line">    </span><br><span class="line">    NSString *searchText = self;</span><br><span class="line">    NSError *error = NULL;</span><br><span class="line">    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexString options:NSRegularExpressionCaseInsensitive error:&amp;error];</span><br><span class="line">    NSString *result = [regex stringByReplacingMatchesInString:searchText options:NSMatchingReportCompletion range:NSMakeRange(0, searchText.length) withTemplate:@&quot;&quot;];</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="22-èº«ä»½è¯å·ç éªŒè¯"><a href="#22-èº«ä»½è¯å·ç éªŒè¯" class="headerlink" title="22.èº«ä»½è¯å·ç éªŒè¯"></a>22.èº«ä»½è¯å·ç éªŒè¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> èº«ä»½è¯å·ç éªŒè¯</span><br><span class="line"> * éªŒè¯æ–¹æ³•ï¼š</span><br><span class="line"> * 1ã€å°†å‰é¢çš„èº«ä»½è¯å·ç 17ä½æ•°åˆ†åˆ«ä¹˜ä»¥ä¸åŒçš„ç³»æ•°ã€‚ä»ç¬¬ä¸€ä½åˆ°ç¬¬åä¸ƒä½çš„ç³»æ•°åˆ†åˆ«ä¸ºï¼š7ï¼9ï¼10ï¼5ï¼8ï¼4ï¼2ï¼1ï¼6ï¼3ï¼7ï¼9ï¼10ï¼5ï¼8ï¼4ï¼2</span><br><span class="line"> * 2ã€å°†è¿™17ä½æ•°å­—å’Œç³»æ•°ç›¸ä¹˜çš„ç»“æœç›¸åŠ </span><br><span class="line"> * 3ã€ç”¨åŠ å‡ºæ¥å’Œé™¤ä»¥11ï¼Œçœ‹ä½™æ•°æ˜¯å¤šå°‘ï¼Ÿ</span><br><span class="line"> * 4ã€ä½™æ•°åªå¯èƒ½æœ‰0ï¼1ï¼2ï¼3ï¼4ï¼5ï¼6ï¼7ï¼8ï¼9ï¼10è¿™11ä¸ªæ•°å­—ã€‚å…¶åˆ†åˆ«å¯¹åº”çš„æœ€åä¸€ä½èº«ä»½è¯çš„å·ç ä¸º1ï¼0ï¼X ï¼9ï¼8ï¼7ï¼6ï¼5ï¼4ï¼3ï¼2</span><br><span class="line"> * 5ã€é€šè¿‡ä¸Šé¢å¾—çŸ¥å¦‚æœä½™æ•°æ˜¯3ï¼Œå°±ä¼šåœ¨èº«ä»½è¯çš„ç¬¬18ä½æ•°å­—ä¸Šå‡ºç°çš„æ˜¯9ã€‚å¦‚æœå¯¹åº”çš„æ•°å­—æ˜¯10ï¼Œèº«ä»½è¯çš„æœ€åä¸€ä½å·ç å°±æ˜¯ç½—é©¬æ•°å­—x</span><br><span class="line"> @return æ˜¯/å¦</span><br><span class="line"> */</span><br><span class="line">- (BOOL)isIDCardNumber &#123;</span><br><span class="line">    </span><br><span class="line">    NSInteger sum = 0;</span><br><span class="line">    NSArray *numArr = @[@7, @9, @10, @5, @8, @4, @2, @1, @6, @3, @7, @9, @10, @5, @8, @4, @2]; // ç³»æ•°</span><br><span class="line">    NSArray *lastArr = @[@&quot;1&quot;, @&quot;0&quot;, @&quot;X&quot;, @&quot;9&quot;, @&quot;8&quot;,@&quot;7&quot;, @&quot;6&quot;, @&quot;5&quot;, @&quot;4&quot;, @&quot;3&quot;, @&quot;2&quot;]; // æœ€åä¸€ä½èº«ä»½è¯çš„å·ç </span><br><span class="line">    </span><br><span class="line">    if (self.length == 15) &#123;</span><br><span class="line">        NSString *lastCharactor =[self substringFromIndex:self.length -1];</span><br><span class="line">        if ([lastCharactor isEqualToString:@&quot;X&quot;] || [lastCharactor isEqualToString:@&quot;x&quot;]) &#123;</span><br><span class="line">            NSString * subStr14 = [self substringToIndex:self.length -1];</span><br><span class="line">            return [self isPureInt:subStr14];</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return [self isPureInt:self];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    if (self.length == 18) &#123;</span><br><span class="line">        //å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¤§å†™</span><br><span class="line">        NSString *newString =[self uppercaseString];</span><br><span class="line">        NSMutableArray *array = [NSMutableArray array];</span><br><span class="line">        for (int i = 0; i &lt; [self length]; i++) &#123;</span><br><span class="line">            [array addObject:[NSString stringWithFormat:@&quot;%C&quot;, [newString characterAtIndex:i]]];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        for (int i = 0; i &lt; self.length - 1; i++) &#123;</span><br><span class="line">            sum += [array[i] integerValue] * [numArr[i] integerValue];</span><br><span class="line">        &#125;</span><br><span class="line">        return [array[17] isEqualToString:lastArr[sum % 11]];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="23-åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯çº¯æ•°å­—"><a href="#23-åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯çº¯æ•°å­—" class="headerlink" title="23.åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯çº¯æ•°å­—"></a>23.åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯çº¯æ•°å­—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯çº¯æ•°å­—</span><br><span class="line"> </span><br><span class="line"> @param string å¸¦åˆ¤æ–­å­—ç¬¦ä¸²</span><br><span class="line"> @return æ˜¯/å¦</span><br><span class="line"> */</span><br><span class="line">- (BOOL)isPureInt:(NSString *)string &#123;</span><br><span class="line">    </span><br><span class="line">    NSScanner* scan = [NSScanner scannerWithString:string];</span><br><span class="line">    int val;</span><br><span class="line">    return [scan scanInt:&amp;val] &amp;&amp; [scan isAtEnd];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="24-è½¦ç‰Œæ ¡éªŒ"><a href="#24-è½¦ç‰Œæ ¡éªŒ" class="headerlink" title="24.è½¦ç‰Œæ ¡éªŒ"></a>24.è½¦ç‰Œæ ¡éªŒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> è½¦ç‰Œæ ¡éªŒ</span><br><span class="line"></span><br><span class="line"> @return æ˜¯/å¦</span><br><span class="line"> */</span><br><span class="line">- (BOOL)isCarLicenceNum&#123;</span><br><span class="line"></span><br><span class="line">    if (self.length == 7 || self.length == 8) &#123;</span><br><span class="line">        </span><br><span class="line">        NSString *carRegex = @&quot;^[äº¬æ´¥æ²ªæ¸å†€è±«äº‘è¾½é»‘æ¹˜çš–é²æ–°è‹æµ™èµ£é„‚æ¡‚ç”˜æ™‹è’™é™•å‰é—½è´µç²¤é’è—å·å®ç¼ä½¿é¢†A-Z]&#123;1&#125;[A-Z]&#123;1&#125;[A-Z0-9]&#123;4&#125;[A-Z0-9æŒ‚å­¦è­¦æ¸¯æ¾³]&#123;1&#125;$&quot;;</span><br><span class="line">        NSPredicate *carTest = [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;,carRegex];</span><br><span class="line">        return [carTest evaluateWithObject:self];</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return NO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="25-JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢æˆå­—å…¸"><a href="#25-JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢æˆå­—å…¸" class="headerlink" title="25.JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢æˆå­—å…¸"></a>25.JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢æˆå­—å…¸</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * @brief æŠŠæ ¼å¼åŒ–çš„JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢æˆå­—å…¸</span><br><span class="line"> * @param jsonString JSONæ ¼å¼çš„å­—ç¬¦ä¸²</span><br><span class="line"> * @return è¿”å›å­—å…¸</span><br><span class="line"> */</span><br><span class="line">+ (NSDictionary *)dictionaryWithJsonString:(NSString *)jsonString &#123;</span><br><span class="line">    </span><br><span class="line">    if (jsonString == nil) &#123;</span><br><span class="line">        </span><br><span class="line">        return nil;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line">    </span><br><span class="line">    NSError *err;</span><br><span class="line">    </span><br><span class="line">    NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:jsonData</span><br><span class="line">                                                        options:NSJSONReadingMutableContainers</span><br><span class="line">                                                          error:&amp;err];</span><br><span class="line">    </span><br><span class="line">    if(err) &#123;</span><br><span class="line">        </span><br><span class="line">        NSLog(@&quot;%@jsonè§£æå¤±è´¥ï¼š%@&quot;,jsonString,err);</span><br><span class="line">        return nil;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    return dic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="26-å­—å…¸è½¬jsonæ ¼å¼å­—ç¬¦ä¸²"><a href="#26-å­—å…¸è½¬jsonæ ¼å¼å­—ç¬¦ä¸²" class="headerlink" title="26.å­—å…¸è½¬jsonæ ¼å¼å­—ç¬¦ä¸²"></a>26.å­—å…¸è½¬jsonæ ¼å¼å­—ç¬¦ä¸²</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  å­—å…¸è½¬jsonæ ¼å¼å­—ç¬¦ä¸²ï¼š</span><br><span class="line"> *</span><br><span class="line"> *  @param NSString &lt;#NSString description#&gt;</span><br><span class="line"> *</span><br><span class="line"> *  @return &lt;#return value description#&gt;</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">- (NSString*)dictionaryToJson &#123;</span><br><span class="line">    </span><br><span class="line">    NSError *parseError = nil;</span><br><span class="line">    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:self options:NSJSONWritingPrettyPrinted error:&amp;parseError];</span><br><span class="line">    return [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="27-é€šè¿‡Valueå–Key"><a href="#27-é€šè¿‡Valueå–Key" class="headerlink" title="27.é€šè¿‡Valueå–Key"></a>27.é€šè¿‡Valueå–Key</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> é€šè¿‡Valueå–Key</span><br><span class="line"></span><br><span class="line"> @param value ValueString</span><br><span class="line"> @return KeyString</span><br><span class="line"> */</span><br><span class="line">- (NSString *)keyForValue:(NSString *)value &#123;</span><br><span class="line">    </span><br><span class="line">    __block NSString *keyStr = nil;</span><br><span class="line">    [self enumerateKeysAndObjectsUsingBlock:^(NSString * key, id  _Nonnull obj, BOOL * _Nonnull stop) &#123;</span><br><span class="line">        if ([value isEqualToString:obj]) &#123;</span><br><span class="line">            keyStr = key;</span><br><span class="line">            *stop = YES;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    return keyStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="28-åŠ è½½æœ¬åœ°jsonæ–‡ä»¶"><a href="#28-åŠ è½½æœ¬åœ°jsonæ–‡ä»¶" class="headerlink" title="28.åŠ è½½æœ¬åœ°jsonæ–‡ä»¶"></a>28.åŠ è½½æœ¬åœ°jsonæ–‡ä»¶</h3><p>å°†æœ¬åœ°jsonæ–‡ä»¶ï¼Œå¯¼å…¥å·¥ç¨‹ï¼Œç¡®å®štarget membershipå‹¾é€‰ä¸Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (void)loadJson&#123;</span><br><span class="line"></span><br><span class="line">    NSError*error;</span><br><span class="line">    //è·å–æ–‡ä»¶è·¯å¾„</span><br><span class="line">    NSString *filePath          =[[NSBundle mainBundle] pathForResource:@&quot;test&quot; ofType:@&quot;json&quot;];</span><br><span class="line">    //æ ¹æ®æ–‡ä»¶è·¯å¾„è¯»å–æ•°æ®</span><br><span class="line">    NSData *jdata               = [[NSData alloc]initWithContentsOfFile:filePath];</span><br><span class="line">    //æ ¼å¼åŒ–æˆjsonæ•°æ®</span><br><span class="line">    NSDictionary *jsonObject    = [NSJSONSerialization JSONObjectWithData:jdata options:kNilOptions error:&amp;error];</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="29-è·å–appä¸­æ‰€æœ‰iconåå­—æ•°ç»„"><a href="#29-è·å–appä¸­æ‰€æœ‰iconåå­—æ•°ç»„" class="headerlink" title="29.è·å–appä¸­æ‰€æœ‰iconåå­—æ•°ç»„"></a>29.è·å–appä¸­æ‰€æœ‰iconåå­—æ•°ç»„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//è·å–appä¸­æ‰€æœ‰iconåå­—æ•°ç»„</span><br><span class="line">   NSDictionary *infoDict  = [[NSBundle mainBundle] infoDictionary];</span><br><span class="line">   NSArray *iconsArr       = infoDict[@&quot;CFBundleIcons&quot;][@&quot;CFBundlePrimaryIcon&quot;][@&quot;CFBundleIconFiles&quot;];</span><br><span class="line">   NSString *iconLastName  = [iconsArr lastObject];</span><br></pre></td></tr></table></figure>
<h3 id="30-è®¡ç®—ä¸¤ä¸ªæ—¶é—´"><a href="#30-è®¡ç®—ä¸¤ä¸ªæ—¶é—´" class="headerlink" title="30.è®¡ç®—ä¸¤ä¸ªæ—¶é—´"></a>30.è®¡ç®—ä¸¤ä¸ªæ—¶é—´</h3><p>è®¡ç®—ä¸¤ä¸ªæ—¶é—´å­—ç¬¦ä¸²çš„æ—¶é—´å·® </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> è®¡ç®—æ—¶é•¿</span><br><span class="line"> */</span><br><span class="line">- (NSString *)caculateDurationWithStartTime:(NSString *)startTime andEndTime:(NSString *)endTime&#123;</span><br><span class="line">    if (endTime == nil) &#123;</span><br><span class="line">        return @&quot;æœªçŸ¥&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    NSDate *startDate 			= [NSDate date];</span><br><span class="line">    NSDate *endDate 			= [NSDate date];</span><br><span class="line">    </span><br><span class="line">    NSDateFormatter *format 	= [[NSDateFormatter alloc]init];</span><br><span class="line">    format.dateFormat 			= @&quot;YYYY-MM-dd HH:mm:ss&quot;;</span><br><span class="line">    format.timeZone				= [NSTimeZone systemTimeZone];</span><br><span class="line">    startDate 					= [format dateFromString:startTime];</span><br><span class="line">    endDate 						= [format dateFromString:endTime];</span><br><span class="line">    NSTimeInterval duration 	= endDate.timeIntervalSince1970 - startDate.timeIntervalSince1970;</span><br><span class="line">    int hour 						= (int)duration / 3600;</span><br><span class="line">    int min 						= (int)duration % 3600 / 60;</span><br><span class="line">    int sec 						= (int)duration % 60;</span><br><span class="line">    </span><br><span class="line">    return [NSString stringWithFormat:@&quot;%då°æ—¶%dåˆ†%dç§’&quot;,hour,min,sec];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="31-è®¡ç®—ä¸¤ä¸ªNSDateç»å†äº†å¤šå°‘å¤©"><a href="#31-è®¡ç®—ä¸¤ä¸ªNSDateç»å†äº†å¤šå°‘å¤©" class="headerlink" title="31.è®¡ç®—ä¸¤ä¸ªNSDateç»å†äº†å¤šå°‘å¤©"></a>31.è®¡ç®—ä¸¤ä¸ªNSDateç»å†äº†å¤šå°‘å¤©</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  è¿”å›ä¸¤ä¸ªNSDateç»å†äº†å¤šå°‘å¤©</span><br><span class="line"> */</span><br><span class="line">- (NSInteger)getDaysFrom:(NSDate *)startDate To:(NSDate *)endDate&#123;</span><br><span class="line">    </span><br><span class="line">    NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSCalendarIdentifierGregorian];</span><br><span class="line">    </span><br><span class="line">    [gregorian setFirstWeekday:2];</span><br><span class="line">    </span><br><span class="line">    //å»æ‰æ—¶åˆ†ç§’ä¿¡æ¯</span><br><span class="line">    NSDate *fromDate;</span><br><span class="line">    NSDate *toDate;</span><br><span class="line">    [gregorian rangeOfUnit:NSCalendarUnitDay startDate:&amp;fromDate interval:NULL forDate:startDate];</span><br><span class="line">    [gregorian rangeOfUnit:NSCalendarUnitDay startDate:&amp;toDate interval:NULL forDate:endDate];</span><br><span class="line">    NSDateComponents *dayComponents = [gregorian components:NSCalendarUnitDay fromDate:fromDate toDate:toDate options:0];</span><br><span class="line">    </span><br><span class="line">    return dayComponents.day;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="32-ä¸»åŠ¨ç”³è¯·å¸¸ç”¨æƒé™"><a href="#32-ä¸»åŠ¨ç”³è¯·å¸¸ç”¨æƒé™" class="headerlink" title="32.ä¸»åŠ¨ç”³è¯·å¸¸ç”¨æƒé™"></a>32.ä¸»åŠ¨ç”³è¯·å¸¸ç”¨æƒé™</h3><p>è®°å¾—åœ¨info.plisté‡Œé¢åŠ å…¥å¯¹åº”æƒé™çš„æè¿°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">///ç”³è¯·éº¦å…‹é£æƒé™</span><br><span class="line">[AVCaptureDevice requestAccessForMediaType:AVMediaTypeVideo completionHandler:^(BOOL granted) &#123;</span><br><span class="line">&#125;];</span><br><span class="line">///ç”³è¯·æ‹ç…§æƒé™</span><br><span class="line">[AVCaptureDevice requestAccessForMediaType:AVMediaTypeAudio completionHandler:^(BOOL granted) &#123;</span><br><span class="line">&#125;];</span><br><span class="line">///ç”³è¯·ç›¸å†Œæƒé™</span><br><span class="line">[PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) &#123;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/17/iPhoneXNetworkTypeIssue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/iPhoneXNetworkTypeIssue/" itemprop="url">iPhone Xè·å–è®¾å¤‡ç½‘ç»œç±»å‹é”™è¯¯åˆ†æ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-17T12:53:13+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p> åœ¨å…¬å¸é¡¹ç›®å¼€å‘ä¸­ï¼Œéœ€è¦åœ¨ç½‘ç»œè¯·æ±‚ä¸­åŒ…å«å½“å‰è®¾å¤‡çš„ç½‘ç»œçŠ¶æ€å‚æ•°ï¼Œå‘è¯·æ±‚çš„æ—¶å€™æ‰‹æœºç½‘ç»œçš„ç±»å‹æœ‰2G,3G,4G,WIFIç­‰ç­‰ï¼Œè·å–å‚æ•°çš„æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">è·å–ç½‘ç»œçŠ¶æ€</span><br><span class="line">- (NSString *)getNetStatus &#123;</span><br><span class="line">    </span><br><span class="line">    NSArray *children = [[[[UIApplication sharedApplication] valueForKeyPath:@&quot;statusBar&quot;] valueForKeyPath:@&quot;foregroundView&quot;] subviews];</span><br><span class="line">    NSString *state = nil;</span><br><span class="line">    int netType = 0;</span><br><span class="line">    for (id child in children) &#123;</span><br><span class="line">        </span><br><span class="line">        if ([child isKindOfClass:NSClassFromString(@&quot;UIStatusBarDataNetworkItemView&quot;)]) &#123;</span><br><span class="line">            netType = [[child valueForKeyPath:@&quot;dataNetworkType&quot;] intValue];</span><br><span class="line">            </span><br><span class="line">            switch (netType) &#123;</span><br><span class="line">                    case 0:</span><br><span class="line">                    state = @&quot;æ— ç½‘ç»œ&quot;;</span><br><span class="line">                    break;</span><br><span class="line">                    case 1:</span><br><span class="line">                    state =  @&quot;2G&quot;;</span><br><span class="line">                    break;</span><br><span class="line">                    case 2:</span><br><span class="line">                    state =  @&quot;3G&quot;;</span><br><span class="line">                    break;</span><br><span class="line">                    case 3:</span><br><span class="line">                    state =   @&quot;4G&quot;;</span><br><span class="line">                    break;</span><br><span class="line">                    case 5:</span><br><span class="line">                    state =  @&quot;WIFI&quot;;</span><br><span class="line">                    break;</span><br><span class="line">                default:</span><br><span class="line">                    state =  @&quot;æœªçŸ¥ç½‘ç»œ&quot;;</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return state;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä»ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒåŸºæœ¬åŸç†æ˜¯è¯»å–æ‰‹æœºçš„çŠ¶æ€æ ï¼Œç„¶åéå†çŠ¶æ€æ çš„å­æ§ä»¶ï¼ŒæŸ¥çœ‹çœ‹ä¸€ä¸‹è‹¹æœç§æœ‰å±æ€§<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## iPhone Xé”™è¯¯&amp;åŸå› åˆ†æ</span><br><span class="line">å½“é¡¹ç›®ä»£ç é€‰æ‹©iPhone Xæ¨¡æ‹Ÿå™¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šå¥”æºƒåœ¨ä¸Šé¢çš„å‡½æ•°ã€‚</span><br><span class="line">ç”±äºiPhone Xç‹¬ç‰¹çš„å…¨é¢å±+åˆ˜æµ·çš„è®¾è®¡(æˆ‘è§‰å¾—å¾ˆä¸‘)ï¼Œæ‰‹æœºé¡¶éƒ¨çš„çŠ¶æ€æ å®Œå…¨æ˜¯å…¨æ–°çš„è®¾è®¡ï¼Œå¦‚ä¸‹é¢å¯¹æ¯”æˆªå›¾ï¼š</span><br><span class="line"></span><br><span class="line">![ä¸€èˆ¬iPhoneçš„çŠ¶æ€æ .png](http://upload-images.jianshu.io/upload_images/1447375-9da96bd0c3d97433.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![iPhone Xçš„çŠ¶æ€æ ](http://upload-images.jianshu.io/upload_images/1447375-d2b0ceb80288b953.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line"></span><br><span class="line">äºæ˜¯ï¼Œæƒ³è‡ªå·±æ¥hackä¸€ä¸‹è¿™ä¸ªiPhone Xçš„çŠ¶æ€æ </span><br></pre></td></tr></table></figure></p>
<p>//obj å³ä¸ºè¢«éå†å¯¹è±¡<br>unsigned int outCount = 0;<br>Ivar *ivars = class_copyIvarList([obj class], &amp;outCount);<br>for (int i = 0; i &lt; outCount; i++) {<br>     Ivar ivar = ivars[i];<br>     printf(â€œ======== |%s\nâ€, ivar_getName(ivar));<br>}</p>
<p>ä¹‹åè·å–åˆ°ä»¥ä¸‹Pathï¼Œå‘ç°ç±»ä¼¼dataNetworkType<br>çš„_networkTypeView</p>
<p>NSArray *items = [[[[UIApplication sharedApplication] valueForKeyPath:@â€statusBarâ€] valueForKeyPath:@â€statusBarâ€] items];id obj = [[items valueForKeyPath:@â€_UIStatusBarCellularExpandedItemâ€] valueForKeyPath:@â€_networkTypeViewâ€];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![image.png](http://upload-images.jianshu.io/upload_images/1447375-bd3e0ecbcd9b86a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line"></span><br><span class="line">ä½†çºµè§ˆæ•´ä¸ªå±æ€§åˆ—è¡¨ï¼Œæ²¡æœ‰å‘ç°å¯ç”¨çš„NetworkTypeï¼Œåªèƒ½å¼ƒç”¨ã€‚æ²¡åŠæ³•ï¼Œè°è®©è‹¹æœçˆ¸çˆ¸ç”¨è¿™æ ·çš„ç‰¹(sha)ç«‹(bi)ç‹¬(nao)è¡Œ(can)çš„è®¾è®¡ï¼Œæ‰€ä»¥è¦å¦è¾Ÿè¹Šå¾„ã€‚</span><br><span class="line"></span><br><span class="line">## è§£å†³æ–¹æ³•</span><br><span class="line"></span><br><span class="line">é€šè¿‡ç¿»é˜…æ–‡æ¡£å‘ç°å¯ä»¥é€šè¿‡CTTelephonyNetworkInfoè·å–ç½‘ç»œè¿è¥å•†ç›¸å…³ä¿¡æ¯ï¼Œè¿™ä¸å°±æ˜¯3Gï¼Œ4GæŠ€æœ¯åç§°å˜›ï¼ï¼ï¼</span><br></pre></td></tr></table></figure>
<p>å¯¼å…¥ #import <coretelephony cttelephonynetworkinfo.h=""><br>ç‚¹è¿›å»æŸ¥çœ‹ï¼š<br>CORETELEPHONY_EXTERN NSString <em> const CTRadioAccessTechnologyGPRS          <strong>OSX_AVAILABLE_STARTING(</strong>MAC_NA,__IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString </em> const CTRadioAccessTechnologyEdge          <strong>OSX_AVAILABLE_STARTING(</strong>MAC_NA,<strong>IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString * const CTRadioAccessTechnologyWCDMA         </strong>OSX_AVAILABLE_STARTING(<strong>MAC_NA,</strong>IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString <em> const CTRadioAccessTechnologyHSDPA         <strong>OSX_AVAILABLE_STARTING(</strong>MAC_NA,__IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString </em> const CTRadioAccessTechnologyHSUPA         <strong>OSX_AVAILABLE_STARTING(</strong>MAC_NA,<strong>IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString * const CTRadioAccessTechnologyCDMA1x        </strong>OSX_AVAILABLE_STARTING(<strong>MAC_NA,</strong>IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString <em> const CTRadioAccessTechnologyCDMAEVDORev0  <strong>OSX_AVAILABLE_STARTING(</strong>MAC_NA,__IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString </em> const CTRadioAccessTechnologyCDMAEVDORevA  <strong>OSX_AVAILABLE_STARTING(</strong>MAC_NA,<strong>IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString * const CTRadioAccessTechnologyCDMAEVDORevB  </strong>OSX_AVAILABLE_STARTING(<strong>MAC_NA,</strong>IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString <em> const CTRadioAccessTechnologyeHRPD         <strong>OSX_AVAILABLE_STARTING(</strong>MAC_NA,__IPHONE_7_0);<br>CORETELEPHONY_EXTERN NSString </em> const CTRadioAccessTechnologyLTE           <strong>OSX_AVAILABLE_STARTING(</strong>MAC_NA,__IPHONE_7_0);</coretelephony></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¹‹åå†æ¬¡å‘ç°è‹¹æœçš„ä¸€ä¸ªå¼€æºç±»[Reachability](https://developer.apple.com/library/content/samplecode/Reachability/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007324)ä¸­å·²å¯¹æ­¤åšäº†ç›¸åº”å°è£…ï¼Œæ‹¿æ¥å³ç”¨ã€‚</span><br></pre></td></tr></table></figure>
<p>typedef enum : NSInteger {<br>    NotReachable = 0,<br>    ReachableViaWiFi,<br>    kReachableVia2G,<br>    kReachableVia3G,<br>    kReachableVia4G<br>} NetworkStatus;</p>
<p>PS:æœ€æ–°ç‰ˆReachabilityå·²ç®€åŒ–æšä¸¾<br>typedef enum : NSInteger {<br>    NotReachable = 0,<br>    ReachableViaWiFi,<br>    ReachableViaWWAN<br>} NetworkStatus;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç»è¿‡æ”¹å†™åçš„æ–¹æ³•å¦‚ä¸‹</span><br></pre></td></tr></table></figure>
<ul>
<li><p>(int)getNetStatus {</p>
<p>  NSString *stateString = nil;<br>  int netStatusNumber = 0;<br>  switch ([[Reachability reachabilityForInternetConnection] currentReachabilityStatus]) {</p>
<pre><code>case NotReachable: {

    stateString = @&quot;æ— ç½‘ç»œ&quot;;
    netStatusNumber = 0;
}
    break;
case kReachableVia2G: {

    stateString = @&quot;2G&quot;;
    netStatusNumber = 2;
}
    break;
case kReachableVia3G: {

    stateString = @&quot;3G&quot;;
    netStatusNumber = 3;
}
    break;
case kReachableVia4G: {

    stateString = @&quot;4G&quot;;
    netStatusNumber = 4;
}
    break;
case ReachableViaWiFi: {

    stateString = @&quot;WIFI&quot;;
    netStatusNumber = 1;
}
    break;
default: {

    stateString = @&quot;ä¸å¯è¯†åˆ«çš„ç½‘ç»œ&quot;;
    netStatusNumber = -1;
}
    break;
</code></pre><p>  }<br>  return netStatusNumber;<br>}<br>```<br>è¿™æ ·å¤„ç†å®Œä¹‹åï¼Œä¸ç®¡æ˜¯ä¸æ˜¯iPhone Xéƒ½å¯ä»¥è·å–åˆ°æ­£ç¡®çš„è®¾å¤‡ç½‘ç»œç±»å‹äº†ï¼Œç›¸æ¯”ä¹‹å‰é€šè¿‡çŠ¶æ€æ æ¥åˆ¤æ–­ï¼Œåˆ©ç”¨è‹¹æœè‡ªå·±çš„ç±»æ›´åŠ çš„å‡†ç¡®ã€‚</p>
<h1 id="å°½ç®¡è¿™æ¬¾åˆ˜æµ·iPhone-Xåœ¨æ­¤åˆ»å°šæœªå‘å”®ï¼Œèƒ½æ—©ç‚¹å¡«ä¸€ä¸ªå‘å°±æ—©ç‚¹å¡«ã€‚"><a href="#å°½ç®¡è¿™æ¬¾åˆ˜æµ·iPhone-Xåœ¨æ­¤åˆ»å°šæœªå‘å”®ï¼Œèƒ½æ—©ç‚¹å¡«ä¸€ä¸ªå‘å°±æ—©ç‚¹å¡«ã€‚" class="headerlink" title="å°½ç®¡è¿™æ¬¾åˆ˜æµ·iPhone Xåœ¨æ­¤åˆ»å°šæœªå‘å”®ï¼Œèƒ½æ—©ç‚¹å¡«ä¸€ä¸ªå‘å°±æ—©ç‚¹å¡«ã€‚"></a>å°½ç®¡è¿™æ¬¾åˆ˜æµ·iPhone Xåœ¨æ­¤åˆ»å°šæœªå‘å”®ï¼Œèƒ½æ—©ç‚¹å¡«ä¸€ä¸ªå‘å°±æ—©ç‚¹å¡«ã€‚</h1></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/17/UseShellModifyXcodeBuildNumber/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/UseShellModifyXcodeBuildNumber/" itemprop="url">ä½¿ç”¨shellè„šæœ¬è‡ªåŠ¨ä¿®æ”¹Xcodeå·¥ç¨‹ç¼–è¯‘ç‰ˆæœ¬å·</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-17T12:40:45+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å…¬å¸çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œè‚¯å®šæ˜¯éœ€è¦æ‰“åŒ…çš„ï¼Œç›®å‰å·²ç»å»ºç«‹èµ·äº†ä¸€å¥—<a href="https://about.gitlab.com/" target="_blank" rel="noopener">gitlab</a>+<a href="https://fastlane.tools/" target="_blank" rel="noopener">fastlane</a>çš„æŒç»­é›†æˆæ–¹æ¡ˆã€‚ä½†æ˜¯åœ¨é¡¹ç›®å¼€å‘å‘¨æœŸçš„æµ‹è¯•é˜¶æ®µä»¥åŠä¸Šçº¿ä¹‹å‰ï¼Œé¡¹ç›®æ‰“åŒ…çš„é¢‘æ¬¡ä¼šå‡é«˜ä¸å°‘ã€‚æ‰€ä»¥åœ¨ä¸€ä¸ªå›¢é˜Ÿå¼€å‘ä¸­ï¼Œå°¤å…¶æ˜¯æµ‹è¯•äººå‘˜å¦‚ä½•åŒºåˆ†å“ªæ¬¡çš„æ‰“åŒ…ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„é—®é¢˜ã€‚</p>
<p>è¦åŒºåˆ†ä¸åŒçš„åŒ…ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡buildå·æ¥åŒºåˆ†ã€‚Xcodeå·¥ç¨‹çš„buildå·å¯ä»¥éšä¾¿å¡«çš„ï¼Œä½†æ˜¯å¦‚æœæ¯æ¬¡æ‰“åŒ…éƒ½è¦æ‰‹åŠ¨å¡«å†™è‚¯å®šä¹Ÿæ˜¯ä¸€ä¸ªéº»çƒ¦çš„äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è§£å†³æ€è·¯è‚¯å®šæ˜¯<strong>è®©å·¥ç¨‹è‡ªåŠ¨å˜æ›´buildå·</strong>ã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>Â·æ–¹æ³•1<br>è®©fastlaneæ¯æ¬¡æ‰“åŒ…å‰ï¼ŒæŠŠbuildå·å¤„ç†ã€‚å…·ä½“è¯¦æƒ…è¯·æˆ³æœ¬äººä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« <br><a href="http://www.jianshu.com/p/7b3f9cacc2ba">Fastlaneè‡ªåŠ¨æ‰“åŒ…å·¥å…·buildå·è‡ªå¢å¤„ç†é…ç½®æ–¹æ³•</a></p>
<p>Â·æ–¹æ³•2<br>é€šè¿‡ç»™Xcodeæ·»åŠ shellè„šæœ¬å®ç°buildå·å¤„ç†ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š<br>1.åœ¨å·¥ç¨‹targetä¸­ï¼Œé€‰æ‹©Build Phasesç‚¹å‡»å·¦ä¸Šè§’åŠ å·ï¼Œæ–°å»ºscriptè„šæœ¬<br><img src="http://upload-images.jianshu.io/upload_images/1447375-1eb4e82f3885ec87.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>2.åœ¨ä»£ç åŒºåŠ å…¥ä»¥ä¸‹è„šæœ¬ï¼Œè®©buildå·ä¸ºç¼–è¯‘çš„æ—¶é—´ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Update build number with buldTime</span><br><span class="line">buildNumber=$(date +%Y%m%d%H%M%S)</span><br><span class="line">echo &quot;Updating build number to $buildNumber&quot;</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$&#123;TARGET_BUILD_DIR&#125;/$&#123;INFOPLIST_PATH&#125;&quot;</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$&#123;BUILT_PRODUCTS_DIR&#125;/$&#123;WRAPPER_NAME&#125;.dSYM/Contents/Info.plist&quot;</span><br></pre></td></tr></table></figure>
<p>3.æŠŠ<code>Run script only when installing</code>å‹¾é€‰ä¸Šï¼Œä¸ç„¶debugä¼šæŠ¥é”™ã€‚<br><img src="http://upload-images.jianshu.io/upload_images/1447375-a96c351bb65039f2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>åŠ å…¥è¿™æ®µè„šæœ¬ä¹‹åï¼Œå°±å¯ä»¥å®ç°buildå·è‡ªåŠ¨å¤„ç†ï¼Œæ˜¯ä¸æ˜¯<strong>So Easy</strong>?</p>
<h2 id="æ–¹æ³•å¯¹æ¯”"><a href="#æ–¹æ³•å¯¹æ¯”" class="headerlink" title="æ–¹æ³•å¯¹æ¯”"></a>æ–¹æ³•å¯¹æ¯”</h2><p>ä¸¤ç§æ–¹æ³•éƒ½èƒ½å®ç°å¯¹å·¥ç¨‹buildå·çš„ä¿®æ”¹ï¼Œç©¶å…¶æœ¬è´¨æ˜¯ä¿®æ”¹äº†é¡¹ç›®çš„info.plistã€‚ä¸åŒä¹‹å¤„åœ¨äºæ–¹æ³•1æ˜¯ç”¨fastlaneæ‰“åŒ…å·¥å…·ä¸­çš„<a href="https://docs.fastlane.tools/actions/increment_build_number/#increment_build_number" target="_blank" rel="noopener">increment_build_number</a>æ–¹æ³•æ¥ä¿®æ”¹ï¼Œè€Œæ–¹æ³•2æ˜¯ç›´æ¥åœ¨Xcodeå·¥ç¨‹é‡Œé¢åŠ å…¥äº†ä¸€æ®µshellè„šæœ¬ï¼Œæ‰€ä»¥ä¸éœ€è¦å€ŸåŠ©ä»»ä½•å·¥å…·ï¼Œå¾ˆç®€å•å¿«æ·ã€‚</p>
<p>ä¸ªäººæ¨èæ–¹æ³•2æ¥å®ç°buildè‡ªåŠ¨å¤„ç†ï¼Œå› ä¸ºä¸éœ€è¦ç¬¬ä¸‰æ–¹çš„ä¾èµ–ã€‚æ–‡ä¸­å¦‚æœ‰ä¸è¶³ä¹‹å¤„è¿˜æœ›æ‰¹è¯„æŒ‡æ­£~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/15/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/15/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-15T18:00:58+08:00">
                2018-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="æŠ¢æ‰‹çš„å“¥" />
            
              <p class="site-author-name" itemprop="name">æŠ¢æ‰‹çš„å“¥</p>
              <p class="site-description motion-element" itemprop="description">æ¬¢è¿æ¥åˆ°æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/coderhrxu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:xuhaoran416518@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.jianshu.com/u/6aea1100cc05" title="jianshu" target="_blank">jianshu</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æŠ¢æ‰‹çš„å“¥</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
