<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="æ¬¢è¿æ¥åˆ°æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta property="og:type" content="website">
<meta property="og:title" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta property="og:url" content="https://www.jianshu.com/u/6aea1100cc05/index.html">
<meta property="og:site_name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta property="og:description" content="æ¬¢è¿æ¥åˆ°æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
<meta name="twitter:description" content="æ¬¢è¿æ¥åˆ°æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.jianshu.com/u/6aea1100cc05/"/>





  <title>æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ä¸ä¼šæ•²ä»£ç çš„è€å¸æœºä¸æ˜¯å¥½å¨å­</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/09/20/Xcode10-NewBuilSystemIssue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/20/Xcode10-NewBuilSystemIssue/" itemprop="url">è¸©å‘Xcode 10ä¹‹New Build System</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-09-20T16:44:44+08:00">
                2018-09-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Xcode10 Version 10.0 (10A255)å‘å¸ƒï¼Œç¬”è€…ç¬¬ä¸€æ—¶é—´å‡çº§ã€‚å¾ˆæ˜¾ç„¶ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸å°‘é—®é¢˜ï¼Œç›¸ä¿¡å¤§å®¶éƒ½æœ‰æ‰€è€³é—»ï¼Œæœ€å…¸å‹çš„å°±æ˜¯<a href="http://www.cnblogs.com/chao8888/p/9674314.html" target="_blank" rel="noopener">libstdc++.6.0.9é—®é¢˜</a>ï¼Œç½‘ä¸Šå·²ç»æœ‰ä¸å°‘æ–¹æ³•äº†ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚</p>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>é™¤äº†è¿™ä¸ªé—®é¢˜ä¹‹å¤–ï¼Œç¬”è€…è¿˜é‡åˆ°äº†build systemçš„é—®é¢˜ã€‚åœ¨Xcodeèœå•æ é€‰æ‹©Fileâ€“ Workspace Settingå°±ä¼šå‡ºç°å¦‚ä¸‹çš„ç•Œé¢</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1447375-50b354ddfb81afbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="build system.png"></p>
<p>å¯ä»¥çœ‹å‡ºXcode10æ˜¯é»˜è®¤é€‰ä¸­çš„æœ€æ–°çš„New Build System(Default)ï¼Œåœ¨è¿™ä¸ªç¼–è¯‘ç³»ç»Ÿçš„ç¯å¢ƒä¸‹ï¼Œæˆ‘æ‰“åŒ…çš„CIè„šæœ¬ä¸€ç›´ä¼šæŠ¥é”™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/bin/sh -c /Users/apple/Library/Developer/Xcode/DerivedData/XXX-bcebrkpahigmkngytwmzustybhev/Build/Intermediates.noindex/ArchiveIntermediates/XXX-SIT/IntermediateBuildFilesPath/XXX.build/Release-SIT-iphoneos/XXX.build/Script-187F7F6921537B0600C427DD.sh</span><br><span class="line">[14:59:47]: â–¸ Updating build number to 20180920145946</span><br><span class="line">[14:59:47]: â–¸ Set: Entry, &quot;:CFBundleVersion&quot;, Does Not Exist</span><br><span class="line">[14:59:47]: â–¸ File Doesn&apos;t Exist, Will Create: /Users/apple/Library/Developer/Xcode/DerivedData/XXX-bcebrkpahigmkngytwmzustybhev/Build/Intermediates.noindex/ArchiveIntermediates/XXX-SIT/BuildProductsPath/Release-SIT-iphoneos/XXX.app.dSYM/Contents/Info.plist</span><br><span class="line">[14:59:47]: â–¸ Command PhaseScriptExecution failed with a nonzero exit code</span><br></pre></td></tr></table></figure>
<p>é—®é¢˜æ˜¯å‡ºåœ¨äº†æ›´æ”¹é¡¹ç›®å·¥ç¨‹buildnumberçš„shellè„šæœ¬é‡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Update build number with buldTime</span><br><span class="line">buildNumber=$(date +%Y%m%d%H%M%S)</span><br><span class="line">echo &quot;Updating build number to $buildNumber&quot;</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$&#123;TARGET_BUILD_DIR&#125;/$&#123;INFOPLIST_PATH&#125;&quot;</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$&#123;BUILT_PRODUCTS_DIR&#125;/$&#123;WRAPPER_NAME&#125;.dSYM/Contents/Info.plist&quot;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µè„šæœ¬ä¼šåœ¨æœ€åä¼šæŠŠxxx.app.dSYMä¸­çš„info.plistä¸­çš„CFBundleVersionå€¼ä¿®æ”¹æˆå½“å‰æ—¶é—´ï¼Œè€ŒæŠ¥é”™è¯´ï¼Œè¿™ä¸ªinfo.plistä¸å­˜åœ¨ï¼Œåˆ›å»ºçš„æ—¶å€™å‡ºé—®é¢˜æŠ¥é”™ã€‚</p>
<p><strong>è¿™ä¼šä¸ä¼šæ˜¯è‹¹æœçš„bug??</strong></p>
<h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>æŠŠbuild systemåˆ‡æ¢åˆ°<br>Legacy Build Systemï¼Œæ¢è¨€ä¹‹å°±æ˜¯åˆ‡æ¢æˆè€çš„ç¼–è¯‘ç³»ç»Ÿï¼Œå°±OKäº†ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/04/20/Swift4QRCodeTool/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/20/Swift4QRCodeTool/" itemprop="url">Swift4å¦‚ä½•æ‰«æäºŒç»´ç äº†è§£ä¸€ä¸‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-04-20T17:29:05+08:00">
                2018-04-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-æ‰«ç ç®€å²"><a href="#1-æ‰«ç ç®€å²" class="headerlink" title="1.æ‰«ç ç®€å²"></a>1.æ‰«ç ç®€å²</h2><p>è¿™äº›å¹´ç§»åŠ¨äº’è”ç½‘çš„æ™®åŠï¼Œä¹Ÿè®©äºŒç»´ç æŠ€æœ¯æˆåŠŸçš„æ¨å¹¿ã€‚åœ¨é¥è¿œçš„iOS7.0ä¹‹å‰çš„å¹´ä»£ï¼Œæˆ‘ä»¬å®ç°äºŒç»´ç æ‰«æçš„åŠŸèƒ½ï¼Œè¿˜éœ€è¦å€ŸåŠ©ä¸¤å¤§å¼€æºç»„ä»¶ZXingå’ŒZBaræ¥å®ç°ã€‚iOS7.0ä»¥åï¼Œè‹¹æœæä¾›äº†AVFoundationæ¡†æ¶ï¼Œæ¥å®ç°äºŒç»´ç æ˜¯æ‰«ç ï¼Œè€Œä¸”æ•ˆç‡æ›´é«˜ã€‚<br>ä¸æ­¤åŒæ—¶ï¼Œè‹¹æœçš„Swiftå¼€å‘è¯­è¨€ï¼Œä¹Ÿç»å†äº†ä»1.0è¯ç”Ÿåˆ°4.1ï¼Œå…¶ä¸­ä¸ä¹ä¸€äº›æ–°ç‰¹æ€§ä»¥åŠAPIçš„å˜åŒ–ã€‚</p>
<p>æœ¬æ–‡è®²è§£äº†å¦‚ä½•ç”¨Swift4ï¼Œå®ç°äºŒç»´ç æ‰«æçš„åŠŸèƒ½</p>
<h2 id="2-å…·ä½“å®ç°"><a href="#2-å…·ä½“å®ç°" class="headerlink" title="2.å…·ä½“å®ç°"></a>2.å…·ä½“å®ç°</h2><h3 id="2-1æƒé™æ§åˆ¶"><a href="#2-1æƒé™æ§åˆ¶" class="headerlink" title="2.1æƒé™æ§åˆ¶"></a>2.1æƒé™æ§åˆ¶</h3><p>å®ç°äºŒç»´ç æ‰«æï¼Œå¿…ç„¶è¦æ‰“å¼€æ‰‹æœºæ‘„åƒå¤´ï¼Œå°±éœ€è¦è·å–æƒé™ã€‚é¦–å…ˆï¼Œåœ¨ä½ çš„é¡¹ç›®å·¥ç¨‹çš„info.plistä¸­åŠ å…¥å¦‚ä¸‹key-valueï¼Œå¦åˆ™appè°ƒè¯•çš„æ—¶å€™å´©æºƒã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;</span><br><span class="line">&lt;string&gt;CameraUsageDescription&lt;/string&gt;</span><br></pre></td></tr></table></figure></p>
<p>å¦å¤–éœ€è¦æ‰‹åŠ¨å»æ£€æµ‹å½“å‰APPçš„æ‘„åƒå¤´æƒé™ã€‚å¦‚ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">func checkCameraAuth() -&gt; Bool &#123;</span><br><span class="line">let status = AVCaptureDevice.authorizationStatus(for: .video)</span><br><span class="line">return status == .authorized</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¸éš¾çœ‹å‡ºï¼Œstatusæ˜¯ä¸ªæšä¸¾å€¼ï¼Œåªæœ‰ .authorizedæ‰æ˜¯å·²ç»è·å–æ‘„åƒå¤´æƒé™ï¼Œå…¶ä½™çš„éƒ½ä¸è¡Œã€‚</p>
<h3 id="2-2-ä¸Šä»£ç "><a href="#2-2-ä¸Šä»£ç " class="headerlink" title="2.2 ä¸Šä»£ç "></a>2.2 ä¸Šä»£ç </h3><h4 id="2-2-1-åˆå§‹åŒ–"><a href="#2-2-1-åˆå§‹åŒ–" class="headerlink" title="2.2.1 åˆå§‹åŒ–"></a>2.2.1 åˆå§‹åŒ–</h4><p>å¯¼å…¥AVFoundationæ¡†æ¶ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆå§‹åŒ–æ•æ‰è®¾å¤‡ã€åˆ›å»ºæ•æ‰ä¼šè¯ã€è¾“å…¥åª’ä½“ç±»å‹ã€è®¾ç½®ä»£ç†ç­‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// æ•æ‰è®¾å¤‡</span><br><span class="line">guard let device = AVCaptureDevice.default(for: .video)  else &#123;</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">do &#123;</span><br><span class="line">// è¾“å…¥</span><br><span class="line">inPut: AVCaptureDeviceInput = try AVCaptureDeviceInput.init(device: device)</span><br><span class="line">&#125; catch  &#123;</span><br><span class="line">print(error)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/// è¾“å‡º</span><br><span class="line">let outPut: AVCaptureMetadataOutput = &#123;</span><br><span class="line">let outPut = AVCaptureMetadataOutput.init()</span><br><span class="line">outPut.connection(with: .metadata)</span><br><span class="line">return outPut</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">/// ä¼šè¯ session</span><br><span class="line">let session: AVCaptureSession = &#123;</span><br><span class="line">let session = AVCaptureSession.init()</span><br><span class="line">if session.canSetSessionPreset(.high)&#123;</span><br><span class="line">session.sessionPreset = .high</span><br><span class="line">&#125;</span><br><span class="line">return session</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">/// é¢„è§ˆå±‚</span><br><span class="line">let preLayer: AVCaptureVideoPreviewLayer = AVCaptureVideoPreviewLayer.init()</span><br></pre></td></tr></table></figure></p>
<h4 id="2-2-2-è®¾ç½®ä»£ç†"><a href="#2-2-2-è®¾ç½®ä»£ç†" class="headerlink" title="2.2.2 è®¾ç½®ä»£ç†"></a>2.2.2 è®¾ç½®ä»£ç†</h4><p>åˆå§‹åŒ–ä¹‹åï¼Œå¼€å§‹è®¾ç½®ä»£ç†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// è®¾ä»£ç†</span><br><span class="line">outPut.setMetadataObjectsDelegate(self as AVCaptureMetadataOutputObjectsDelegate, queue: DispatchQueue.main)</span><br><span class="line">// æŒ‡å®šé¢„è§ˆå±‚çš„æ•æ‰ä¼šè¯</span><br><span class="line">preLayer.session = session</span><br></pre></td></tr></table></figure></p>
<h4 id="2-2-3-æŒ‡å®šä¼šè¯è¾“å…¥è¾“å‡º"><a href="#2-2-3-æŒ‡å®šä¼šè¯è¾“å…¥è¾“å‡º" class="headerlink" title="2.2.3 æŒ‡å®šä¼šè¯è¾“å…¥è¾“å‡º"></a>2.2.3 æŒ‡å®šä¼šè¯è¾“å…¥è¾“å‡º</h4><p>ç„¶åæŠŠæ•æ‰ä¼šè¯æ·»åŠ è¾“å…¥è¾“å‡º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// æ•æ‰ä¼šè¯åŠ å…¥inputå’Œoutput</span><br><span class="line">if session.canAddInput(input) &amp;&amp; session.canAddOutput(outPut) &#123;</span><br><span class="line">session.addInput(input)</span><br><span class="line">session.addOutput(outPut)</span><br><span class="line">// è®¾ç½®å…ƒæ•°æ®å¤„ç†ç±»å‹(æ³¨æ„, ä¸€å®šè¦å°†è®¾ç½®å…ƒæ•°æ®å¤„ç†ç±»å‹çš„ä»£ç æ·»åŠ åˆ°  ä¼šè¯æ·»åŠ è¾“å‡ºä¹‹å)</span><br><span class="line">outPut.metadataObjectTypes = [.ean13, .ean8, .upce, .code39, .code93, .code128, .code39Mod43, .qr]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è®¾ç½®å…ƒæ•°æ®å¤„ç†ç±»å‹ï¼Œ å¯è§ä¸ä»…æœ‰äºŒç»´ç ï¼Œè€Œä¸”è¿˜æœ‰å…¶ä»–æ¡ç ï¼Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚æ³¨æ„, ä¸€å®šè¦å°†è®¾ç½®å…ƒæ•°æ®å¤„ç†ç±»å‹çš„ä»£ç æ·»åŠ åˆ°ä¼šè¯æ·»åŠ è¾“å‡ºä¹‹åã€‚</p>
<h4 id="2-2-4-æ·»åŠ ä¼šè¯é¢„è§ˆå›¾å±‚"><a href="#2-2-4-æ·»åŠ ä¼šè¯é¢„è§ˆå›¾å±‚" class="headerlink" title="2.2.4 æ·»åŠ ä¼šè¯é¢„è§ˆå›¾å±‚"></a>2.2.4 æ·»åŠ ä¼šè¯é¢„è§ˆå›¾å±‚</h4><p>æ¥ç€å¼€å§‹åœ¨é¡µé¢æ·»åŠ é¢„è§ˆå±‚, è¿™æ ·æ‰èƒ½çœ‹åˆ°æ‘„åƒå¤´æ•æ‰åˆ°çš„ç”»é¢ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// æ·»åŠ é¢„è§ˆå›¾å±‚</span><br><span class="line">let flag = view.layer.sublayers?.contains(preLayer)</span><br><span class="line">if flag == false || flag == nil &#123;</span><br><span class="line">self.preLayer.frame = view.bounds</span><br><span class="line">view.layer.insertSublayer(preLayer, at: 0)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="2-2-5-å¼€å¯ä¼šè¯"><a href="#2-2-5-å¼€å¯ä¼šè¯" class="headerlink" title="2.2.5 å¼€å¯ä¼šè¯"></a>2.2.5 å¼€å¯ä¼šè¯</h4><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œè¿™ä¸ªsessionæ•æ‰ä¼šè¯éœ€è¦çš„å‚æ•°éƒ½å…¨äº†ï¼Œç„¶åå¼€å§‹æ„‰å¿«çš„å¼€å§‹è¿™ä¸ªä¼šè¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å¯åŠ¨ä¼šè¯</span><br><span class="line">session.startRunning()</span><br></pre></td></tr></table></figure></p>
<h4 id="2-2-6-ç›‘å¬æ•æ‰ä¼šè¯è¾“å‡ºä»£ç†"><a href="#2-2-6-ç›‘å¬æ•æ‰ä¼šè¯è¾“å‡ºä»£ç†" class="headerlink" title="2.2.6 ç›‘å¬æ•æ‰ä¼šè¯è¾“å‡ºä»£ç†"></a>2.2.6 ç›‘å¬æ•æ‰ä¼šè¯è¾“å‡ºä»£ç†</h4><p>å¼€å¯æ•æ‰ä¼šè¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»£ç†æ–¹æ³•ä¸­æŸ¥çœ‹ä¼šè¯æ•æ‰åˆ°çš„ä¸œè¥¿ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func captureOutput(_ captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [Any]!, from connection: AVCaptureConnection!)</span><br></pre></td></tr></table></figure>
<p>è¯†åˆ«åˆ°çš„å°±åœ¨è¿™ä¸ªæ–¹æ³•é‡Œå‘Šè¯‰ä½ ã€‚<br>ä»€ä¹ˆï¼Ÿä»€ä¹ˆï¼Ÿï¼Œæ–¹æ³•ä¸è°ƒç”¨ï¼Ÿ<br><strong>æ•²é»‘æ¿ï¼ï¼ï¼APIæœ‰å˜åŒ–äº†</strong><br>Swift4.0çš„ä»£ç†æ–¹æ³•åœ¨ä¸‹é¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">func metadataOutput(_ output: AVCaptureMetadataOutput, didOutput metadataObjects: [AVMetadataObject], from connection: AVCaptureConnection)&#123;</span><br><span class="line">var resultStrs = [String]()</span><br><span class="line">for obj in metadataObjects &#123;</span><br><span class="line">guard let codeObj = obj as? AVMetadataMachineReadableCodeObject else &#123;</span><br><span class="line">return</span><br><span class="line">&#125; </span><br><span class="line">resultStrs.append(codeObj.stringValue ?? &quot;&quot;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢å°±èƒ½æ‹¿åˆ°æ‰«ç ä¹‹åçš„ç»“æœäº†ã€‚</p>
<h4 id="2-2-7-æ€è€ƒ"><a href="#2-2-7-æ€è€ƒ" class="headerlink" title="2.2.7 æ€è€ƒ"></a>2.2.7 æ€è€ƒ</h4><p><strong>å†™åˆ°è¿™é‡Œï¼Œä¸ç»åœä¸‹æ€è€ƒï¼š</strong><br><strong>1.è¿™é‡Œè¿˜åªæ˜¯åŸºæœ¬çš„æ‰«ç åŠŸèƒ½ï¼Œå°±å·²ç»è¿™ä¹ˆå¤šä»£ç äº†ï¼Œå…³äºæ‰«ç é¡µé¢çš„é•¿å•¥æ ·å­çš„ä»£ç æˆ‘è¿˜æ²¡å†™ï¼›</strong><br><strong>2.ä¸€èˆ¬å¼€å‘ä¸­é¡µé¢å°‘ä¸äº†UIçš„ç½‘ç»œçš„ä»£ç ï¼Œéš¾é“æˆ‘è¦å†æŠŠè¿™ä¹ˆä¸€å¤§å¨AVFoundationä»£ç éƒ½å†™åˆ°æ§åˆ¶å™¨å—ï¼Ÿ</strong><br><strong>3.å¦‚æœæˆ‘ä¸€ä¸ªé¡¹ç›®é‡Œé¢ï¼Œä¸æ­¢ä¸€ä¸ªåœ°æ–¹ç”¨åˆ°æ‰«ç ï¼Œéš¾é“æˆ‘è¿˜è¦å†æŠŠè¿™ä¹ˆå¤šä»£ç å†å¤åˆ¶å‡ é</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1447375-b4a08ca6b7f7de8f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="WTF.png"></p>
<h2 id="3-å°è£…"><a href="#3-å°è£…" class="headerlink" title="3.å°è£…"></a>3.å°è£…</h2><p><strong>é«˜å†…èš ä½è€¦åˆ</strong><br>å°±æŒ‰ç…§è¿™ä¸ªåŸåˆ™æ¥å°è£…ã€‚<br>1.é¦–å…ˆæŠŠè¿™äº›AVFoundationæ¨¡å—çš„ä»£ç ï¼Œç»Ÿç»ŸæŠ½åˆ°ä¸€ä¸ªå·¥å…·ç±»é‡Œï¼Œéœ€è¦çš„æ—¶å€™ï¼Œç›´æ¥æ‹¿å·¥å…·ç±»è°ƒç”¨ï¼Œè¯†åˆ«ç»“æœdelegateè¿”å›ã€‚<br>2.å¯ä»¥æ ¹æ®ç»éªŒï¼ŒæŠŠä¸€äº›å®šåˆ¶çš„éœ€æ±‚ä¹Ÿæ”¾è¿›å»ï¼Œæ¯”å¦‚è¯´æ‰«ç çš„æ—¶å€™ï¼Œä¸­é—´é€æ˜çš„æ¡†æ¡†ï¼ŒåŠ ä¸Šå‘¨è¾¹çš„é»‘è‰²è’™æ¿ã€‚<br>3.æ‰©å±•ä¸€äº›å…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚æ‰«ç æˆåŠŸæ’­æ”¾ä¸€æ®µæç¤ºéŸ³ç­‰å¾…</p>
<p>ä»€ä¹ˆï¼Ÿä½ å‡†å¤‡åŠ¨æ‰‹äº†ï¼Ÿåˆ«ç€æ€¥ï¼Œæˆ‘å·²ç»å¼„å¥½äº†,ä½¿åŠ²æˆ³ğŸ‘‡ğŸ‘‡</p>
<h2 id="HRQRCodeScanTool"><a href="#HRQRCodeScanTool" class="headerlink" title="HRQRCodeScanTool"></a><a href="https://github.com/CoderHRXu/HRQRCodeScanTool" target="_blank" rel="noopener">HRQRCodeScanTool</a></h2><p>æœ€ç®€å•çš„ï¼Œåœ¨æ§åˆ¶å™¨ä¸­ï¼Œä½ åªéœ€è¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// in ViewController</span><br><span class="line">HRQRCodeScanTool.shared.delegate  = self</span><br><span class="line">HRQRCodeScanTool.shared.beginScanInView(view: view)</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åæ‰«ç ç»“æœä»£ç†è¿”å›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// scan result will call in  delegate methods </span><br><span class="line">func scanQRCodeFaild(error: HRQRCodeTooError)&#123;</span><br><span class="line">print(error)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func scanQRCodeSuccess(resultStrs: [String])&#123;</span><br><span class="line">print(resultStrs.first)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ éœ€è¦äºŒç»´ç æè¾¹ï¼Œä½ åªéœ€è¦è®¾ç½®è¿™å‡ ä¸ªå±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">open var isDrawQRCodeRect: Bool    true    æ˜¯å¦æç»˜äºŒç»´ç è¾¹æ¡† é»˜è®¤true</span><br><span class="line">open var drawRectColor: UIColor    UIColor.red    äºŒç»´ç è¾¹æ¡†é¢œè‰² é»˜è®¤çº¢è‰²</span><br><span class="line">open var drawRectLineWith: CGFloat    2    äºŒç»´ç è¾¹æ¡†çº¿å®½ é»˜è®¤2</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ éœ€è¦æ·»åŠ è’™æ¿ï¼Œä½ åªéœ€è¦è®¾ç½®è¿™å‡ ä¸ªå±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">open var isShowMask: Bool    true    æ˜¯å¦å±•ç¤ºé»‘è‰²è’™ç‰ˆæ¿å±‚ é»˜è®¤å¼€å¯</span><br><span class="line">open var maskColor: UIColor    Black.alpha 0.5    è’™æ¿å±‚ é»˜è®¤é»‘è‰² alpha 0.5</span><br><span class="line">open var centerWidth: CGFloat    200    ä¸­å¿ƒéè’™æ¿åŒºåŸŸçš„å®½</span><br><span class="line">open var centerHeight: CGFloat    5.0    ä¸­å¿ƒéè’™æ¿åŒºåŸŸçš„å®½</span><br><span class="line">open var centerPosition: CGPoint?    nil    ä¸­å¿ƒéè’™æ¿åŒºåŸŸçš„ä¸­å¿ƒç‚¹ é»˜è®¤Veiwçš„ä¸­å¿ƒ</span><br></pre></td></tr></table></figure></p>
<p>å“ªé‡Œéœ€è¦æ‰«ç ï¼Œç›´æ¥æ¥å…¥å·¥å…·ç±»ï¼Œæ²¡å¤šå°‘è¡Œä»£ç æå®šï¼Œå°±é—®ä½ çˆ½ä¸çˆ½ã€‚<br>å¦å¤–ï¼Œé¡¹ç›®é‡Œè¿˜æä¾›äº†ä¸¤ä¸ªæ‰©å±•ï¼Œç”¨æ¥è¯†åˆ«äºŒç»´ç å›¾ç‰‡ï¼Œä»¥åŠå›¾ç‰‡ç”ŸæˆäºŒç»´ç ï¼Œéœ€è¦çš„å„ä½çœ‹å®˜è€çˆ·è‡ªå–ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/1447375-f471166df94d37f1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="yeah.png"><br>è¿˜æ”¯æŒCocoapodså“¦</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/04/17/KoaStaticServer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/17/KoaStaticServer/" itemprop="url">å¦‚ä½•ä½¿ç”¨Koaæ­å»ºé™æ€èµ„æºæ–‡ä»¶æœåŠ¡å™¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-04-17T11:01:42+08:00">
                2018-04-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-node-js"><a href="#1-node-js" class="headerlink" title="1.node.js"></a>1.node.js</h2><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œæ‰§è¡ŒJavascriptçš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ€§èƒ½éå¸¸å¥½ã€‚<br>Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚<br>Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚</p>
<h2 id="2-Koa"><a href="#2-Koa" class="headerlink" title="2.Koa"></a>2.Koa</h2><p><a href="http://koajs.com/" target="_blank" rel="noopener">Koa</a> å°±æ˜¯ä¸€ç§ç®€å•å¥½ç”¨çš„ Web æ¡†æ¶ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ä¼˜é›…ã€ç®€æ´ã€è¡¨è¾¾åŠ›å¼ºã€è‡ªç”±åº¦é«˜ã€‚æœ¬èº«ä»£ç åªæœ‰1000å¤šè¡Œï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½é€šè¿‡æ’ä»¶å®ç°ï¼Œå¾ˆç¬¦åˆ Unix å“²å­¦ã€‚</p>
<p>æœ¬æ–‡è®²è¿°äº†å¦‚ä½•æœ€ç®€å•çš„ä½¿ç”¨Koaæ¡†æ¶æ¥å®ç°é™æ€èµ„æºå‘å¸ƒæœåŠ¡å™¨ã€‚</p>
<h2 id="3-å‡†å¤‡å·¥ä½œ"><a href="#3-å‡†å¤‡å·¥ä½œ" class="headerlink" title="3.å‡†å¤‡å·¥ä½œ"></a>3.å‡†å¤‡å·¥ä½œ</h2><p>Koa å¿…é¡»ä½¿ç”¨7.6ä»¥ä¸Šç‰ˆæœ¬çš„ï¼Œå¦‚æœä½ çš„ç‰ˆæœ¬ä½äºè¿™ä¸ªè¦æ±‚ï¼Œå°±è¦å…ˆå‡çº§Nodeï¼Œæ“ä½œæ–¹æ³•ä¸å¤šè¯´äº†ã€‚</p>
<h2 id="4-æ­£å¼å¼€æ"><a href="#4-æ­£å¼å¼€æ" class="headerlink" title="4.æ­£å¼å¼€æ"></a>4.æ­£å¼å¼€æ</h2><h3 id="4-1-å¿«é€Ÿå¼€å¯httpæœåŠ¡"><a href="#4-1-å¿«é€Ÿå¼€å¯httpæœåŠ¡" class="headerlink" title="4.1 å¿«é€Ÿå¼€å¯httpæœåŠ¡"></a>4.1 å¿«é€Ÿå¼€å¯httpæœåŠ¡</h3><p>åœ¨ä½ çš„ç”µè„‘ä¸ŠæŒ‡å®šä¸€ä¸ªç›®å½•ï¼Œæ‰“å¼€ç»ˆç«¯cdåˆ°ç›®å½•ï¼Œnpm install å®‰è£…ä¾èµ–åŒ…ï¼Œæ–°å»ºä¸€ä¸ªapp.js æ–‡ä»¶ï¼Œä½œä¸ºå…¥å£ã€‚åœ¨jsæ–‡ä»¶ä¸­å†™å¦‚ä¸‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;);</span><br><span class="line">const app = new Koa();</span><br><span class="line"></span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure>
<p>ç»ˆç«¯é‡Œè¾“å‡º node app.jsï¼Œä¸€ä¸ªæœåŠ¡å°±è¿™ä¹ˆè¿è¡Œäº†ã€‚æ˜¯ä¸æ˜¯so easyï¼<br>æ‰“å¼€æµè§ˆå™¨è®¿é—®<a href="http://loacalhost:3000ï¼Œä½ ä¼šçœ‹åˆ°é¡µé¢æ˜¾ç¤º&quot;Not" target="_blank" rel="noopener">http://loacalhost:3000ï¼Œä½ ä¼šçœ‹åˆ°é¡µé¢æ˜¾ç¤º&quot;Not</a> Foundâ€ï¼Œè¡¨ç¤ºæ²¡æœ‰å‘ç°ä»»ä½•å†…å®¹ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰å‘Šè¯‰ Koa åº”è¯¥æ˜¾ç¤ºä»€ä¹ˆå†…å®¹ã€‚</p>
<h3 id="4-2-é…ç½®è·¯ç”±å’Œé™æ€èµ„æº"><a href="#4-2-é…ç½®è·¯ç”±å’Œé™æ€èµ„æº" class="headerlink" title="4.2 é…ç½®è·¯ç”±å’Œé™æ€èµ„æº"></a>4.2 é…ç½®è·¯ç”±å’Œé™æ€èµ„æº</h3><p>ç½‘ç«™ä¸€èˆ¬éƒ½æœ‰å¤šä¸ªé¡µé¢ï¼Œå¤šä¸ªé¡µé¢å°±éœ€è¦è·¯å¾„çš„è·¯ç”±ã€‚åŸç”Ÿè·¯ç”±ç”¨èµ·æ¥ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å°è£…å¥½çš„<a href="https://www.npmjs.com/package/koa-route" target="_blank" rel="noopener"><code>koa-route</code></a>æ¨¡å—ã€‚<br>å¦‚æœç½‘ç«™æä¾›é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ã€æ ·å¼è¡¨ã€è„šæœ¬â€¦â€¦ï¼‰ï¼Œä¸ºå®ƒä»¬ä¸€ä¸ªä¸ªå†™è·¯ç”±å°±å¾ˆéº»çƒ¦ï¼Œä¹Ÿæ²¡å¿…è¦ã€‚<a href="https://www.npmjs.com/package/koa-static" target="_blank" rel="noopener"><code>koa-static</code></a>æ¨¡å—å°è£…äº†è¿™éƒ¨åˆ†çš„è¯·æ±‚ã€‚</p>
<p>å®é™…å¼€å‘ä¸­ï¼Œä¸€ä¸ªæœåŠ¡ä¸ä»…èƒ½æä¾›é™æ€èµ„æºè®¿é—®ï¼Œä¹Ÿä¼šæä¾›ä¸€äº›æ¥å£ç»™å¤–ç•Œè°ƒç”¨ï¼Œä¸ºäº†ç»Ÿä¸€ç®¡ç†è¿™éƒ¨åˆ†é™æ€èµ„æºï¼Œä¸€èˆ¬éƒ½æ”¾åœ¨æ ¹ç›®å½•publicæ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<p>å…¶ä»–çš„æ¥å£ï¼Œå°±éœ€è¦ç”¨è·¯ç”±ç»Ÿä¸€åˆ†é…è·¯å¾„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 0.å¯¼å…¥éœ€è¦çš„èµ„æºåŒ…</span><br><span class="line">const Koa = require(&apos;koa&apos;);</span><br><span class="line">const app = new Koa();</span><br><span class="line">const route = require(&apos;koa-route&apos;);</span><br><span class="line">const serve = require(&apos;koa-static&apos;);</span><br><span class="line"></span><br><span class="line">// 1.ä¸»é¡µé™æ€ç½‘é¡µ æŠŠé™æ€é¡µç»Ÿä¸€æ”¾åˆ°publicä¸­ç®¡ç†</span><br><span class="line">const home   = serve(path.join(__dirname)+&apos;/public/&apos;);</span><br><span class="line">// 2.helloæ¥å£</span><br><span class="line">const hello = ctx =&gt; &#123;</span><br><span class="line">  ctx.response.body = &apos;Hello World&apos;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 3.åˆ†é…è·¯ç”±</span><br><span class="line">app.use(home); </span><br><span class="line">app.use(route.get(&apos;/&apos;, hello));</span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªnode.jsçš„å…¨å±€å˜é‡: __dirname,è¡¨ç¤ºå½“å‰æ‰§è¡Œè„šæœ¬æ‰€åœ¨çš„ç›®å½•ã€‚ç„¶åæŠŠä½ ä¹‹å‰å†™å¥½çš„é™æ€èµ„æºï¼Œæ¯”å¦‚htmlï¼Œcssç­‰æ–‡ä»¶ï¼Œç»Ÿç»Ÿæ”¾åˆ°æ ¹ç›®å½•çš„publicæ–‡ä»¶å¤¹ä¸‹ã€‚è¿è¡Œä¸€ä¸‹app.jsã€‚åœ¨æµè§ˆå™¨é‡Œé¢è¾“å¦‚ <a href="http://loacalhost:3000/" target="_blank" rel="noopener">http://loacalhost:3000</a> é»˜è®¤è·å–åŠ è½½publicç›®å½•ä¸‹çš„index.htmlæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£å°±åœ¨æµè§ˆå™¨ç«¯å£å·åé¢æ‹¼æ¥è·¯å¾„ã€‚æ¯”å¦‚ <a href="http://loacalhost:3000/index2.html" target="_blank" rel="noopener">http://loacalhost:3000/index2.html</a>ã€‚</p>
<p>åˆ°æ­¤ä¸ºæ­¢å°±å¯ä»¥è®¿é—®publicä¸‹æ‰€æœ‰çš„é™æ€èµ„æºäº†ã€‚<br>é¼“æŒï¼Œæ•£èŠ±ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/03/05/ContainInSwift/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/05/ContainInSwift/" itemprop="url">Swiftä¸­ä½¿ç”¨Containsçš„æ­£ç¡®å§¿åŠ¿</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-05T14:00:46+08:00">
                2018-03-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-æ­£ç¡®å§¿åŠ¿"><a href="#1-æ­£ç¡®å§¿åŠ¿" class="headerlink" title="1.æ­£ç¡®å§¿åŠ¿"></a>1.æ­£ç¡®å§¿åŠ¿</h2><p>å½“æˆ‘ä»¬åœ¨ç”¨Swiftè¿›è¡Œç¼–ç çš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°contains(element:)æ–¹æ³•æ¥åˆ¤æ–­Arrayæ˜¯å¦åŒ…å«äº†æŸä¸ªå…ƒç´ ã€‚ä¸¾ä¸ªæ —å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Animal &#123;</span><br><span class="line">  case dog</span><br><span class="line">  case cat</span><br><span class="line">&#125;</span><br><span class="line">let animals: [Animal] = [.dog, .dog]</span><br><span class="line">let hasCat = animals.contains(.cat)       // fasle</span><br></pre></td></tr></table></figure></p>
<p>çœ‹èµ·æ¥ç°å¸¸çš„ç®€å•å¯¹ä¸ï¼Ÿç„¶é¹…ï¼Œæˆ‘ä»¬æŠŠAnimalçš„æšä¸¾å®šä¹‰ä¿®æ”¹æˆå¸¦å‚æ•°çš„æšä¸¾ï¼Œæ¯”å¦‚è¿™æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Animal &#123;</span><br><span class="line">  case dog(String)</span><br><span class="line">  case cat(String)</span><br><span class="line">&#125;</span><br><span class="line">let animals: [Animal] = [.dog(&quot;æ±ªæ±ª&quot;), .dog(&quot;é˜¿é»„&quot;)]</span><br><span class="line">let hasCat = animals.contains(.cat(&quot;å–µå–µ&quot;))      // compile error</span><br></pre></td></tr></table></figure></p>
<p>ç¼–è¯‘æŠ¥é”™äº†ï¼Œä¸ºæ¯›ï¼Ÿ<br>åŸå› æ˜¯èƒ½ä½¿ç”¨contains(element:)çš„å…ƒç´ æ˜¯éœ€è¦éµå¾ªEquatableåè®®çš„ï¼Œä½†æ˜¯Animalæ˜¯æ²¡æœ‰éµå¾ªçš„ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p>
<p>é‚£è‚¿ä¹ˆåŠï¼Ÿå¹¸å¥½è‹¹æœè¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªæ–¹æ³•æ¥åˆ¤æ–­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public func contains(where predicate: (Element) throws -&gt; Bool)</span><br><span class="line">rethrows -&gt; Bool</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ–¹æ³•æä¾›äº†ä¸€ä¸ªé—­åŒ…å‚æ•°â€”â€” predicateï¼Œå½“æ•°ç»„ä¸­çš„å…ƒç´ æ²¡æœ‰éµå¾ªEquatableåè®®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå‚æ•°æ¥å®šä¹‰æ£€æŸ¥å…ƒç´ çš„è§„åˆ™ã€‚</p>
<p>æ‰€ä»¥ä¹‹å‰ä»£ç ä¸­çš„é”™è¯¯ä»£ç æ”¹æˆè¿™æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">enum Animal &#123;</span><br><span class="line">    case dog(String)</span><br><span class="line">    case cat(String)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let animals : [Animal] = [.dog(&quot;æ±ªæ±ª&quot;), .dog(&quot;é˜¿é»„&quot;)]</span><br><span class="line">let hasCat = animals.contains &#123; (animal) -&gt; Bool in</span><br><span class="line">    </span><br><span class="line">    if case .cat = animal &#123;</span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return false</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// fasle</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¹ˆæ”¹hasCatå°±èƒ½æ­£ç¡®è®¡ç®—å‡ºæ˜¯falseäº†ã€‚</p>
<h2 id="2-è¿›é˜¶ç”¨æ³•"><a href="#2-è¿›é˜¶ç”¨æ³•" class="headerlink" title="2.è¿›é˜¶ç”¨æ³•"></a>2.è¿›é˜¶ç”¨æ³•</h2><p>å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰predicateï¼Œæ¥å®šä¹‰æ£€æŸ¥ç­›é€‰çš„æ¡ä»¶ï¼Œæ¯”å¦‚ï¼š<br>æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦æœ‰å…ƒç´ å¤§äº100ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let expenses = [21.37, 55.21, 9.32, 10.18, 388.77, 11.41]</span><br><span class="line">let hasBigPurchase = expenses.contains &#123; $0 &gt; 100 &#125;</span><br><span class="line">// &apos;hasBigPurchase&apos; == true</span><br></pre></td></tr></table></figure></p>
<p>å†ç»™ä¸ªæ —å­ï¼šæ£€æŸ¥ä¸€ä¸ªæ•°ç»„çš„å…ƒç´ ï¼Œå®ƒå¯æ˜¯å¦ä»¥é™¤ä»¥7ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let array = [2, 5, 6, 7, 19, 40]</span><br><span class="line"></span><br><span class="line">array.contains &#123; (element) -&gt; Bool in</span><br><span class="line">    element % 7 == 0</span><br><span class="line">&#125;</span><br><span class="line">æˆ–è€…</span><br><span class="line">array.contains &#123; $0 % 7 == 0 &#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œçš„$0å°±æ˜¯æŒ‡æ•°ç»„çš„å…ƒç´ ï¼›</p>
<blockquote>
<p>åŸæ–‡é“¾æ¥ï¼š<br><a href="https://medium.com/@iostechset/contains-function-in-swift-5e0276638eb5" target="_blank" rel="noopener">Contains in Swift</a> â€“ by æ•…èƒ¤é“é•¿ï¼ˆè‹±æ–‡åšå®¢ï¼Œéœ€è¦ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼‰<br><a href="https://developer.apple.com/documentation/swift/array/2297359-contains" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/24/SwiftURLEncodeing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/24/SwiftURLEncodeing/" itemprop="url">Swiftä¸­URLå¤„ç†ä¸­çš„æ³¨æ„ç‚¹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-24T16:31:05+08:00">
                2018-01-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ—¥å¸¸çš„å¼€å‘å½“ä¸­ï¼Œç½‘ç»œè¯·æ±‚æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚è€Œåœ¨ç½‘ç»œè®¿é—®è¯·æ±‚ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°æœ‰ä¸­æ–‡ç©ºæ ¼å­—ç¬¦çš„æƒ…å†µï¼Œç›´æ¥ç”¨è¿™äº›å­—ç¬¦ä¸²å»è®¿é—®æ˜¯æ— æ³•æ­£å¸¸è®¿é—®ï¼Œéœ€è¦æˆ‘ä»¬åšè¿›ä¸€æ­¥çš„å¤„ç†ã€‚</p>
<h2 id="ä¸€èˆ¬å¤„ç†"><a href="#ä¸€èˆ¬å¤„ç†" class="headerlink" title="ä¸€èˆ¬å¤„ç†"></a>ä¸€èˆ¬å¤„ç†</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let urlString = &quot;http://10.0.3.86/ä¸­æ–‡/main.html#/help&quot;</span><br></pre></td></tr></table></figure>
<p>æ¯”å¦‚ä»¥ä¸Šçš„urlï¼Œæƒ³ä½¿ç”¨webviewè¿›è¡Œè®¿é—®æˆ–è€…æ˜¯åŸç”Ÿå‘èµ·httpè¯·æ±‚ï¼Œéƒ½éœ€è¦è¿›è¡Œè½¬ç å¤„ç†ã€‚<br>æœ‰äººä¼šé—®ï¼Œè¿™æœ‰ä»€ä¹ˆéš¾çš„ï¼Ÿæ‹¿èµ·é”®ç›˜å°±æ˜¯å¹²<br><img src="http://upload-images.jianshu.io/upload_images/1447375-7e42bf91528876c9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å°±æ˜¯å¹².png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OCï¼š</span><br><span class="line">NSString* encodedString = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line"></span><br><span class="line">Swiftï¼š</span><br><span class="line">let encodedString = urlString.addingPercentEscapes(using: .utf8)</span><br></pre></td></tr></table></figure></p>
<p>ä¸€æ•²ä»£ç ï¼Œemmmmm~~ Xcodeå‘è­¦å‘Šäº†ï¼Œè¯¥æ–¹æ³•å·²ç»è¿‡æœŸï¼Œç”¨ä¸‹é¢çš„æ–¹æ³•æ›¿ä»£ï¼Œäºæ˜¯ç´§æ¥ç€:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OC:</span><br><span class="line">NSString* encodedString = [urtString stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]];</span><br><span class="line"></span><br><span class="line">Swift:</span><br><span class="line">let encodedString = urlString.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)</span><br></pre></td></tr></table></figure>
<p>OK,è½¬ç å¤„ç†ä¸€ä¸‹ï¼Œå†è®¿é—®è½¬ç ä¹‹åçš„urlã€‚<br><strong>whatï¼Ÿè¿˜æ˜¯ä¸èƒ½æ­£å¸¸è®¿é—®ï¼Ÿ</strong><br>æˆ‘ä»¬æ¥çœ‹çœ‹è½¬ç ä¹‹åçš„urlæ˜¯ä»€ä¹ˆï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1447375-fee78cebefc1331c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><strong>åŸæ¥æ˜¯å› ä¸ºæœ€åçš„#è¢«è½¬ç æˆäº†%23</strong><br>å‰ç«¯å¼€å‘çš„å°ä¼™ä¼´è¯´è¿™ä¸ª#ä¸èƒ½åŠ¨ï¼Œåªèƒ½æˆ‘ä»¬ä¸è½¬ç ã€‚ä¸è½¬ç é‚£ä¹ˆå¤¹æ‚ä¸­æ–‡å­—ç¬¦æ€ä¹ˆåŠå‘¢ï¼Ÿâ€”â€” <strong>ä¿®æ”¹å‚æ•°</strong>ã€‚<br><strong>æ‰€ä»¥æˆ‘ä»¬çš„éœ€æ±‚å˜åŒ–æˆï¼šé™¤äº†urlé‡Œé¢çš„#ä¸åŠ¨ï¼Œå…¶ä»–è¯¥è½¬ç çš„éƒ½è½¬ç </strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSMutableCharacterSet *set  = [[NSCharacterSet URLQueryAllowedCharacterSet] mutableCopy];</span><br><span class="line">[set addCharactersInString:@&quot;#&quot;];</span><br><span class="line">NSString *encodedString     = [urlSring stringByAddingPercentEncodingWithAllowedCharacters:set];</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰‹åŠ¨ä¿®æ”¹è½¬ç å‚æ•°ï¼ŒOK å¯ä»¥äº†ã€‚<br>Swiftå¦‚æ³•ç‚®åˆ¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let charSet = CharacterSet.urlQueryAllowed as! NSMutableCharacterSet</span><br><span class="line">charSet.addCharacters(in: &quot;#&quot;)</span><br><span class="line">let encodingString = urlStr.addingPercentEncoding(withAllowedCharacters: charSet as CharacterSet)</span><br></pre></td></tr></table></figure></p>
<p>è™½ç„¶è¯­è¨€ä¸ä¸€æ ·ï¼Œä½†æ˜¯æ€è·¯ä¸€æ ·ã€‚<strong>emmmmâ€¦ä½ ä¼šæƒŠäººçš„å‘ç°ï¼Œæ ¹æœ¬ä¸ç®¡ç”¨ï¼ï¼ï¼</strong><br><img src="http://upload-images.jianshu.io/upload_images/1447375-d729f1de206f6ab9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="wc.png"></p>
<h2 id="åŸå› åˆ†æ"><a href="#åŸå› åˆ†æ" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h2><p>é—®é¢˜æ˜¯å‡ºåœ¨<br>let charSet = CharacterSet.urlQueryAllowed as! NSMutableCharacterSet<br>è¿™ä¸€è¡Œï¼Œåœ¨swiftè¯­è¨€ä¸­ï¼ŒFoundationæ¡†æ¶ä¸­çš„å¾ˆå¤šclasséƒ½é‡æ–°ç”¨structé‡å†™äº†ï¼Œæ¯”å¦‚NSStringå’ŒStringï¼ŒNSUrlå’ŒURLï¼Œå¦‚æœè¦ä½¿ç”¨ç±»ä¼¼äºOCä¸€äº›ç‰¹æ€§ï¼Œæœ‰æ—¶å€™éœ€è¦asæ¥å¼ºè½¬æˆå¯¹åº”çš„NSå¼€å¤´çš„ç±»ã€‚å¼ºè½¬çš„è¿‡ç¨‹ä¸­ï¼ŒCharacterSetåº”è¯¥è½¬æˆNSCharacterSet,è€Œä¸åº”è¯¥æ˜¯NSMutableCharacterSetï¼Œä¹Ÿå°±æ˜¯è¯´<strong>å­ç±»æŒ‡é’ˆæŒ‡å‘äº†çˆ¶ç±»å¯¹è±¡</strong>ï¼Œçˆ¶ç±»é‡Œé¢æ²¡æœ‰å­ç±»çš„æ–¹æ³•ï¼Œæ‰€ä»¥æ‰§è¡ŒcharSet.addCharacters(in: â€œ#â€)çš„æ—¶å€™ï¼Œæ— æ³•æ­£ç¡®æ·»åŠ ã€‚</p>
<h2 id="æ­£ç¡®çš„å†™æ³•"><a href="#æ­£ç¡®çš„å†™æ³•" class="headerlink" title="æ­£ç¡®çš„å†™æ³•"></a>æ­£ç¡®çš„å†™æ³•</h2><p>é¡ºç€åŸå› ä¸€è·¯åˆ†æï¼Œåº”è¯¥è¿™ä¹ˆå†™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•ä¸€ï¼š</span><br><span class="line">let charSet = CharacterSet.urlQueryAllowed as NSCharacterSet</span><br><span class="line">let mutSet = charSet.mutableCopy() as! NSMutableCharacterSet</span><br><span class="line">mutSet.addCharacters(in: &quot;#&quot;)</span><br><span class="line">let encodingURL = urlStr.addingPercentEncoding(withAllowedCharacters: mutSet as CharacterSet)</span><br></pre></td></tr></table></figure></p>
<p>å½“ç„¶è¿˜æœ‰å…¶ä»–å†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•äºŒï¼š</span><br><span class="line">let charSet = NSMutableCharacterSet()</span><br><span class="line">charSet.formUnion(with: CharacterSet.urlQueryAllowed)</span><br><span class="line">charSet.addCharacters(in: &quot;#&quot;)</span><br><span class="line">let encodingURL = urlStr.addingPercentEncoding(withAllowedCharacters: charSet as CharacterSet)</span><br></pre></td></tr></table></figure></p>
<p>æ–¹æ³•ä¸€å’ŒäºŒæœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œå…¶å®æ²¿ç”¨çš„OCçš„æ€æƒ³ï¼Œå…ˆæ„é€ ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œå†åŠ å…¥è‡ªå®šä¹‰çš„å­—ç¬¦ã€‚<strong>å¦‚æœè¦åƒOCè¿™ä¹ˆæï¼Œé‚£ä¹ˆè‹¹æœè®¾è®¡swiftçš„æ„ä¹‰ä½•åœ¨ï¼Ÿæ¢å¥è¯è¯´ï¼Œswiftç”¨ç»“æ„ä½“å†™é‡å†™è¿™ä¸ªç±»ä¸€å®šè€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜ï¼Œé‚£å°±åº”è¯¥æœ‰ç›¸åº”çš„å¤„ç†æ–¹æ³•ã€‚</strong></p>
<p>æŸ¥é˜…å®˜æ–¹æ–‡æ¡£å§ï¼Œå°‘å¹´ï¼<br><img src="http://upload-images.jianshu.io/upload_images/1447375-3c58407983a74f5a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>æœä¸å…¶ç„¶ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥æ’å…¥å­—ç¬¦ã€‚<br>æ‰€ä»¥è¿˜æœ‰ç¬¬ä¸‰ç§å†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•ä¸‰ï¼š</span><br><span class="line">var charSet = CharacterSet.urlQueryAllowed</span><br><span class="line">charSet.insert(charactersIn: &quot;#&quot;)</span><br><span class="line">let encodingURL = urlStr.addingPercentEncoding(withAllowedCharacters: charSet )</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœ€ç»ˆç»“æœ<br><img src="http://upload-images.jianshu.io/upload_images/1447375-8e4a9b88fe4a3f03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç»“æœ.png"><br>OKï¼Œç¬¦åˆéœ€æ±‚ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/22/Gitlab-RunnerErrorAnalysis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/22/Gitlab-RunnerErrorAnalysis/" itemprop="url">gitlab-runnerä¹‹build failed with exit status 1é—®é¢˜åˆ†æ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-22T15:56:43+08:00">
                2018-01-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h2><p>å·¥ä½œéœ€è¦ï¼ŒåŸå…ˆçš„ä¸€å°ä¸“é—¨è´Ÿè´£æ‰“åŒ…çš„æœºå™¨è¦è¢«è°ƒèµ°ï¼Œæ‰€ä»¥å¦èµ·ç‚‰ç¶ï¼ŒæŠŠéœ€è¦æ‰“åŒ…çš„é¡¹ç›®è¿ç§»åˆ°æ–°æœºå™¨ï¼Œæœ¬ç¯‡æ–‡ç« è®²è¿°äº†è¿ç§»è¿‡ç¨‹é‡åˆ°çš„ä¸€äº›é—®é¢˜ä»¥åŠè§£å†³çš„æ–¹æ³•ã€‚</p>
<h2 id="1-gitlab-runner"><a href="#1-gitlab-runner" class="headerlink" title="1.gitlab-runner"></a>1.gitlab-runner</h2><p>é¦–å…ˆè¿˜æ˜¯ç®€å•è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯gitlab-runnerï¼Œå®˜ç½‘æ˜¯è¿™ä¹ˆæè¿°çš„ï¼š</p>
<blockquote>
<p>GitLab Runner is the open source project that is used to run your jobs and send the results back to GitLab. It is used in conjunction with <a href="https://about.gitlab.com/gitlab-ci" target="_blank" rel="noopener">GitLab CI</a>, the open-source continuous integration service included with GitLab that coordinates the jobs.</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´gitlab-runneræ˜¯é…åˆgitlab-ciè¿›è¡Œä½¿ç”¨çš„ã€‚ä¸€èˆ¬åœ°ï¼Œgitlabé‡Œé¢çš„æ¯ä¸€ä¸ªå·¥ç¨‹éƒ½ä¼šå®šä¹‰ä¸€ä¸ªå±äºè¿™ä¸ªå·¥ç¨‹çš„è½¯ä»¶é›†æˆè„šæœ¬ï¼Œç”¨æ¥è‡ªåŠ¨åŒ–åœ°å®Œæˆä¸€äº›è½¯ä»¶é›†æˆå·¥ä½œã€‚<br>å½“è¿™ä¸ªå·¥ç¨‹çš„ä»“åº“ä»£ç å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œæ¯”å¦‚æœ‰äººpushäº†ä»£ç æˆ–è€…åˆ†æ”¯åˆå¹¶ï¼Œgitlabå°±ä¼šå°†è¿™ä¸ªå˜åŠ¨é€šçŸ¥gitlab-ciã€‚è¿™æ—¶gitlab-ciä¼šæ‰¾å‡ºä¸è¿™ä¸ªå·¥ç¨‹ç›¸å…³è”çš„runnerï¼Œå¹¶é€šçŸ¥è¿™äº›runneræŠŠä»£ç æ›´æ–°åˆ°æœ¬åœ°å¹¶æ‰§è¡Œé¢„å®šä¹‰å¥½çš„æ‰§è¡Œè„šæœ¬ã€‚</p>
<h2 id="2-gitlab-runnerå®‰è£…å’Œæ³¨å†Œ"><a href="#2-gitlab-runnerå®‰è£…å’Œæ³¨å†Œ" class="headerlink" title="2.gitlab-runnerå®‰è£…å’Œæ³¨å†Œ"></a>2.gitlab-runnerå®‰è£…å’Œæ³¨å†Œ</h2><p><a href="https://docs.gitlab.com/runner/install/index.html" target="_blank" rel="noopener">å®‰è£…</a><br><a href="https://docs.gitlab.com/runner/register/index.html" target="_blank" rel="noopener">æ³¨å†Œ</a><br>è¿™å—åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæ ¹æ®ç³»ç»Ÿä¸€æ¬¡æ“ä½œä¸€ä¸‹å³å¯</p>
<h2 id="3-é—®é¢˜æè¿°"><a href="#3-é—®é¢˜æè¿°" class="headerlink" title="3.é—®é¢˜æè¿°"></a>3.é—®é¢˜æè¿°</h2><p>æ–°æœºå™¨åˆ°æ‰‹åï¼ŒæŠŠæœºå™¨ä¸Šæ‰€æœ‰çš„è½¯ä»¶ç¯å¢ƒç»Ÿç»Ÿæ›´æ–°äº†ä¸ªéï¼Œå‡çº§åˆ°macOS High Sierraï¼Œruby å‡çº§åˆ°2.4ç­‰ç­‰ã€‚ç„¶åå¼€å§‹å®‰è£…gitlab-runnerç´§æ¥ç€æ³¨å†Œåˆ°gitlab-ciï¼Œä¸€åˆ‡çš„ä¸€åˆ‡éƒ½çœ‹ä¼¼å¾ˆå¹³é™å¾ˆæ­£å¸¸ã€‚</p>
<p>ç„¶åå¼€å§‹è¯•è·‘è„šæœ¬,ç„¶åè«åå…¶å¦™çš„å‡ºé”™äº†ï¼Œlogå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Running with gitlab-runner 10.3.0 (5cf5e19a)</span><br><span class="line">  on xxxçš„MacBook pro (0dee7c95)</span><br><span class="line">Using Shell executor...</span><br><span class="line">Running onxxxdeMacBook-Pro.local...</span><br><span class="line">Cloning repository...</span><br><span class="line">Cloning into &apos;/Users/xxx/builds/0dee7c95/0/iOS-Team/xxx-test&apos;...</span><br><span class="line">Checking out 0766deb4 as develop...</span><br><span class="line">Skipping Git submodules setup</span><br><span class="line">ERROR: Job failed: exit status 1</span><br></pre></td></tr></table></figure></p>
<p>cloneä¹‹åç«‹é©¬å‡ºé—®é¢˜ï¼Œä¸€è„¸æ‡µé€¼â€¦è¿™è°çœ‹å¾—æ‡‚å‡ºçš„å•¥é”™ï¼Ÿå‡‰äº†å‡‰äº†~</p>
<h2 id="4-é—®é¢˜åˆ†æ"><a href="#4-é—®é¢˜åˆ†æ" class="headerlink" title="4.é—®é¢˜åˆ†æ"></a>4.é—®é¢˜åˆ†æ</h2><p>åˆšå¼€å§‹ä»¥ä¸ºæ˜¯cloneå‡ºé—®é¢˜ï¼Œæ‰“å¼€buildçš„ç›®å½•æ–‡ä»¶ï¼Œé‡Œé¢æ‰€æœ‰æ–‡ä»¶ç›®å½•éƒ½æ˜¯å®Œæ•´çš„ï¼Œç›´æ¥æ‰“å¼€é¡¹ç›®å·¥ç¨‹éƒ½èƒ½é¡ºç•…çš„è·‘èµ·æ¥ã€‚<br>å°è¯•ç”¨è¿™äº›logè¾“å‡ºï¼ŒGoogleäº†ä¸€ä¸‹ï¼Œèƒ½æœåˆ°å¥½å‡ ä¸ªStack Overflowçš„ç»“æœï¼Œä½†æ˜¯å¾ˆé—æ†¾ï¼Œéƒ½æœªèƒ½è§£å†³é—®é¢˜ã€‚</p>
<p><strong>é‚£ä¹ˆé—®é¢˜åˆ°åº•å‡ºåœ¨å“ªï¼Ÿ</strong></p>
<p>é¦–å…ˆçš„æ¢ä¸€ä¸ªæ€è€ƒé—®é¢˜çš„è§’åº¦ï¼š<strong>gitlab-ciä¸Šçš„logçœ‹ä¸å‡ºï¼Œæœä¸å‡ºä»€ä¹ˆç«¯å€ªï¼Œé‚£ä¹ˆgitlab-runnerå‘¢ï¼Ÿæ¯•ç«Ÿè·‘è„šæœ¬æ˜¯gitlab-runnerçš„äº‹æƒ…ï¼Œå®ƒè‡ªå·±æœ€æ¸…æ¥šäº†ã€‚</strong> </p>
<p>äºæ˜¯åœ¨æ‰“åŒ…æœºå™¨ç»ˆç«¯é‡Œé¢è¾“å…¥ <figure class="highlight plain"><figcaption><span>--debug run``` è¿™æ ·runnerçš„æ¯ä¸€æ­¥æ“ä½œéƒ½èƒ½çœ‹çš„åˆ°ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">Checking for jobs... nothing                        runner=0dee7c95</span><br><span class="line">Feeding runners to channel                          builds=0</span><br><span class="line">Checking for jobs... received                       job=402 repo_url=http://gitlab.xxxx.cn/iOS-Team/xxx-test.git runner=0dee7c95</span><br><span class="line">Failed to requeue the runner:                       builds=1 runner=0dee7c95</span><br><span class="line">Running with gitlab-runner 10.3.0 (5cf5e19a)</span><br><span class="line">  on xxxçš„MacBook pro (0dee7c95)  job=402 project=47 runner=0dee7c95</span><br><span class="line">Shell configuration: environment: []</span><br><span class="line">dockercommand:</span><br><span class="line">- sh</span><br><span class="line">- -c</span><br><span class="line">- &quot;if [ -x /usr/local/bin/bash ]; then\n\texec /usr/local/bin/bash --login\nelif [</span><br><span class="line">  -x /usr/bin/bash ]; then\n\texec /usr/bin/bash --login\nelif [ -x /bin/bash ]; then\n\texec</span><br><span class="line">  /bin/bash --login\nelif [ -x /usr/local/bin/sh ]; then\n\texec /usr/local/bin/sh</span><br><span class="line">  --login\nelif [ -x /usr/bin/sh ]; then\n\texec /usr/bin/sh --login\nelif [ -x /bin/sh</span><br><span class="line">  ]; then\n\texec /bin/sh --login\nelse\n\techo shell not found\n\texit 1\nfi\n\n&quot;</span><br><span class="line">command: bash</span><br><span class="line">arguments:</span><br><span class="line">- --login</span><br><span class="line">passfile: false</span><br><span class="line">extension: &quot;&quot;</span><br><span class="line">  job=402 project=47 runner=0dee7c95</span><br><span class="line">Using Shell executor...                             job=402 project=47 runner=0dee7c95</span><br><span class="line">Waiting for signals...                              job=402 project=47 runner=0dee7c95</span><br><span class="line">WARNING: Job failed: exit status 1                  job=402 project=47 runner=0dee7c95</span><br><span class="line">Submitting job to coordinator... ok                 job=402 runner=0dee7c95</span><br><span class="line">Feeding runners to channel                          builds=0</span><br><span class="line">Checking for jobs... nothing                        runner=0dee7c95</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šçš„logæ˜¯ä¸ºäº†å¤ç°é—®é¢˜ï¼ŒæŠŠç›¸å…³é…ç½®æ”¹æˆé—®é¢˜è§£å†³ä¹‹å‰ï¼Œè€Œæ“ä½œå‡ºæ¥çš„ï¼Œå¯èƒ½å’Œé—®é¢˜è§£å†³ä¹‹å‰çš„logæœ‰äº›å‡ºå…¥ã€‚æ ¹æ®è¿™äº›logï¼Œå†æ¬¡Googleï¼Œæœç„¶æ‰¾åˆ°äº†ç›¸å…³ä¿¡æ¯ï¼š<br><a href="https://gitlab.com/gitlab-org/gitlab-runner/issues/114" target="_blank" rel="noopener">https://gitlab.com/gitlab-org/gitlab-runner/issues/114</a><br>çœŸç›¸å¤§ç™½ï¼ŒåŸæ¥é—®é¢˜å‡ºåœ¨<strong>RVM</strong>ä¸Šã€‚</p>
<p>RVMç›¸ä¿¡å¼€å‘è€…éƒ½ä¸é™Œç”Ÿï¼Œå®ƒæ˜¯ä¸€ä¸ªä¾¿æ·çš„å¤šç‰ˆæœ¬rubyç¯å¢ƒçš„ç®¡ç†å’Œåˆ‡æ¢å·¥å…·ã€‚æœ‰ä¸€ä¸ªæ³¨æ„ç‚¹ï¼ŒMacOSæœ¬èº«æ˜¯é›†æˆrubyç¯å¢ƒçš„ï¼Œä¸åŒç‰ˆæœ¬çš„ç³»ç»Ÿé»˜è®¤é›†æˆçš„rubyç‰ˆæœ¬ä¹Ÿä¸ä¸€æ ·ã€‚æ‰€ä»¥æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®éœ€è¦å¯¹rubyç¯å¢ƒç»Ÿä¸€ç®¡ç†ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šç”¨åˆ°rvmäº†ã€‚é€šè¿‡rvmå¯ä»¥å‡çº§ç®¡ç†rubyã€‚é€šè¿‡ <figure class="highlight plain"><figcaption><span>ruby``` å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç›®å‰ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆrubyã€‚æ¯”å¦‚ ```/Users/xxx/.rvm/rubies/ruby-2.4.1/bin/ruby``` è¾“å‡ºçš„è·¯å¾„åŒ…å«äº† ```.rvm``` å°±è¯´æ˜ç›®å‰ä½¿ç”¨çš„æ˜¯rvmä¸‹çš„rubyã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">åˆ°æ­¤ä¸ºæ­¢ç¡®å®šäº†ç›®å‰ä½¿ç”¨çš„æ˜¯rvmçš„rubyï¼Œåœ¨æ·±å…¥å®šä½ä¸€ä¸‹ï¼Œé—®é¢˜æ˜¯å‡ºåœ¨rvmé‡æ–°å®šä¹‰äº† ```cd``` å‘½ä»¤</span><br></pre></td></tr></table></figure></p>
<p>$ type cd<br>cd is a function<br>cd ()<br>{<br>    __zsh_like_cd cd â€œ$@â€<br>}<br>$ unset cd<br>$ type cd<br>cd is a shell builtin<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ‰€ä»¥ï¼Œcloneä¸‹æ¥ä¸€ç›´å‡ºé”™çš„åŸå› æ˜¯cdå‘½ä»¤è¢«é‡å®šä¹‰äº†ï¼Œå¯¼è‡´è·¯å¾„åˆ‡æ¢çš„ä¸å¯¹ï¼Œæ— æ³•æ‰§è¡Œå‘½ä»¤ï¼Œè¿›è€ŒæŠ¥é”™ã€‚è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆgitlab-runnerä¸Šè¾“å‡ºçš„log ```exec /bin/sh --login\nelse\n\techo shell not found\n\texit 1\nfi\n\n</span><br></pre></td></tr></table></figure></p>
<h2 id="5-é—®é¢˜è§£å†³"><a href="#5-é—®é¢˜è§£å†³" class="headerlink" title="5.é—®é¢˜è§£å†³"></a>5.é—®é¢˜è§£å†³</h2><p>çŸ¥é“äº†åŸå› nameå¦‚ä½•è§£å†³å‘¢ï¼Ÿåˆšåˆšçš„é—®é¢˜é‡Œé¢ä¹Ÿç»™å‡ºäº†æ–¹æ¡ˆ<br>åœ¨ <figure class="highlight plain"><figcaption><span>æˆ– ```.bash_profile``` åŠ ä¸Š ```unset cd``` ã€‚</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ“ä½œå¦‚ä¸‹ï¼š</span><br></pre></td></tr></table></figure></p>
<p>1ã€æ‰“å¼€terminal(ç»ˆç«¯)<br>2ã€cd ~ ( è¿›å…¥å½“å‰ç”¨æˆ·çš„homeç›®å½•)<br>3ã€open .bash_profile (æ‰“å¼€.bash_profileæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å°±  åˆ›å»ºæ–‡ä»¶ï¼štouch .bash_profile  ç¼–è¾‘æ–‡ä»¶ï¼šopen -e bash_profile)<br>4ã€ç›´æ¥æ›´æ”¹å¼¹å‡ºçš„.bash_profileæ–‡ä»¶å†…å®¹<br>5ã€command + s ä¿å­˜æ–‡ä»¶ï¼Œç„¶åå…³é—­<br>6ã€åœ¨terminal(ç»ˆç«¯)ä¸­è¾“å…¥ source .bash_profile (ä½¿ç”¨åˆšæ‰æ›´æ–°ä¹‹åçš„å†…å®¹)<br>```<br>æˆ–è€…ç›´æ¥finderé‡Œé¢æ‰¾ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨ä¿®æ”¹ä¸€ä¸‹ã€‚</p>
<p><strong>ç­‰ç­‰ <code>.bashrc</code> <code>.bash_profile</code>åˆæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ unsetå‘¢ï¼Ÿ</strong><br>ç™¾åº¦äº†ä¸€ä¸‹è¿™äº›å¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š<br><a href="http://download.csdn.net/download/ygl_ygl/4354972" target="_blank" rel="noopener">profile\bashrc\bash_profileä¹‹é—´çš„åŒºåˆ«å’Œè”ç³»:</a></p>
<blockquote>
<p>/etc/profile        æ¯ä¸ªç”¨æˆ·ï¼Œé¦–æ¬¡ç™»å½•æ—¶è¢«æ‰§è¡Œï¼›<br>/etc/bashrc       æ¯ä¸ªè¿è¡Œbash shellçš„ç”¨æˆ·éƒ½æ‰§è¡Œæ­¤æ–‡ä»¶ï¼Œå½“bshè¢«æ‰“å¼€æ—¶ï¼Œè¯¥æ–‡ä»¶è¢«è¯»å–ï¼›<br>~/.bash_profile ä¸“ç”¨äºæœ¬ç”¨æˆ·çš„shellä¿¡æ¯ï¼Œä»…è¢«æ‰§è¡Œä¸€æ¬¡ï¼›<br>~/.bashrc          æ–‡ä»¶åŒ…å«æœ¬ç”¨æˆ·çš„bshä¿¡æ¯ï¼Œç™»å½•åŠæ¯æ¬¡æ‰“å¼€shellæ—¶è¢«è¯»å–ã€‚</p>
</blockquote>
<p>unsetæŒ‡ä»¤ï¼šåˆ é™¤æŒ‡å®šçš„shellå˜é‡æˆ–å‡½æ•°<br>ã€è¯­    æ³•ã€‘unset [-fv][å˜é‡æˆ–å‡½æ•°åç§°]<br>ã€åŠŸèƒ½ä»‹ç»ã€‘è¯¥æŒ‡ä»¤ä½œç”¨ä¸»è¦æ˜¯åˆ é™¤æŒ‡å®šçš„shellå˜é‡å’Œå‡½æ•°ã€‚</p>
<p>å› ä¸ºgitlab-runneræ³¨å†Œçš„æ—¶å€™<a href="https://docs.gitlab.com/runner/executors/README.html" target="_blank" rel="noopener">runner executor</a>ç”¨çš„shellï¼Œæ‰€ä»¥shellè„šæœ¬çš„è¯­æ³•æ˜¯é€‚ç”¨çš„ã€‚ä½¿ç”¨<code>unset cd</code>å°±æ„å‘³ç€æŠŠrvmé‡æ–°å®šä¹‰çš„cdæ–¹æ³•åˆ é™¤ï¼Œè¿™æ ·è·¯å¾„åˆ‡æ¢çš„æ—¶å€™å°±æ­£å¸¸äº†ã€‚gitlab-runneréƒ½èƒ½æ­£å¸¸è·‘èµ·æ¥äº†ã€‚</p>
<h2 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6.æ€»ç»“"></a>6.æ€»ç»“</h2><p>1.æ€è€ƒé—®é¢˜è§’åº¦è¦å…¨é¢ï¼Œä¸€å¥—å®Œæ•´çš„ä¸šåŠ¡æµç¨‹é‡Œå‡ºç°é—®é¢˜ï¼Œå¯ä»¥æ ¹æ®ä¸åŒè§’åº¦ï¼Œä¸åŒç«¯æƒ³é”™è¯¯ç‚¹é è¿‘ï¼Œé€ä¸ªçš„æ’æŸ¥ï¼›<br>2.å¤šå…³æ³¨debugä¿¡æ¯ï¼Œæ´»ç”¨debugè¾“å‡ºçš„logæœç´¢ä¿¡æ¯ï¼Œå°½é‡è°·æ­Œæœç´¢ï¼Œç™¾åº¦å¤ªåƒåœ¾ï¼›<br>3.shellè„šæœ¬æ˜¯ä¸ªç¥å¥‡çš„ä¸œè¥¿ï¼Œå·¥ä½œä¹‹ä½™å¯ä»¥å¤šå­¦ä¹ å­¦ä¹ ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/17/MethodsOfSwift/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/MethodsOfSwift/" itemprop="url">Swiftå¸¸ç”¨æ–¹æ³•æ€»ç»“----ä¸å®šæœŸæ›´æ–°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-17T17:25:43+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-æœ¬åœ°è¯»å–jsonæ–‡ä»¶"><a href="#1-æœ¬åœ°è¯»å–jsonæ–‡ä»¶" class="headerlink" title="1.æœ¬åœ°è¯»å–jsonæ–‡ä»¶"></a>1.æœ¬åœ°è¯»å–jsonæ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func readJsonFileByFileName(fileName : String) -&gt; Any? &#123;</span><br><span class="line">       </span><br><span class="line">       let path    = Bundle.main.path(forResource: &quot;\(fileName).json&quot;, ofType: nil)</span><br><span class="line">       let data    = NSData(contentsOfFile: path!)</span><br><span class="line">       let jsonStr = try? JSONSerialization.jsonObject(with: data! as Data, options:.allowFragments)</span><br><span class="line">       return jsonStr</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-å®ç°æ‰‹æœºå·é“¶è¡Œå¡å·è¾“å…¥åŠ ç©ºæ ¼"><a href="#2-å®ç°æ‰‹æœºå·é“¶è¡Œå¡å·è¾“å…¥åŠ ç©ºæ ¼" class="headerlink" title="2.å®ç°æ‰‹æœºå·é“¶è¡Œå¡å·è¾“å…¥åŠ ç©ºæ ¼"></a>2.å®ç°æ‰‹æœºå·é“¶è¡Œå¡å·è¾“å…¥åŠ ç©ºæ ¼</h3><p>egï¼š188 8888 8888</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -&gt; Bool &#123;</span><br><span class="line">        </span><br><span class="line">        let oldStr = textField.text</span><br><span class="line">        var newStr = (oldStr as NSString?)?.replacingCharacters(in: range, with: string)</span><br><span class="line">        if textField.placeholder == &quot;è¯·è¾“å…¥é“¶è¡Œé¢„ç•™æ‰‹æœºå·&quot; &#123;</span><br><span class="line">            </span><br><span class="line">            newStr = newStr?.replacingOccurrences(of: &quot; &quot;, with: &quot;&quot;)</span><br><span class="line">            </span><br><span class="line">            let expression = &quot;^([1]&#123;1&#125;([34578]&#123;1&#125;([0-9]&#123;0,9&#125;+)?)?)?$&quot;</span><br><span class="line">            let regex = try?NSRegularExpression.init(pattern: expression, options: .caseInsensitive)</span><br><span class="line">            let numOfMatches = regex?.matches(in: newStr!, options: NSRegularExpression.MatchingOptions(rawValue: 0), range: NSMakeRange(0, (newStr?.characters.count)!))</span><br><span class="line">            </span><br><span class="line">            if numOfMatches?.count == 0 &#123;</span><br><span class="line">                </span><br><span class="line">                return false</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            _ = self.formatPhoneNumText(textField: textField, range: range, string: string)</span><br><span class="line">            </span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line">        else if textField.placeholder == &quot;è¯·è¾“å…¥é“¶è¡Œå¡å·&quot;&#123;</span><br><span class="line">        </span><br><span class="line">            </span><br><span class="line">            // åªèƒ½è¾“å…¥æ•°å­—</span><br><span class="line">            let characterSet = NSCharacterSet.init(charactersIn: &quot;0123456789&quot;)</span><br><span class="line">            </span><br><span class="line">            let tempString = string.replacingOccurrences(of: &quot; &quot;, with: &quot;&quot;)</span><br><span class="line">            if (tempString.rangeOfCharacter(from: characterSet.inverted) != nil) &#123;</span><br><span class="line">                </span><br><span class="line">                return false</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            var text = ((oldStr as NSString?)?.replacingCharacters(in: range, with: string))!</span><br><span class="line">            text = text.replacingOccurrences(of: &quot; &quot;, with: &quot;&quot;)</span><br><span class="line">            </span><br><span class="line">            var newString = &quot;&quot;</span><br><span class="line">            </span><br><span class="line">            while (text.characters.count) &gt; 0 &#123;</span><br><span class="line">                </span><br><span class="line">                let subString = (text as NSString).substring(to: min(text.characters.count, 4))</span><br><span class="line">                newString = newString.appending(subString)</span><br><span class="line">                if subString.characters.count == 4 &#123;</span><br><span class="line">                    </span><br><span class="line">                    newString = newString.appending(&quot; &quot;)</span><br><span class="line">                &#125;</span><br><span class="line">                text = (text as NSString).substring(from: min(text.characters.count, 4))</span><br><span class="line">            &#125;</span><br><span class="line">            newString = newString.trimmingCharacters(in: characterSet.inverted)</span><br><span class="line">            </span><br><span class="line">            if newString.characters.count &gt;= 24 &#123;</span><br><span class="line">                </span><br><span class="line">                return false</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            if range.location != textField.text?.characters.count &#123;</span><br><span class="line">                </span><br><span class="line">                textField.text = newString</span><br><span class="line">                </span><br><span class="line">                return false</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            textField.text = newString</span><br><span class="line">            </span><br><span class="line">         </span><br><span class="line">            return false</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            // åªèƒ½è¾“å…¥æ•°å­—</span><br><span class="line">            let characterSet = NSCharacterSet.init(charactersIn: &quot;0123456789&quot;)</span><br><span class="line">            </span><br><span class="line">            let tempString = string.replacingOccurrences(of: &quot; &quot;, with: &quot;&quot;)</span><br><span class="line">            if (tempString.rangeOfCharacter(from: characterSet.inverted) != nil) &#123;</span><br><span class="line">                </span><br><span class="line">                return false</span><br><span class="line">            &#125;</span><br><span class="line">            if (newStr?.characters.count)! &gt; 20 &#123;</span><br><span class="line">                </span><br><span class="line">                return false</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">private func formatPhoneNumText (textField:UITextField, range:NSRange, string:String) -&gt; Bool &#123;</span><br><span class="line">        </span><br><span class="line">        var text = textField.text!</span><br><span class="line">        </span><br><span class="line">        // åªèƒ½è¾“å…¥æ•°å­—</span><br><span class="line">        let characterSet = NSCharacterSet.init(charactersIn: &quot;0123456789&quot;)</span><br><span class="line">        </span><br><span class="line">        let tempString = string.replacingOccurrences(of: &quot; &quot;, with: &quot;&quot;)</span><br><span class="line">        if (tempString.rangeOfCharacter(from: characterSet.inverted) != nil) &#123;</span><br><span class="line">            </span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        text = ((text as NSString?)?.replacingCharacters(in: range, with: string))!</span><br><span class="line">        text = text.replacingOccurrences(of: &quot; &quot;, with: &quot;&quot;)</span><br><span class="line">        </span><br><span class="line">        text.insert(&quot; &quot;, at: (text.startIndex))</span><br><span class="line">        var newString = &quot;&quot;</span><br><span class="line">        </span><br><span class="line">        while (text.characters.count) &gt; 0 &#123;</span><br><span class="line">            </span><br><span class="line">            let subString = (text as NSString).substring(to: min(text.characters.count, 4))</span><br><span class="line">            newString = newString.appending(subString)</span><br><span class="line">            if subString.characters.count == 4 &#123;</span><br><span class="line">                </span><br><span class="line">                newString = newString.appending(&quot; &quot;)</span><br><span class="line">            &#125;</span><br><span class="line">            text = (text as NSString).substring(from: min(text.characters.count, 4))</span><br><span class="line">        &#125;</span><br><span class="line">        newString = newString.trimmingCharacters(in: characterSet.inverted)</span><br><span class="line">        </span><br><span class="line">        if newString.characters.count &gt;= 14 &#123;</span><br><span class="line">            </span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        if range.location != textField.text?.characters.count &#123;</span><br><span class="line">            </span><br><span class="line">            textField.text = newString</span><br><span class="line">            </span><br><span class="line">            if textField == self.phoneTextField &#123;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        textField.text = newString</span><br><span class="line">        </span><br><span class="line">        if textField == self.phoneTextField &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-ç»™UITextFieldçš„placeholderè®¾ç½®å­—ä½“å¤§å°"><a href="#3-ç»™UITextFieldçš„placeholderè®¾ç½®å­—ä½“å¤§å°" class="headerlink" title="3.ç»™UITextFieldçš„placeholderè®¾ç½®å­—ä½“å¤§å°"></a>3.ç»™UITextFieldçš„placeholderè®¾ç½®å­—ä½“å¤§å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ï¼štextField.verticalLeftPlaceholder(phFontSize: 15)</span><br><span class="line"></span><br><span class="line">æºç ï¼š</span><br><span class="line">extension UITextField &#123;</span><br><span class="line">    </span><br><span class="line">    func verticalLeftPlaceholder(phFontSize size: CGFloat = 15, text: String = &quot;&quot;)  &#123;</span><br><span class="line">        </span><br><span class="line">        var placeholderStr = text</span><br><span class="line">        </span><br><span class="line">        if text.isEmpty &#123;</span><br><span class="line">            </span><br><span class="line">            placeholderStr = self.placeholder ?? &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        let pStyle = NSMutableParagraphStyle()</span><br><span class="line">        pStyle.minimumLineHeight    = (self.font?.lineHeight)! - ((self.font?.lineHeight)! - UIFont.systemFont(ofSize: size).lineHeight)/2.0</span><br><span class="line">        let aString = NSAttributedString(string: placeholderStr, attributes: [NSFontAttributeName: UIFont.systemFont(ofSize: size), NSParagraphStyleAttributeName: pStyle])</span><br><span class="line">        </span><br><span class="line">        self.attributedPlaceholder    = aString</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-æ’å…¥æ’åº"><a href="#4-æ’å…¥æ’åº" class="headerlink" title="4.æ’å…¥æ’åº"></a>4.æ’å…¥æ’åº</h3><p>â’ˆ ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº<br>â’‰ å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ<br>â’Š å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®<br>â’‹ é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®<br>â’Œ å°†æ–°å…ƒç´ æ’å…¥åˆ°ä¸‹ä¸€ä½ç½®ä¸­<br>â’ é‡å¤æ­¥éª¤2~5</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public func insertionSort(arr: inout Array&lt;Int&gt;) &#123;</span><br><span class="line"></span><br><span class="line">    for i in 0..&lt;arr.count - 1 &#123;</span><br><span class="line">        if arr[i + 1] &lt; arr[i] &#123;</span><br><span class="line">            let temp = arr[i + 1]</span><br><span class="line">            for j in (1...(i + 1)).reversed() &#123;</span><br><span class="line">                if arr[j - 1] &gt; temp &#123;</span><br><span class="line">                    (arr[j - 1],arr[j]) = (arr[j],arr[j - 1])</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-å†’æ³¡æ’åº"><a href="#5-å†’æ³¡æ’åº" class="headerlink" title="5.å†’æ³¡æ’åº"></a>5.å†’æ³¡æ’åº</h3><p>â’ˆæ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚<br>â’‰ å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚åœ¨è¿™ä¸€ç‚¹ï¼Œæœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚<br>â’Š é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚<br>â’‹ æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public func bubbleSort(arr: inout Array&lt;Int&gt;) &#123;</span><br><span class="line">    for i in 0..&lt;(arr.count - 1) &#123;</span><br><span class="line">        for j in 0..&lt;(arr.count - i - 1) &#123;</span><br><span class="line">            if arr[j] &gt; arr[j + 1] &#123;</span><br><span class="line">                (arr[j],arr[j + 1]) = (arr[j + 1],arr[j])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="6-å¿«é€Ÿæ’åºï¼ˆå†’æ³¡æ’åºçš„æ”¹è¿›ç‰ˆï¼‰"><a href="#6-å¿«é€Ÿæ’åºï¼ˆå†’æ³¡æ’åºçš„æ”¹è¿›ç‰ˆï¼‰" class="headerlink" title="6.å¿«é€Ÿæ’åºï¼ˆå†’æ³¡æ’åºçš„æ”¹è¿›ç‰ˆï¼‰"></a>6.å¿«é€Ÿæ’åºï¼ˆå†’æ³¡æ’åºçš„æ”¹è¿›ç‰ˆï¼‰</h3><p>â’ˆè®¾ç½®ä¸¤ä¸ªå˜é‡iã€jï¼Œæ’åºå¼€å§‹çš„æ—¶å€™ï¼ši=0ï¼Œj=n-1ã€‚<br>â’‰ ä»¥ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ ä½œä¸ºå…³é”®æ•°æ®ï¼Œèµ‹å€¼ç»™keyï¼Œå³key=A[0]ã€‚<br>â’Š ä»jå¼€å§‹å‘å‰æœç´¢ï¼Œå³ç”±åå¼€å§‹å‘å‰æœç´¢(jâ€“)ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºkeyçš„å€¼A[j]ï¼Œå°†A[j]å’ŒA[i]äº’æ¢ã€‚<br>â’‹ ä»iå¼€å§‹å‘åæœç´¢ï¼Œå³ç”±å‰å¼€å§‹å‘åæœç´¢(i++)ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºkeyçš„A[i]ï¼Œå°†A[i]å’ŒA[j]äº’æ¢ã€‚<br>â’Œé‡å¤ç¬¬3ã€4æ­¥ï¼Œç›´åˆ°i=j<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> public func quickSort(arr: inout Array&lt;Int&gt;, leftIndex:  Int, rightIndex:  Int) &#123;</span><br><span class="line"></span><br><span class="line">    if leftIndex &lt; rightIndex &#123;</span><br><span class="line">        var left = leftIndex</span><br><span class="line">        var right = rightIndex</span><br><span class="line">        let midIndex = getMidIndex(arr: &amp;mArray, leftIndex: &amp;left, rightIndex: &amp;right)</span><br><span class="line">        quickSort(arr: &amp;mArray, leftIndex: leftIndex, rightIndex: midIndex - 1)</span><br><span class="line">        quickSort(arr: &amp;mArray, leftIndex: midIndex + 1, rightIndex: rightIndex)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private func getMidIndex(arr: inout Array&lt;Int&gt;, leftIndex: inout Int, rightIndex: inout Int) -&gt; (Int) &#123;</span><br><span class="line">    let temp = arr[leftIndex]</span><br><span class="line">    while leftIndex &lt; rightIndex &#123;</span><br><span class="line"></span><br><span class="line">        while leftIndex &lt; rightIndex &amp;&amp; temp &lt;= arr[rightIndex] &#123;</span><br><span class="line">            rightIndex -= 1</span><br><span class="line">        &#125;</span><br><span class="line">        if leftIndex &lt; rightIndex &#123;</span><br><span class="line">            arr[leftIndex] = arr[rightIndex]</span><br><span class="line">        &#125;</span><br><span class="line">        while leftIndex &lt; rightIndex &amp;&amp; arr[leftIndex] &lt;= temp &#123;</span><br><span class="line">            leftIndex += 1</span><br><span class="line">        &#125;</span><br><span class="line">        if leftIndex &lt; rightIndex &#123;</span><br><span class="line">            arr[rightIndex] = arr[leftIndex]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    arr[leftIndex] = temp</span><br><span class="line">    return leftIndex</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="7-å½’å¹¶æ’åºï¼ˆé€Ÿåº¦ä»…æ¬¡äºå¿«é€Ÿæ’åºï¼‰"><a href="#7-å½’å¹¶æ’åºï¼ˆé€Ÿåº¦ä»…æ¬¡äºå¿«é€Ÿæ’åºï¼‰" class="headerlink" title="7.å½’å¹¶æ’åºï¼ˆé€Ÿåº¦ä»…æ¬¡äºå¿«é€Ÿæ’åºï¼‰"></a>7.å½’å¹¶æ’åºï¼ˆé€Ÿåº¦ä»…æ¬¡äºå¿«é€Ÿæ’åºï¼‰</h3><p>â’ˆå°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼ˆmerge)ï¼Œå½¢æˆfloor(n/2)ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ ã€‚<br>â’‰ å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆfloor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ ã€‚<br>â’Š é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"> public func mergeSort(arr: inout Array&lt;Int&gt;) &#123;</span><br><span class="line">    var tempArr: Array&lt;Array&lt;Int&gt;&gt; = []</span><br><span class="line">    for item in arr &#123;</span><br><span class="line">       var subArr: Array&lt;Int&gt; = []</span><br><span class="line">       subArr.append(item)</span><br><span class="line">       tempArr.append(subArr)</span><br><span class="line">    &#125;</span><br><span class="line">    while tempArr.count != 1 &#123;</span><br><span class="line">        var i = 0</span><br><span class="line">        while i &lt; tempArr.count - 1 &#123;</span><br><span class="line">            tempArr[i] = mergeTowArr(arr1: tempArr[i], arr2: tempArr[i+1])</span><br><span class="line">            tempArr.remove(at : i+1)</span><br><span class="line">            i += 1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">private func mergeTowArr(arr1: Array&lt;Int&gt;, arr2: Array&lt;Int&gt;) -&gt; Array&lt;Int&gt; &#123;</span><br><span class="line">    var mergeArr: Array&lt;Int&gt; = []</span><br><span class="line">    var firstIndex = 0</span><br><span class="line">    var secondIndex = 0</span><br><span class="line">    while firstIndex &lt; arr1.count &amp;&amp; secondIndex &lt; arr2.count &#123;</span><br><span class="line">        if arr1[firstIndex]  &lt; arr2[secondIndex] &#123;</span><br><span class="line">            merge.append(arr1[firstIndex])</span><br><span class="line">            firstIndex += 1</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            merge.append(arr2[secondIndex])</span><br><span class="line">            secondIndex += 1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    while firstIndex &lt; arr1.count &#123;</span><br><span class="line">         merge.append(arr1[firstIndex])</span><br><span class="line">         firstIndex += 1</span><br><span class="line">    &#125;</span><br><span class="line">    while secondIndex &lt; arr2.count &#123;</span><br><span class="line">         merge.append(arr2[secondIndex])</span><br><span class="line">         secondIndex += 1</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return mergeArr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="8-é€‰æ‹©æ’åº"><a href="#8-é€‰æ‹©æ’åº" class="headerlink" title="8.é€‰æ‹©æ’åº"></a>8.é€‰æ‹©æ’åº</h3><p>é€‰æ‹©æ’åºï¼ˆSelection sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯æ¯ä¸€æ¬¡ä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œå­˜æ”¾åœ¨åºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ æ’å®Œã€‚ é€‰æ‹©æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºæ–¹æ³•ï¼ˆæ¯”å¦‚åºåˆ—[5ï¼Œ 5ï¼Œ 3]ç¬¬ä¸€æ¬¡å°±å°†ç¬¬ä¸€ä¸ª[5]ä¸[3]äº¤æ¢ï¼Œå¯¼è‡´ç¬¬ä¸€ä¸ª5æŒªåŠ¨åˆ°ç¬¬äºŒä¸ª5åé¢ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public func selectSort(arr: inout Array&lt;Int&gt;) &#123;</span><br><span class="line">    for i in 0..&lt;arr.count &#123;</span><br><span class="line">        var index = i</span><br><span class="line">        for j in (i + 1)..&lt;arr.count &#123;</span><br><span class="line">            if arr[index] &gt; arr[j] &#123;</span><br><span class="line">                index = j</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if index != i &#123;</span><br><span class="line">            (arr[i],arr[index]) = (arr[index],arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="9-å †æ’åºï¼ˆé€‰æ‹©æ’åºçš„ä¸€ç§ï¼‰"><a href="#9-å †æ’åºï¼ˆé€‰æ‹©æ’åºçš„ä¸€ç§ï¼‰" class="headerlink" title="9.å †æ’åºï¼ˆé€‰æ‹©æ’åºçš„ä¸€ç§ï¼‰"></a>9.å †æ’åºï¼ˆé€‰æ‹©æ’åºçš„ä¸€ç§ï¼‰</h3><p>é€šè¿‡headMakeFromå°†æ•°ç»„arrå˜ä¸ºå¤§é¡¶å †ï¼Œå†æŠŠå¤§é¡¶å †çš„ç¬¬ä¸€å€¼å’Œæœ€åä¸€ä¸ªå€¼äº¤æ¢ï¼Œæ•°ç»„é•¿åº¦å‡1ã€‚é€šè¿‡heapAdjastå°†äº¤æ¢åçš„æ•°ç»„é‡æ–°æ’åºæˆå¤§é¡¶å †ç›´åˆ°æ•°ç»„é•¿åº¦ä¸º0ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public func heapSort(arr: inout Array&lt;Int&gt;) &#123;//æ—¶é—´å¤æ‚åº¦O(n*logn)</span><br><span class="line">    var endIndex = arr.count - 1</span><br><span class="line">    headMakeFrom(arr: &amp;arr)</span><br><span class="line"></span><br><span class="line">    while endIndex &gt; 0 &#123;</span><br><span class="line">        (arr[0],arr[endIndex]) = (arr[endIndex],arr[0])</span><br><span class="line">        heapAdjast(arr: &amp;arr,starIndex: 1, arrLength: endIndex)</span><br><span class="line">        endIndex -= 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">private func heapMakeFrom(arr: inout Array&lt;Int&gt;) &#123;</span><br><span class="line">    var lastHead = arr.count/2</span><br><span class="line">    while lastHead &gt; 0 &#123;</span><br><span class="line">        heapAdjast(arr:  &amp;arr, starIndex: lastHead, arrLenght: arr.count)</span><br><span class="line">        lastHead -= 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private func heapAdjast(arr: Array&lt;Int&gt;, starIndex: Int, arrLength: Int) &#123;</span><br><span class="line">    var temp = arr[starIndex - 1]</span><br><span class="line">    var parentIndex = starIndex</span><br><span class="line">    var childIndex = 2 * parentIndex</span><br><span class="line">    while childIndex &lt;= arrLength &#123;</span><br><span class="line">        if childIndex &lt; arrLength &amp;&amp; arr[childIndex] &gt; arr[childIndex - 1] &#123;</span><br><span class="line">            childIndex += 1</span><br><span class="line">        &#125;</span><br><span class="line">        if arr[childIndex-1] &gt; temp &#123;</span><br><span class="line">            arr[parentIndex - 1] = arr[childIndex - 1]</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            break </span><br><span class="line">        &#125;</span><br><span class="line">        parentIndex = childIndex</span><br><span class="line">        childIndex = 2 * parentIndex </span><br><span class="line">    &#125;</span><br><span class="line">    arr[parentIndex - 1] = temp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-ç”ŸæˆæŒ‡å®šå°ºå¯¸çš„çº¯è‰²å›¾ç‰‡"><a href="#10-ç”ŸæˆæŒ‡å®šå°ºå¯¸çš„çº¯è‰²å›¾ç‰‡" class="headerlink" title="10. ç”ŸæˆæŒ‡å®šå°ºå¯¸çš„çº¯è‰²å›¾ç‰‡"></a>10. ç”ŸæˆæŒ‡å®šå°ºå¯¸çš„çº¯è‰²å›¾ç‰‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">func imageWithColor(color: UIColor!, size: CGSize) -&gt; UIImage&#123;</span><br><span class="line">    var size = size</span><br><span class="line">    if CGSizeEqualToSize(size, CGSizeZero)&#123;</span><br><span class="line">        size = CGSizeMake(1, 1)</span><br><span class="line">    &#125;</span><br><span class="line">    let rect = CGRectMake(0, 0, size.width, size.height)</span><br><span class="line">    UIGraphicsBeginImageContext(rect.size)</span><br><span class="line">    let context = UIGraphicsGetCurrentContext()</span><br><span class="line">    CGContextSetFillColorWithColor(context, color.CGColor)</span><br><span class="line">    CGContextFillRect(context, rect)</span><br><span class="line"></span><br><span class="line">    let image = UIGraphicsGetImageFromCurrentImageContext()</span><br><span class="line">    UIGraphicsEndImageContext()</span><br><span class="line">    return image</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-ä¿®æ”¹å›¾ç‰‡å°ºå¯¸"><a href="#11-ä¿®æ”¹å›¾ç‰‡å°ºå¯¸" class="headerlink" title="11- ä¿®æ”¹å›¾ç‰‡å°ºå¯¸"></a>11- ä¿®æ”¹å›¾ç‰‡å°ºå¯¸</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">func imageScaleToSize(image: UIImage, size: CGSize) -&gt; UIImage&#123;</span><br><span class="line">    // åˆ›å»ºä¸€ä¸ªbitmapçš„context</span><br><span class="line">    // å¹¶æŠŠå®ƒè®¾ç½®æˆä¸ºå½“å‰æ­£åœ¨ä½¿ç”¨çš„context</span><br><span class="line">    // Determine whether the screen is retina</span><br><span class="line">    if UIScreen.mainScreen().scale == 2.0&#123;</span><br><span class="line">        UIGraphicsBeginImageContextWithOptions(size, false, 2.0)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        UIGraphicsBeginImageContext(size)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ç»˜åˆ¶æ”¹å˜å¤§å°çš„å›¾ç‰‡</span><br><span class="line">    image.drawInRect(CGRectMake(0, 0, size.width, size.height))</span><br><span class="line"></span><br><span class="line">    // ä»å½“å‰contextä¸­åˆ›å»ºä¸€ä¸ªæ”¹å˜å¤§å°åçš„å›¾ç‰‡</span><br><span class="line">    let scaledImage = UIGraphicsGetImageFromCurrentImageContext()</span><br><span class="line"></span><br><span class="line">    // ä½¿å½“å‰çš„contextå‡ºå †æ ˆ</span><br><span class="line">    UIGraphicsEndImageContext()</span><br><span class="line"></span><br><span class="line">    // è¿”å›æ–°çš„æ”¹å˜å¤§å°åçš„å›¾ç‰‡</span><br><span class="line">    return scaledImage</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="12-å‹ç¼©å›¾ç‰‡å¤§å°"><a href="#12-å‹ç¼©å›¾ç‰‡å¤§å°" class="headerlink" title="12. å‹ç¼©å›¾ç‰‡å¤§å°"></a>12. å‹ç¼©å›¾ç‰‡å¤§å°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func imageCompress(originalImage: UIImage) -&gt; UIImage&#123;</span><br><span class="line">    guard let imageData = UIImageJPEGRepresentation(originalImage, 0.5) else&#123;</span><br><span class="line">        return originalImage</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    let compressImage = UIImage(data: imageData)!</span><br><span class="line">    return compressImage</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/17/FastlaneWithXcode9Issue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/FastlaneWithXcode9Issue/" itemprop="url">å½“Fastlaneé‡åˆ°Xcode9æ‰“åŒ…å‡ºæ¥ä¸ä¸€å®šæ˜¯ipaè€Œæ˜¯å‘</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-17T13:49:19+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Fastlaneç®€ä»‹"><a href="#Fastlaneç®€ä»‹" class="headerlink" title="Fastlaneç®€ä»‹"></a>Fastlaneç®€ä»‹</h2><p><a href="https://fastlane.tools/" target="_blank" rel="noopener">Fastlane</a>  æ˜¯ç”¨Rubyè¯­è¨€ç¼–å†™çš„ä¸€å¥—è‡ªåŠ¨åŒ–å·¥å…·é›†å’Œæ¡†æ¶ï¼Œæ¯ä¸€ä¸ªå·¥å…·å®é™…éƒ½å¯¹åº”ä¸€ä¸ªRubyè„šæœ¬ï¼Œç”¨æ¥æ‰§è¡ŒæŸä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ã€‚Fastlaneçš„å¼ºå¤§ä¹‹å¤„ï¼Œå°±æ˜¯å¯ä»¥å°†ä¸åŒçš„å·¥å…·ï¼ˆ<a href="https://docs.fastlane.tools/actions/" target="_blank" rel="noopener">action</a>ï¼‰æœ‰æœºè€Œçµæ´»çš„ç»“åˆåœ¨ä¸€èµ·ï¼Œä»è€Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹ï¼Œå¤§å¤§æé«˜äº†æ—¥å¸¸çš„å¼€å‘æµ‹è¯•æ•ˆç‡ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ã€‚<br>å¦‚æœä½ å°šæœªä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥ç‚¹å‡»ä¸€ä¸‹å‡ ç¯‡æ–‡ç« å­¦ä¹ å¦‚ä½•ä½¿ç”¨ï¼š<br><a href="http://www.jianshu.com/p/6e6503b47453">ã€CIã€‘æŒç»­é›†æˆ-å¼•å¯¼ç¯‡</a><br><a href="http://www.jianshu.com/p/2d88a88467a5">ã€CIã€‘æŒç»­é›†æˆ-ç¬¬ä¸€ç¯‡ fastlane</a></p>
<h2 id="èƒŒæ™¯-amp-ç°è±¡"><a href="#èƒŒæ™¯-amp-ç°è±¡" class="headerlink" title="èƒŒæ™¯&amp;ç°è±¡"></a>èƒŒæ™¯&amp;ç°è±¡</h2><p>å…¬å¸é¡¹ç›®æ—¥å¸¸å¼€å‘ä¸­ï¼Œå·²ç»ä½¿ç”¨äº†fastlaneï¼Œé…åˆgitlabä¸€èµ·å®ç°è‡ªåŠ¨æ‰“åŒ…ä»¥åŠåˆ†å‘ï¼Œä½¿ç”¨æœŸé—´æ„Ÿè§‰å¾ˆé¡ºç•…ï¼Œæ²¡æœ‰å‡ºè¿‡ä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯ï¼Œè‡ªä»Xcodeå‡çº§åˆ°Xcode9æ­£å¼ç‰ˆä¹‹åæ‰“åŒ…ä¸€ç›´å‡ºé—®é¢˜ï¼Œæ‰“ä¸äº†åŒ…ã€‚</p>
<h5 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h5><p>fastlaneç‰ˆæœ¬ï¼š 2.59.0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">| Key                         | Value                                       |</span><br><span class="line">| --------------------------- | ------------------------------------------- |</span><br><span class="line">| OS                          | 10.13                                       |</span><br><span class="line">| Ruby                        | 2.3.3                                       |</span><br><span class="line">| Bundler?                    | false                                       |</span><br><span class="line">| Git                         | git version 2.13.5 (Apple Git-94)           |</span><br><span class="line">| Installation Source         | ~/.rvm/gems/ruby-2.3.3/bin/fastlane         |</span><br><span class="line">| Host                        | Mac OS X 10.13 (17A365)                     |</span><br><span class="line">| Ruby Lib Dir                | ~/.rvm/rubies/ruby-2.3.3/lib                |</span><br><span class="line">| OpenSSL Version             | OpenSSL 1.0.2k  26 Jan 2017                 |</span><br><span class="line">| Is contained                | false                                       |</span><br><span class="line">| Is homebrew                 | false                                       |</span><br><span class="line">| Is installed via Fabric.app | false                                       |</span><br><span class="line">| Xcode Path                  | /Applications/Xcode.app/Contents/Developer/ |</span><br><span class="line">| Xcode Version               | 9.0                                         |</span><br><span class="line"></span><br><span class="line">*generated on:* **2017-09-30**</span><br></pre></td></tr></table></figure></p>
<p>å·¥ç¨‹é¡¹ç›®ä¸­ provisioning profileï¼ˆä»¥ä¸‹ç®€ç§°ppæ–‡ä»¶)ï¼Œçµæ´»è¿ç”¨äº†matchè¿™ä¸ªactionå¤–åŠ æ‰‹åŠ¨é…ç½®ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-1697cd95bad7cd6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å·¥ç¨‹é…ç½®.png"></p>
<h4 id="é”™è¯¯æè¿°ï¼š"><a href="#é”™è¯¯æè¿°ï¼š" class="headerlink" title="é”™è¯¯æè¿°ï¼š"></a>é”™è¯¯æè¿°ï¼š</h4><p><img src="http://upload-images.jianshu.io/upload_images/1447375-d1045b328b601048.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="error.png"><br>çœ‹åˆ°äº†æ¡†æ¡†çš„é‚£å¥è¯ï¼Œåˆšå¼€å§‹ä»¥ä¸ºæ˜¯æ¨é€è¯ä¹¦æˆ–è€…æ˜¯provisioning profileçš„é—®é¢˜ï¼Œç„¶åæ‰‹åŠ¨åœ¨æ­¤æ‰§è¡Œäº†matchï¼ŒæŠŠè¯ä¹¦ä»€ä¹ˆçš„é‡Œé‡Œå¤–å¤–æ›´æ–°äº†ä¸€éï¼Œå‘ç°è¿˜æ˜¯ä¸èµ·ä½œç”¨ã€‚æ²¡åŠæ³•ï¼Œåªèƒ½ç¿»çœ‹github çœ‹çœ‹issueï¼Œçœ‹çœ‹æœ‰æœ¨æœ‰ç±»ä¼¼çš„å¤„ç†æ–¹æ¡ˆã€‚</p>
<h5 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h5><p>åŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œå–µç¥å¤§ä½¬é“ç ´çœŸç›¸ï¼š<br><a href="https://github.com/fastlane/fastlane/issues/9589" target="_blank" rel="noopener">Xcode9å°†ä¸ä¼šå…è®¸ä½ è®¿é—®é’¥åŒ™ä¸²é‡Œçš„å†…å®¹ï¼Œé™¤éè®¾ç½®allowProvisioningUpdatesã€‚</a></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-79ee4612a68db052.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç¤¾ä¼šæˆ‘å–µç¥.png"><br>æ‰€ä»¥è¯´ï¼Œåœ¨æ‰§è¡Œxcode -exportArchiveçš„æ—¶å€™ï¼Œå› ä¸ºæƒé™è®¿é—®é’¥åŒ™ä¸²ï¼Œæ‰€ä»¥æ— æ³•è¯»å–åˆ°é¡¹ç›®å·¥ç¨‹é‡Œçš„ppæ–‡ä»¶ï¼Œè¿›è€Œæ‰“åŒ…å¤±è´¥ï¼Œå¹¶ä¸”æŠ¥é”™è¯´ç¼ºå°‘ppæ–‡ä»¶ã€‚</p>
<p>æ‰€ä»¥è§£å†³æ–¹æ³•ï¼Œåœ¨ä½ çš„fastfileé‡Œgym actionåŠ å…¥ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>gym(<br>    scheme: scheme,<br>    export_method: â€œad-hocâ€,<br>    silent:true,<br>    output_directory:outputDirectory,<br>    output_name:ipaName,<br>    archive_path:outputDirectory,<br>    export_xcargs: â€œ-allowProvisioningUpdatesâ€,<br>)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ä¿å­˜ï¼Œå†æ‰§è¡Œä¸€æ¬¡æ‰“åŒ…å‘½ä»¤ï¼Œè¯·æ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™xcodeä¼šå¼¹çª—è®©ä½ ç¡®è®¤ï¼Œç‚¹```ä¸€ç›´å…è®¸```å°±æ˜¯äº†ã€‚ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå’Œæˆ‘ä»¬å…¬å¸ä¸€æ ·çš„ç¯å¢ƒï¼Œé‚£ä¹ˆé‚£å°è¿œç¨‹æ‰“åŒ…çš„æœåŠ¡å™¨ï¼Œåœ¨æ›´æ–°å®Œfastfileç¬¬ä¸€æ¬¡è·‘çš„æ—¶å€™ï¼Œè¦è¿œç¨‹è¿æ¥ä¸Šå»æ‰‹åŠ¨ç‚¹å‡»ç¡®è®¤æ¡†ï¼Œä¸ç„¶æ‰“åŒ…è„šæœ¬å°±ä¼šä¸€ç›´å¡åœ¨é‚£é‡Œã€‚</span><br><span class="line">![image.png](http://upload-images.jianshu.io/upload_images/1447375-5dd59d3cb0fb6fd9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line"></span><br><span class="line">åˆ°æ­¤ä¸ºæ­¢ï¼ŒXcode9è¯»å–é’¥åŒ™ä¸²æƒé™çš„é—®é¢˜å°±ç»“æŸäº†ã€‚</span><br><span class="line">## ä½†æ˜¯ï¼Œä½ ä»¥ä¸ºè¿™æ ·å°±ç»“æŸäº†å—ï¼Ÿå°±èƒ½æ‰“åŒ…æˆåŠŸäº†å—ï¼Ÿ</span><br><span class="line"></span><br><span class="line">ç´§æ¥ç€åˆæ˜¯å¦å¤–ä¸€ä¸ªé”™è¯¯ï¼š</span><br><span class="line">![ä¸åŒ¹é….png](http://upload-images.jianshu.io/upload_images/1447375-3aeed0119a88534a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">WTFï¼Œæ˜æ˜æ‰“åŒ…æ–¹å¼æ˜¯ad-hocï¼Œä½†æ˜¯åŒ¹é…çš„ppæ–‡ä»¶ç¡®æ˜¯AppStoreçš„ï¼ŸğŸ˜“ğŸ˜“</span><br><span class="line">## è¿™å¿…ç„¶æ˜¯ä¸ªå‘</span><br><span class="line">åœ¨æ­¤æ‰“å¼€äº†[å®˜æ–¹æ–‡æ¡£](https://docs.fastlane.tools/codesigning/xcode-project/)çœ‹åˆ°äº†è¿™ä¹ˆä¸€å¥è¯</span><br><span class="line">![image.png](http://upload-images.jianshu.io/upload_images/1447375-bf3da1d9b383afb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">ç¿»è¯‘ä¸€ä¸‹ï¼Œå¦‚æœä½ ä»¬æ²¡ç”¨matchè¿™ä¸ªactionï¼Œæ¥ç®¡ç†ppæ–‡ä»¶ï¼Œæˆ‘ä»¬æ¨èä½ åœ¨fastfileé‡Œé¢ï¼Œè‡ªå·±å®šä¹‰ä¸€ä¸ªmapï¼ŒæŒ‡å®šbundleID å’Œ ppæ–‡ä»¶ï¼Œä»¥ä¿è¯èƒ½å¤Ÿæ­£å¸¸æ„å»ºappã€‚ä½†æ˜¯æˆ‘åœ¨æ–‡ç« å¼€å¤´å°±poå›¾äº†ï¼Œæˆ‘é¡¹ç›®å·¥ç¨‹é‡Œçš„ppæ–‡ä»¶éƒ½æ˜¯ç”¨matchæ¥ç®¡ç†çš„ã€‚æ‰€ä»¥åˆšå¼€å§‹ï¼Œè¿™æ®µè¯è¢«æˆ‘å¿½ç•¥äº†ã€‚åç»­åˆæ˜¯ä¸€é˜µåœ¨github issueä¸Šæ¼«æ¸¸ã€‚https://github.com/fastlane/fastlane/issues/10315 æ‰¾åˆ°ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ã€‚</span><br><span class="line">##### æ—¢ç„¶bundleIDï¼Œæˆ–è€…ppæ–‡ä»¶ä¸å¯¹ï¼Œé‚£æˆ‘èƒ½ä¸èƒ½å°è¯•ç€ä¸»åŠ¨å†™æ­»æ­£ç¡®çš„bundleIDå’Œppæ–‡ä»¶åï¼Œæ”¾è¿›fastfileï¼Ÿ</span><br><span class="line">äºæ˜¯æŠŠgymåŠ äº†ä¸ªå‚æ•°ï¼Œä¸åŒç¯å¢ƒä¸‹æŒ‡å®šå¥½ï¼š</span><br></pre></td></tr></table></figure></p>
<pre><code>gym(
    scheme: scheme,
    export_method: &quot;ad-hoc&quot;,
    silent:true,
    output_directory:outputDirectory,
    output_name:ipaName,
    archive_path:outputDirectory,
    export_xcargs: &quot;-allowProvisioningUpdates&quot;,
    export_options: {
        provisioningProfiles: {
            app_identifier =&gt; &quot;match AdHoc #{app_identifier}&quot;
        }
    }
)
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ä¿å­˜ï¼Œé‡æ–°runæ‰“åŒ…è„šæœ¬ï¼Œç»ˆäºå¯ä»¥æˆåŠŸæ‰“åŒ…äº†ğŸ˜ğŸ˜„ã€‚</span><br><span class="line">![oh yeah.png](http://upload-images.jianshu.io/upload_images/1447375-12a45d828532d107.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## ç®€å•è¯´è¯´Xcode8å’Œ9æ‰“åŒ…</span><br><span class="line">ç¬”è€…ç”±äºfastlaneé—®é¢˜æ²¡è§£å†³ï¼Œæ‰€ä»¥è¿™æœŸé—´æ‰“åŒ…å·¥ä½œéƒ½æ˜¯æ‰‹åŠ¨å®Œæˆçš„ï¼Œ``` Product - Archive ```ç„¶åç­‰å¾…Xcodeè‡ªåŠ¨æ‰“ï¼Œè¿™äº›æ“ä½œç›¸ä¿¡å¤§å®¶éƒ½ä¼šçš„ï¼Œä¸å¤šè¯´äº†ã€‚é€‰æ‹©æµ‹è¯•åŒ…ä¹‹åï¼Œå¼¹å‡ºæ¡†æ¡†é—®ä½ æ˜¯å¦ç˜¦èº«ï¼Œä¸€èˆ¬åˆ«ç®¡å°±æ˜¯ã€‚ç„¶åé‡ç‚¹æ¥äº†ï¼Œç›¸æ¯”Xcode8å¤šäº†è¿™ä¹ˆä¸ªé¡µé¢ï¼š</span><br><span class="line">![image.png](http://upload-images.jianshu.io/upload_images/1447375-a1ad5f89db8449ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">é€‰æ‹©ppæ–‡ä»¶ï¼Œä»ç½‘ç»œè·å–ï¼ŒXcodeå¿…é¡»è¦ç™»å½•å¼€å‘è€…è´¦å·ï¼Œä»è´¦å·é‡Œé¢æ‹‰å–ç›¸å…³ppæ–‡ä»¶ï¼Œè¿˜è¦è‡ªå·±é€‰æ‹©æ˜¯å“ªä¸ªã€‚</span><br><span class="line">![image.png](http://upload-images.jianshu.io/upload_images/1447375-e0b6232d81dae8eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">å¹³æ—¶çš„æµ‹è¯•åŒ…é€‰æ‹©â€œad-hocâ€å°±æ˜¯ï¼Œç„¶åæ¥ç€ç”Ÿäº§ipaã€‚åœ¨Xcode8é‡Œï¼Œæœ€ç»ˆç”Ÿæˆçš„ä¸€ä¸ªipaæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å°±ä¸€ä¸ªipaï¼Œä½†æ˜¯xcode9é™¤äº†ipaä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¸œè¥¿ï¼Œå¦‚ä¸‹å›¾ã€‚</span><br><span class="line">![image.png](http://upload-images.jianshu.io/upload_images/1447375-1d881fb388b187c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">é™¤äº†ipaä¹‹å¤–ï¼Œæœ‰ä¸ªä¸œè¥¿å¼•èµ·äº†æˆ‘çš„æ³¨æ„```ExportOptions.plist ``` é¢„è§ˆäº†ä¸€ä¸‹è¿™ä¸ªplistï¼Œé‡Œé¢å°±è®°å½•äº†åˆšåˆšä¸Šå‡ æ­¥çš„ä¸€äº›é€‰æ‹©é¡¹ã€‚æ¯”å¦‚ç˜¦èº«é€‰é¡¹ï¼Œè¿˜æœ‰ä¸ªå¾ˆå…³é”®çš„ä¸œè¥¿``` provisioningProfile```è¿™ä¸ªå­—æ®µæ˜¯ä¸ªdictionaryã€‚</span><br><span class="line">![image.png](http://upload-images.jianshu.io/upload_images/1447375-df5bc2f32e68d04a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line"> ### éš¾é“æ²¡æœ‰ä¸€ç§ä¼¼æ›¾ç›¸è¯†çš„èµ¶è„šï¼Ÿ</span><br><span class="line">å†æ¬¡çœ‹çœ‹è¿™å¼ å›¾ï¼š</span><br><span class="line">![error.png](http://upload-images.jianshu.io/upload_images/1447375-d1045b328b601048.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">çº¢æ¡†æ¡†çš„éƒ¨åˆ†çš„æœ€åï¼Œè¯´çš„plistå°±æ˜¯å®ƒã€‚è¿™ä¸ªå°±æ˜¯Xcodeåœ¨å¯¼å‡ºipaçš„æ—¶å€™ä¸€äº›å‚æ•°ã€‚å¦å¤–ï¼Œæ‰‹åŠ¨Xcodeæ‰“åŒ…å’Œåœ¨ç»ˆç«¯é‡Œé¢æ•² xcodebuild -archivePathï¼Œxcodebuild -exportArchive -exportOptionsPlist æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æ‰“åŒ…ï¼Œå‚æ•°å°±æ˜¯åŒä¸€ä¸ªã€‚</span><br><span class="line">å†å›è¿‡å¤´æ¥ï¼Œçœ‹çœ‹æˆ‘ä»¬æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬åœ¨gymä¸­æ·»åŠ äº†ä¸€ä¸ªå­—æ®µï¼Œå°±æ˜¯åœ¨å†™å‚æ•°è€Œå·²</span><br><span class="line">``` </span><br><span class="line">export_options: &#123;</span><br><span class="line">				provisioningProfiles: &#123;</span><br><span class="line">					app_identifier =&gt; &quot;match AdHoc #&#123;app_identifier&#125;&quot;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯èƒ½åŸå› "><a href="#å¯èƒ½åŸå› " class="headerlink" title="å¯èƒ½åŸå› "></a>å¯èƒ½åŸå› </h3><p>åˆ°è¿™ä¸€æ­¥ï¼Œåœ¨å›å¤´çœ‹çœ‹ä»¥ä¸Šå‡ºç°çš„bundleIDå’ŒPPæ–‡ä»¶ä¸åŒ¹é…é”™è¯¯ï¼Œåœ¨ç”¨matchç®¡ç†ppæ–‡ä»¶çš„å‰æä¸‹ï¼Œæœ‰å¯èƒ½æ˜¯å› ä¸ºXcode9å¼•èµ·çš„é—®é¢˜ï¼Œæ‰“åŒ…æµç¨‹æˆ–è€…å‚æ•°è¯»å†™å“ªé‡Œæœ‰ç‚¹å˜åŒ–ï¼Œéœ€è¦fastlaneå›¢é˜Ÿåšè¿›ä¸€æ­¥é€‚é…æ›´æ–°ã€‚ä¸Šæ–‡ä¸­issueçš„é“¾æ¥çŠ¶æ€åˆ°æˆªæ­¢ç¬”è€…å†™ä½œå®Œæˆä¹‹æ—¶ï¼Œä»»æ˜¯åœ¨opençŠ¶æ€ã€‚æ‰€ä»¥è¿™ä¸ªåŸå› æœ‰å¾…å…³æ³¨ï¼Œå½“ç„¶ä¹Ÿå¸Œæœ›èƒ½æœ‰å¤§ä½¬åœ¨æŒ‡å‡ºåŸå› ï¼Œæ„Ÿæ¿€ä¸å°½~</p>
<p>è‡³æ­¤ä¸ºæ­¢ï¼Œè¸©è¿‡çš„å‘å…¨éƒ¨éƒ½å¡«å¹³äº†ã€‚ä¸å…‰æ˜¯fastlaneï¼Œç”¨å…¶ä»–çš„ä¸€äº›å·¥å…·æˆ–è€…ç¬¬ä¸‰æ–¹çš„æ—¶å€™è¿˜æ˜¯è¦å¤šå¤šå…³æ³¨githubä¸Šçš„issueï¼Œè¿™é‡Œæ˜¯å—å¤§å¤§å®è—ï¼Œç­‰å¾…è¢«ä½ æŒ–æ˜ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/17/updateCocoapodsIssue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/updateCocoapodsIssue/" itemprop="url">æ›´æ–°cocoapods é‡åˆ°çš„å‘</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-17T13:48:15+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="ç°è±¡ï¼š"><a href="#ç°è±¡ï¼š" class="headerlink" title="ç°è±¡ï¼š"></a>ç°è±¡ï¼š</h3><p>æœ€è¿‘åœ¨é¡¹ç›®ï¼Œç”±äºæ‰“åŒ…çš„æ—¶å€™æŠ¥è­¦ï¼Œä¸å…¶ä»–åŒäº‹ç”µè„‘ä¿æŒcocoapodsç‰ˆæœ¬å·ä¸€è‡´ï¼ˆæƒ³è¦æ›´æ–°åˆ°æœ€æ–°çš„1.3.1ï¼Œç›®å‰1.2.0ï¼‰ï¼Œäºæ˜¯åœ¨ç»ˆç«¯å¼€å§‹æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br><span class="line">pod --version</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-95764f2528cfd0ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ›´æ–°.png"><br>è¿‡ç¨‹çœ‹ç€éƒ½å¾ˆæ­£å¸¸ï¼Œä½†æ˜¯åœ¨æ•²ä¸€ä¸‹å‘½ä»¤çœ‹ç‰ˆæœ¬ï¼Œå‘ç°è¿˜æ˜¯åŸå…ˆ1.2.0ç‰ˆæœ¬ã€‚ç¬é—´å‚»äº†çœ¼ï¼Œä¸èµ·ä½œç”¨~<br>åœ¨ç»ˆç«¯é‡Œé¢ç»§ç»­æ•²<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which pod</span><br></pre></td></tr></table></figure></p>
<p>æŸ¥çœ‹ä¸€ä¸‹å½“å‰podçš„è·¯å¾„ï¼Œç«Ÿç„¶å‘ç°åˆšåˆšå®‰è£…podçš„è·¯å¾„å’Œpodè¿è¡Œçš„è·¯å¾„ä¸ä¸€æ ·ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/1447375-fdf83dec54075b87.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="è·¯å¾„1.png"><br><img src="http://upload-images.jianshu.io/upload_images/1447375-3b4ffb6619f2c13a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="è·¯å¾„2.png"><br>ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢éƒ½æœ‰podï¼ˆä¸Šå›¾æ˜¯è¢«æˆ‘åˆ æ‰podä¹‹åçš„æˆªå›¾ï¼‰ï¼Œæ‰€ä»¥ç†æ‰€å½“ç„¶çš„æƒ³æŠŠåˆšåˆšæ›´æ–°çš„podå¤åˆ¶ä¸€ä»½åˆ°which podæŒ‡å®šçš„ç›®å½•ä¸‹ï¼Œç»“æœå‘ç°ä¹Ÿæ˜¯ä¸èµ·ä½œç”¨ã€‚<br>åç»­æˆ‘ä¸€æ¬¡åˆä¸€æ¬¡çš„æŒ‡å®špodçš„å®‰è£…ç›®å½•ï¼Œå®‰è£…ï¼Œå¸è½½podéƒ½ä¸ç®¡ç”¨ï¼Œå®‰è£…å®Œç‰ˆæœ¬å·å§‹ç»ˆä¸º1.2.0ï¼ˆâ”‘(ï¿£Ğ” ï¿£)â”ï¼‰ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h3><p>æ— å¥ˆï¼Œåªå¥½å¦å¯»ä»–æ³•ï¼Œæ—¢ç„¶æˆ‘æ— æ³•æŒ‡å®šï¼Œé‚£èƒ½å¦ç›´æ¥å…¨éƒ¨åˆ é™¤å‘¢ï¼Œå…¨éƒ¨é‡æ¥ï¼Ÿ<br>åé¢å°è¯•ç€åœ¨ç»ˆç«¯æ•²ç§»é™¤å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem uninstall cocoapods</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ—¶å€™å±…ç„¶å‘ç°æˆ‘ç”µè„‘é‡Œé¢æœ‰å¥½å‡ ä¸ªç‰ˆæœ¬çš„cocoapodsï¼Œçœ‹åˆ°ç¬¬6ä¸ªé€‰é¡¹å…¨éƒ¨ç‰ˆæœ¬ï¼Œæœæ–­é€‰äº†6ã€‚<br><img src="http://upload-images.jianshu.io/upload_images/1447375-9099cc7fe9e7507c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å…¨éƒ¨ç§»é™¤.png"><br>å®Œæ¯•ä¹‹åè¿™ä¸ªæ—¶å€™æˆ‘ç”µè„‘çš„å°±æ²¡æœ‰ä»»ä½•cocoapodsç‰ˆæœ¬äº†ï¼ˆå¾ˆæ£’æ£’ï¼‰ã€‚<br>ç„¶åé‡æ–°æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œç»ˆäºå¯ä»¥äº†ã€‚podå®‰è£…çš„ç›®å½•ï¼Œå’Œç°æ‰§è¡Œçš„podè·¯å¾„ä¸ºåŒä¸€ä¸ªäº†ã€‚<br><img src="http://upload-images.jianshu.io/upload_images/1447375-fa7c51850b1b41ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é‡æ–°å®‰è£….png"></p>
<h3 id="åŸå› -amp-æ€»ç»“ï¼š"><a href="#åŸå› -amp-æ€»ç»“ï¼š" class="headerlink" title="åŸå› &amp;æ€»ç»“ï¼š"></a>åŸå› &amp;æ€»ç»“ï¼š</h3><p>ä¸ºä½•ä¼šå‡ºç°ä¸åŒçš„è·¯å¾„ï¼Ÿcocoapodsæ˜¯ç”¨çš„rubyè¯­è¨€å†™çš„ä¸€ä¸ªå·¥å…·ã€‚MacOSå½“ä¸­æœ¬èº«å°±é›†æˆäº†Rubyï¼Œæ‰€ä»¥è·¯å¾„ä¸ä¸€æ ·çš„åŸå› ï¼Œæ˜¯å› ä¸ºç”µè„‘é‡Œé¢æœ‰ä¸€ä¸ªè‡ªå¸¦çš„Rubyè·¯å¾„ï¼Œè¿˜æœ‰ä¸€ä¸ªå°±æ˜¯é€šè¿‡Rvmç®¡ç†çš„Rubyã€‚å¯ä»¥åœ¨åœ¨ç»ˆç«¯é‡Œé¢è¾“å…¥<figure class="highlight plain"><figcaption><span>ruby```æ¥æŸ¥çœ‹ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆrubyã€‚  </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">é‚£ä¹ˆå¦‚ä½•åˆ‡æ¢rubyå‘¢ï¼Ÿ</span><br></pre></td></tr></table></figure></p>
<p>rvm use system # ä½¿ç”¨ç³»ç»Ÿ ruby<br>rvm use 2.3  # ä½¿ç”¨ rvm ruby<br>```<br>åœ¨åˆ‡æ¢ ruby ç‰ˆæœ¬ä¹‹åï¼Œgem ä¹Ÿä¼šè·Ÿç€åˆ‡æ¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®‰è£…ä¸¤ä¸ªç‰ˆæœ¬çš„ CocoaPods äº†ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.jianshu.com/u/6aea1100cc05/2018/01/17/AdaptionForiOS11andiPhoneX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/AdaptionForiOS11andiPhoneX/" itemprop="url">é€‚é…iOS 11å’ŒiPhoneXå±å¹•é€‚é…é‡åˆ°çš„ä¸€äº›å‘</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-17T13:39:59+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>éšç€iOS 11æ­£å¼ç‰ˆ,ä»¥åŠXcode9æ­£å¼ç‰ˆçš„å‘å¸ƒï¼Œå·²æœ‰é¡¹ç›®å·¥ç¨‹å¯¹äºæ–°ç‰ˆæœ¬ç³»ç»Ÿå’Œæœºå‹çš„é€‚é…å°±æä¸Šäº†æ—¥ç¨‹ã€‚ä¸‹é¢ç®€å•è®²ä¸€è®²é‡åˆ°çš„ä¸€äº›å‘ï¼ŒåŒæ—¶ä¹Ÿå‘åœ¨è§£å†³é—®é¢˜ä¸­æŸ¥é˜…çš„èµ„æ–™æ–‡ç« ä½œè€…è¡¨ç¤ºæ„Ÿè°¢ï¼</p>
<h3 id="å®‰å…¨åŒºåŸŸ"><a href="#å®‰å…¨åŒºåŸŸ" class="headerlink" title="å®‰å…¨åŒºåŸŸ"></a>å®‰å…¨åŒºåŸŸ</h3><h4 id="å‘NO-1-iOS-11ä¸‹APPä¸­tableViewå†…å®¹ä¸‹ç§»20pt"><a href="#å‘NO-1-iOS-11ä¸‹APPä¸­tableViewå†…å®¹ä¸‹ç§»20pt" class="headerlink" title="å‘NO.1 iOS 11ä¸‹APPä¸­tableViewå†…å®¹ä¸‹ç§»20pt"></a>å‘NO.1 iOS 11ä¸‹APPä¸­tableViewå†…å®¹ä¸‹ç§»20pt</h4><p><img src="http://upload-images.jianshu.io/upload_images/1447375-74617a67ad70b287.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>æ•´ä¸ªé¡µé¢éšè—äº†å¯¼èˆªæ ï¼ˆè‡ªå®šä¹‰å¯¼èˆªæ ï¼‰ï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªtableviewï¼ŒåŠ ä¸Šäº†MJRefreshç¬¬ä¸‰æ–¹ã€‚å¯ä»¥æ˜æ˜¾çœ‹å‡ºä¸Šæ–¹çŠ¶æ€æ çš„éƒ¨åˆ†ç©ºç™½ï¼Œæ•´ä¸ªtableviewå†…å®¹ä¸‹æ»‘äº†20ptã€‚</p>
<p>åŸå› ï¼šiOS 11ä¸­automaticallyAdjustsScrollViewInsetså±æ€§è¢«åºŸå¼ƒäº†ï¼Œself.automaticallyAdjustsScrollViewInsets = NO å°±ç­‰äºæ²¡æœ‰è®¾ç½®ï¼ˆé»˜è®¤æ˜¯YESï¼‰ï¼Œäºæ˜¯é¡¶éƒ¨å°±å¤šäº†ä¸€å®šçš„contentInsetã€‚ç‚¹å¼€ç³»ç»Ÿå¤´æ–‡ä»¶å°±ä¼šæœ‰æç¤ºè¯´æ˜</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1447375-af9395ec319c1c97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>è§£å†³æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (@available(iOS 11.0, *)) &#123;</span><br><span class="line">    self.tableView.contentInsetAdjustmentBehavior = 	UIScrollViewContentInsetAdjustmentNever;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    self.automaticallyAdjustsScrollViewInsets = NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…³äºå®‰å…¨åŒºåŸŸé€‚é…ï¼Œç®€ä¹¦ä¸Šçš„è¿™ç¯‡æ–‡ç« <a href="http://www.jianshu.com/p/efbc8619d56b">iOS 11 å®‰å…¨åŒºåŸŸé€‚é…</a>æ€»ç»“ä»‹ç»å¾—éå¸¸è¯¦ç»†ï¼Œè¯·å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚</p>
<h3 id="iPhoneX"><a href="#iPhoneX" class="headerlink" title="iPhoneX"></a>iPhoneX</h3><h4 id="å‘NO-2-LaunchImageé—®é¢˜"><a href="#å‘NO-2-LaunchImageé—®é¢˜" class="headerlink" title="å‘NO.2 LaunchImageé—®é¢˜"></a>å‘NO.2 LaunchImageé—®é¢˜</h4><p>å…³äºå¸¦åˆ˜æµ·çš„iPhoneXï¼Œå¦‚æœä½ çš„APPåœ¨iPhoneXä¸Šè¿è¡Œå‘ç°æ²¡æœ‰å……æ»¡å±å¹•ï¼Œä¸Šä¸‹æœ‰é»‘è‰²åŒºåŸŸï¼Œé‚£ä¹ˆä½ åº”è¯¥ä¹Ÿåƒæˆ‘ä¸€æ ·LaunchImageæ²¡æœ‰ç”¨storyboardè€Œæ˜¯ç”¨çš„Assetsã€‚Assetsä¸­è§£å†³åŠæ³•æ·»åŠ ä¸€å¼ å¯åŠ¨å›¾ï¼Œå°ºå¯¸ä¸º1125x2436ï¼Œæˆ–è€…ç›´æ¥å¯ç”¨LaunchScreen.storyboardã€‚<br>å¦å¤–åœ¨è¿™é‡Œæä¾›ä¸€ä¸ªåˆ¤æ–­iPhoneXæœºå‹çš„å®å®šä¹‰ï¼Œå‰ææ˜¯launchimageå·²ç»è®¾ç½®å¥½ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#define IS_iPhoneX  UIScreen.mainScreen.currentMode.size.width == 1125 &amp;&amp; UIScreen.mainScreen.currentMode.size.height == 2436</span><br></pre></td></tr></table></figure>
<h4 id="å‘NO-3-storyboardã€xibä¸Šçš„å®‰å…¨åŒºé—®é¢˜"><a href="#å‘NO-3-storyboardã€xibä¸Šçš„å®‰å…¨åŒºé—®é¢˜" class="headerlink" title="å‘NO.3 storyboardã€xibä¸Šçš„å®‰å…¨åŒºé—®é¢˜"></a>å‘NO.3 storyboardã€xibä¸Šçš„å®‰å…¨åŒºé—®é¢˜</h4><p>æœ¬äººåœ¨åšè§£å†³ç¬¬äºŒä¸ªå‘çš„æ—¶å€™ï¼Œåˆ›å»ºäº†storyboardä½œä¸ºå¯åŠ¨å›¾ä½¿ç”¨ã€‚æŒ‰ç…§ä»¥å¾€çš„æ€è·¯ï¼Œæä¸€ä¸ªimageViewè¦†ç›–åˆ°æ•´ä¸ªæ§åˆ¶å™¨çš„viewä¸Šå»ï¼Œæ‹‰å¥½çº¦æŸï¼Œä¸€ç¼–è¯‘<br>ç¼–è¯‘å‘ç°ç³»ç»ŸæŠ¥äº†ä¸ªé”™ã€‚<br><img src="http://upload-images.jianshu.io/upload_images/1447375-842058207ad29076.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h5 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› :"></a>åŸå› :</h5><p>è‹¹æœåœ¨iOS7ä¸­å¼•å…¥çš„Top Layout Guideå’ŒBottom Layout Guide,è¿™äº›å¸ƒå±€æŒ‡å—åœ¨iOS 11ä¸­è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯Safe Area Layout Guide.</p>
<p>å› ä¸ºé¡¹ç›®è¦æ±‚ç³»ç»Ÿæœ€ä½é€‚é…iOS 8ï¼Œæ‰€ä»¥è¦å¯¹è¿™é‡Œè¿›è¡Œå¤„ç†ã€‚</p>
<h5 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h5><p>1ã€æ‰“å¼€å³ä¾§çš„ Show the File inspetcor<br>2ã€å»æ‰ Use Safe Area Layout Guides<br><img src="http://upload-images.jianshu.io/upload_images/1447375-bca78de3065ddcc0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>å¦‚å›¾ï¼Œè¿™æ ·ä¸€æ¥å°±å’Œä¹‹å‰çš„ç•Œé¢ä¸€æ ·ã€‚</p>
<p>ç›®å‰é‡åˆ°çš„å°±è¿™äº›å‘ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£è¡¥å……~<br>æœ€åï¼Œä½œä¸ºè¯¥è¡Œä»ä¸šäººå‘˜ï¼Œä¸å¾—ä¸è®²ä¸€å¥ï¼šâ€œè‹¹æœçˆ¸çˆ¸è¯´å•¥å°±æ˜¯å•¥ğŸ™‚ğŸ™‚â€</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="æŠ¢æ‰‹çš„å“¥" />
            
              <p class="site-author-name" itemprop="name">æŠ¢æ‰‹çš„å“¥</p>
              <p class="site-description motion-element" itemprop="description">æ¬¢è¿æ¥åˆ°æŠ¢æ‰‹çš„å“¥çš„æŠ€æœ¯åšå®¢</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/coderhrxu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:xuhaoran416518@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.jianshu.com/u/6aea1100cc05" title="jianshu" target="_blank">jianshu</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">æŠ¢æ‰‹çš„å“¥</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
